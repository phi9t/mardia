{"solution": "By taking $x = 0$, we get $f(0) + 2f(y) = f(f(y))$ for all $y\\in \\mathbb{Z}$. So, the problem becomes:\n $$ f(2x) + 2f(y) = f(0) + 2f(x + y) $$\n Taking $x = 1$ for this one, we quickly obtain that $2(f(y+1) - f(y)) = f(2) - f(0) \\Leftrightarrow f(y+1)-f(y) = (f(2)-f(0))/2$, so $f$ is linear, that is there exists $k,c$ such that $f(x) = kx+c$. Plug this back into the original equation, we see $f(x) = 2x+c$ and $f(x)=0$ are all possible solutions, and these indeed satisfy the given condition", "grading guidelines": "(Partial)\n 1. Guessed the solution correctly\n 2. Proved $f(f(y)) = 2f(y) + f(0)$ and $f(2x) + 2f(0) = f(f(x))$\n(Almost)\n 1. Solved correctly, but did not check that the finding candidates are indeed the solutions to the given equation.", "level": "IMO-easy", "source": "(Modified) IMO 2019, P1", "question": "Determine all functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ such that, for all $x, y \\in \\mathbb{Z}$, we have \\[ f(2x)+2f(y)=f(f(x+y)).\\]", "problem_idx": "PB-Basic-001", "type": "Algebra", "model_prediction": {"proof": "Let \\(P(x,y)\\) denote the statement  \n\n\\[\nf(2x)+2f(y)=f\\bigl(f(x+y)\\bigr)\\qquad(\\forall x,y\\in\\mathbb Z).\n\\]\n\n---\n\n### 1.  First consequences of the equation  \n\n*Put \\(y=0\\) in \\(P(x,y)\\):*  \n\n\\[\nf(2x)+2f(0)=f\\bigl(f(x)\\bigr)\\tag{1}\n\\]\n\n*Put \\(x=0\\) in \\(P(x,y)\\):*  \n\n\\[\nf(0)+2f(y)=f\\bigl(f(y)\\bigr)\\tag{2}\n\\]\n\nDenote \\(c=f(0)\\in\\mathbb Z\\). Then (1) and (2) become  \n\n\\[\nf(2x)+2c=f\\bigl(f(x)\\bigr),\\qquad c+2f(y)=f\\bigl(f(y)\\bigr). \\tag{1'}, (2')\n\\]\n\nFor an arbitrary integer \\(t\\) we have from (1') (with \\(x=t\\))  \n\n\\[\nf(2t)+2c=f\\bigl(f(t)\\bigr),\n\\]\n\nand from (2') (with \\(y=t\\))  \n\n\\[\nc+2f(t)=f\\bigl(f(t)\\bigr).\n\\]\n\nEquating these two expressions for \\(f\\bigl(f(t)\\bigr)\\) gives  \n\n\\[\nf(2t)+2c=c+2f(t)\\;\\Longrightarrow\\;f(2t)=2f(t)-c. \\tag{A}\n\\]\n\nMoreover, (2') directly yields  \n\n\\[\nf\\bigl(f(t)\\bigr)=c+2f(t). \\tag{B}\n\\]\n\n---\n\n### 2.  Obtaining a Cauchy\u2011type relation  \n\nInsert (A) (with \\(t=x\\)) and (B) (with \\(t=x+y\\)) into the original equation \\(P(x,y)\\):\n\n\\[\n\\bigl(2f(x)-c\\bigr)+2f(y)=c+2f(x+y).\n\\]\n\nSimplify:\n\n\\[\n2f(x)+2f(y)-c=2f(x+y)+c\\;\\Longrightarrow\\;2f(x)+2f(y)=2f(x+y)+2c.\n\\]\n\nFactor \\(2\\):\n\n\\[\n2\\bigl[f(x)+f(y)-f(x+y)-c\\bigr]=0.\n\\]\n\nSince \\(2\\neq0\\) and the product of two integers is zero only if at least one factor is zero, the bracket must be zero. Hence  \n\n\\[\nf(x)+f(y)=f(x+y)+c\\qquad(\\forall x,y\\in\\mathbb Z). \\tag{C}\n\\]\n\n---\n\n### 3.  Reducing to an additive function  \n\nDefine \\(g(x)=f(x)-c\\). Then \\(f(x)=g(x)+c\\). Substituting this into (C) gives  \n\n\\[\n(g(x)+c)+(g(y)+c)=(g(x+y)+c)+c\n\\;\\Longrightarrow\\;g(x)+g(y)+2c=g(x+y)+2c,\n\\]\n\nso  \n\n\\[\ng(x+y)=g(x)+g(y)\\qquad(\\forall x,y\\in\\mathbb Z). \\tag{D}\n\\]\n\nThus \\(g\\) is an **additive** function from \\(\\mathbb Z\\) to \\(\\mathbb Z\\).\n\n---\n\n### 4.  Form of an additive function on \\(\\mathbb Z\\)  \n\nBecause \\(\\mathbb Z\\) is a cyclic group under addition, any additive map is completely determined by its value at \\(1\\):\n\n* \\(g(0)=g(0+0)=g(0)+g(0)\\;\\Rightarrow\\;g(0)=0\\).  \n* For a positive integer \\(n\\), induction yields \\(g(n)=n\\,g(1)\\).  \n* For a negative integer \\(n\\), using \\(g(n)+g(-n)=g(0)=0\\) gives \\(g(n)=-g(-n)=-( -n\\,g(1))=n\\,g(1)\\).\n\nTherefore  \n\n\\[\ng(x)=a\\,x\\quad\\text{with }a:=g(1)\\in\\mathbb Z\\;( \\text{since }g(1)=f(1)-c\\in\\mathbb Z).\n\\]\n\nConsequently  \n\n\\[\nf(x)=g(x)+c=a x+c,\\qquad a,c\\in\\mathbb Z. \\tag{E}\n\\]\n\n---\n\n### 5.  Determining the admissible \\(a,c\\)  \n\nInsert the affine expression (E) into the original equation.\n\n\\[\n\\begin{aligned}\nf(2x)&=a(2x)+c=2a x+c,\\\\[2mm]\n2f(y)&=2(ay+c)=2a y+2c,\\\\[2mm]\n\\text{LHS}&=2a x+c+2a y+2c=2a(x+y)+3c.\n\\end{aligned}\n\\]\n\n\\[\n\\begin{aligned}\nf(x+y)&=a(x+y)+c,\\\\[2mm]\nf\\bigl(f(x+y)\\bigr)&=f\\bigl(a(x+y)+c\\bigr)=a\\bigl(a(x+y)+c\\bigr)+c\n                   =a^{2}(x+y)+ac+c.\n\\end{aligned}\n\\]\n\nThus the equation \\(f(2x)+2f(y)=f\\bigl(f(x+y)\\bigr)\\) becomes  \n\n\\[\n2a(x+y)+3c=a^{2}(x+y)+ac+c\\qquad(\\forall x,y\\in\\mathbb Z).\n\\]\n\nSince \\(x+y\\) can be any integer \\(t\\), this is equivalent to  \n\n\\[\n2a t+3c=a^{2}t+ac+c\\qquad(\\forall t\\in\\mathbb Z). \\tag{\u2021}\n\\]\n\nRewrite (\u2021) as  \n\n\\[\n(2a-a^{2})\\,t+(3c-ac-c)=0\\qquad(\\forall t\\in\\mathbb Z).\n\\]\n\nA linear expression that vanishes for **all** integers \\(t\\) must have both its coefficient and constant term equal to zero.  \n\n* Setting \\(t=0\\) gives the constant term condition  \n\n  \\[\n  3c-ac-c=0\\;\\Longrightarrow\\;2c-ac=0\\;\\Longrightarrow\\;c(2-a)=0. \\tag{i}\n  \\]\n\n* Setting \\(t=1\\) (or simply equating the coefficient of \\(t\\) to zero) yields  \n\n  \\[\n  2a-a^{2}=0\\;\\Longrightarrow\\;a(a-2)=0. \\tag{ii}\n  \\]\n\nNow solve the system (i)\u2013(ii).\n\n* From (ii): \\(a=0\\) or \\(a=2\\).  \n* **If \\(a=0\\)**, then (i) becomes \\(c\\cdot2=0\\Rightarrow c=0\\). Hence \\(f(x)=0\\).  \n* **If \\(a=2\\)**, then (i) becomes \\(c\\cdot0=0\\), which is satisfied for **any** integer \\(c\\). Hence \\(f(x)=2x+c\\) with an arbitrary integer constant \\(c\\).\n\n---\n\n### 6.  Verification  \n\n* **\\(f(x)\\equiv0\\):**  LHS \\(=0+0=0\\), RHS \\(=f(f(x+y))=f(0)=0\\).  \n* **\\(f(x)=2x+c\\):**  \n\n  \\[\n  \\begin{aligned}\n  \\text{LHS}&=f(2x)+2f(y)=(2\\cdot2x+c)+2(2y+c)=4x+c+4y+2c=4(x+y)+3c,\\\\\n  \\text{RHS}&=f\\bigl(2(x+y)+c\\bigr)=2\\bigl(2(x+y)+c\\bigr)+c=4(x+y)+2c+c=4(x+y)+3c.\n  \\end{aligned}\n  \\]\n\nBoth families satisfy the original functional equation.\n\n---\n\n### 7.  Answer  \n\nAll functions \\(f:\\mathbb Z\\to\\mathbb Z\\) satisfying  \n\n\\[\nf(2x)+2f(y)=f\\bigl(f(x+y)\\bigr)\\qquad(\\forall x,y\\in\\mathbb Z)\n\\]\n\nare exactly  \n\n\\[\n\\boxed{\\,f(x)=0\\ \\text{for all }x\\in\\mathbb Z\\,}\n\\]\n\nor  \n\n\\[\n\\boxed{\\,f(x)=2x+b\\ \\text{for all }x\\in\\mathbb Z,\\ \\text{with }b\\in\\mathbb Z\\,}.\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Assume the contrary that $xyzt> x^2+y^2+z^2+t^2$. Using AM-GM, we have $xyzt> x^2+y^2+z^2+t^2 \\geq 4\\sqrt{xyzt}$, which means that $xyzt > 16$. From here, this implies $2(x+y+z+t) >16$ from the condition $2(x+y+z+t) \\geq xyzt$.\n However, from Cauchy-Scwarz, we have $x^2+y^2+z^2+t^2 \\ge\\frac{1}{4}(x+y+z+t)^2>2(x+y+z+t) \\geq xyzt$. This is a contradiction.\n\n Therefore: $x^2+y^2+z^2+t^2\\ge xyzt$.", "grading guidelines": "(Partial)\n 1. Attempted the \"proof by contradiction\" and made a positive progress based on it.\n 2. Applied the AM-GM inequality correctly.\n(Almost)\n 1. Solution is almost complete, but made minor mistakes which are not negligible.", "level": "pre-IMO", "source": "(Modified)  All-Russian MO 2013, Grade 11, P6", "question": "Show that $x^2 + y^2 + z^2 + t^2 \\ge xyzt$ for any positive real numbers $x, y, z, t$ that satisfy $2(x + y + z + t) \\ge xyzt$.", "problem_idx": "PB-Basic-002", "type": "Algebra", "model_prediction": {"proof": "Let  \n\n\\[\nS = x + y + z + t,\\qquad Q = x^{2}+y^{2}+z^{2}+t^{2},\\qquad P = xyzt .\n\\]\n\nAll variables are positive, so \\(S>0,\\;Q>0,\\;P>0\\).  \nThe hypothesis is  \n\n\\[\n2S \\ge P .\\tag{1}\n\\]\n\nWe have to prove \\(Q \\ge P\\).  \n\nWe split the proof into two cases according to the size of \\(P\\).\n\n---\n\n### Case 1\u2003\\(P \\le 16\\)\n\nApply the **AM\u2013GM inequality** to the four non\u2011negative numbers \\(x^{2},y^{2},z^{2},t^{2}\\):\n\n\\[\n\\frac{x^{2}+y^{2}+z^{2}+t^{2}}{4}\n   \\ge \\sqrt[4]{x^{2}y^{2}z^{2}t^{2}}\n   = \\sqrt[4]{(xyzt)^{2}}\n   = (xyzt)^{1/2}\n   = \\sqrt{P}.\n\\]\n\nHence  \n\n\\[\nQ \\ge 4\\sqrt{P}. \\tag{2}\n\\]\n\nBecause \\(P\\le 16\\) we have \\(\\sqrt{P}\\le 4\\); therefore  \n\n\\[\n4\\sqrt{P} \\ge P\\qquad\\bigl(4\\sqrt{P}-P=\\sqrt{P}(4-\\sqrt{P})\\ge 0\\bigr). \\tag{3}\n\\]\n\nFrom (2) and (3) we obtain \\(Q \\ge 4\\sqrt{P} \\ge P\\); i.e. \\(Q\\ge P\\).\n\n---\n\n### Case 2\u2003\\(P \\ge 16\\)\n\nFirst use **Cauchy\u2013Schwarz** (or the QM\u2011AM inequality):\n\n\\[\n(1^{2}+1^{2}+1^{2}+1^{2})(x^{2}+y^{2}+z^{2}+t^{2}) \\ge (x+y+z+t)^{2},\n\\]\n\nwhich is  \n\n\\[\n4Q \\ge S^{2}\\qquad\\Longrightarrow\\qquad Q \\ge \\frac{S^{2}}{4}. \\tag{4}\n\\]\n\nFrom the hypothesis (1) we obtain \\(S \\ge \\dfrac{P}{2}\\).  \nBoth sides are non\u2011negative, so squaring preserves the inequality:\n\n\\[\nS^{2} \\ge \\Bigl(\\frac{P}{2}\\Bigr)^{2} = \\frac{P^{2}}{4}. \\tag{5}\n\\]\n\nNow combine (4) and (5):\n\n\\[\nQ \\ge \\frac{S^{2}}{4} \\ge \\frac{1}{4}\\cdot\\frac{P^{2}}{4}= \\frac{P^{2}}{16}. \\tag{6}\n\\]\n\nBecause we are in the case \\(P\\ge 16\\),\n\n\\[\n\\frac{P^{2}}{16} - P = P\\Bigl(\\frac{P}{16}-1\\Bigr) \\ge 0,\n\\]\n\nso \\(\\displaystyle \\frac{P^{2}}{16} \\ge P\\).  Together with (6) this yields  \n\n\\[\nQ \\ge \\frac{P^{2}}{16} \\ge P,\n\\]\n\ni.e. \\(Q\\ge P\\).\n\n---\n\nBoth cases together cover every possible value of \\(P\\) (the point \\(P=16\\) belongs to both, and each argument works there).  \nThus for **all** positive real numbers \\(x,y,z,t\\) satisfying \\(2(x+y+z+t)\\ge xyzt\\) we have proved  \n\n\\[\nx^{2}+y^{2}+z^{2}+t^{2} \\ge xyzt .\n\\]\n\n\u220e", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Let $P(a,b)$ denote the given assertion.\n $P(a,a) \\implies f(a+f(a))=0$\n $P(0,b) \\implies f(f(0))=0$\n $P(f(0),b) \\implies f(0)f(f(0)+f(b))=(b-f(0))f(0)$\n\n So $f(0)=0$ or $ f(f(0)+f(b))=(b-f(0))$\n\n If $ f(f(0)+f(b))=(b-f(0))$, setting $b \\rightarrow f(b)+b \\implies f(b)=-b+f(0)$ and checking we see that $f(a)=-a+k$ truly satisfies the condition\n Suppose now $f(0)=0$\n\n $P(a,0) \\implies f(f(a))=-f(a)$\n So $P(a,b)$ becomes $af(a+f(b))=(a-b)f(a)$\n So $P(a,f(b)+b)$ gives us $f(a)=0$ or $f(a)=-a$\n\n Finally $f(a)=0, f(a)=-a+k$ where $k$ is a constant", "grading guidelines": "(Partial)\n 1. Proved that either $f(0)=0$ or $f(x)=-x+k$ for some constant $k$\n(Almost)\n 1. Solved correctly by handling the case $f(0)=0$, but did not check that the candidates are indeed the solutions to given equation.", "level": "IMO-easy", "source": "(Modified) Balkan MO 2023, P1", "question": "Find all functions $f\\colon \\mathbb{R} \\rightarrow \\mathbb{R}$ such that for all $a,b \\in \\mathbb{R}$,\n \\[ (b - a)f(f(a)) = a f(a + f(b)). \\]\"", "problem_idx": "PB-Basic-003", "type": "Algebra", "model_prediction": {"proof": "Let  \n\n\\[\nP(a,b):\\qquad (b-a)\\,f(f(a))=a\\,f(a+f(b))\\qquad(\\forall a,b\\in\\mathbb R).\n\\]\n\n---\n\n### 1.  First consequences  \n\n*Put \\(a=0\\) in \\(P(a,b)\\):*  \n\n\\[\n(b-0)f(f(0))=0\\cdot f(0+f(b))\\;\\Longrightarrow\\; b\\,f(f(0))=0\\;\\;(\\forall b).\n\\]\n\nHence \\(f(f(0))=0\\).  Denote \\(d=f(0)\\); then  \n\n\\[\nf(d)=0. \\tag{A}\n\\]\n\n*Put \\(b=a\\) in \\(P(a,b)\\):*  \n\n\\[\n(a-a)f(f(a))=0=a\\,f(a+f(a)).\n\\]\n\nIf \\(a\\neq0\\) we obtain \\(f(a+f(a))=0\\); for \\(a=0\\) we already have\n\\(f(0+f(0))=f(d)=0\\) by (A).  Therefore  \n\n\\[\n\\boxed{\\,f(a+f(a))=0\\qquad\\forall a\\in\\mathbb R\\,}. \\tag{1}\n\\]\n\n*Put \\(b=a+f(a)\\) in \\(P(a,b)\\).*  \nThen \\(b-a=f(a)\\) and by (1) \\(f(b)=f(a+f(a))=0\\), so \\(a+f(b)=a\\).  Hence  \n\n\\[\n\\boxed{\\,f(a)f(f(a))=a\\,f(a)\\qquad\\forall a\\in\\mathbb R\\,}. \\tag{2}\n\\]\n\n*Put \\(b=d=f(0)\\) in \\(P(a,b)\\).*  \nBecause \\(f(d)=0\\) (from (A)), \\(a+f(b)=a\\).  Thus  \n\n\\[\n\\boxed{\\,(d-a)f(f(a))=a\\,f(a)\\qquad\\forall a\\in\\mathbb R\\,}. \\tag{3}\n\\]\n\n---\n\n### 2.  Immediate deductions from (2) and (3)\n\nFrom (2): if \\(f(a)\\neq0\\) we may cancel \\(f(a)\\) and obtain  \n\n\\[\n\\boxed{\\,f(f(a))=a\\,}. \\tag{4}\n\\]\n\nAssume now that \\(a\\neq0\\) **and** \\(f(a)\\neq0\\).  Then (4) holds and we can\nsubstitute it into (3):\n\n\\[\n(d-a)\\,a = a\\,f(a).\n\\]\n\nSince \\(a\\neq0\\) we cancel \\(a\\) and get  \n\n\\[\n\\boxed{\\,f(a)=d-a\\,}. \\tag{5}\n\\]\n\n---\n\n### 3.  The zero function  \n\nThe constant function \\(f(x)\\equiv0\\) obviously satisfies the original\nequation (both sides are zero).  We keep it as a separate solution.\n\n---\n\n### 4.  Assume \\(f\\) is **not** identically zero  \n\nWe shall prove that in this case \\(f(x)=d-x\\) for every \\(x\\).\n\n#### 4.1  Existence of a non\u2011zero point with non\u2011zero value  \n\nBecause \\(f\\) is not identically zero, there exists some \\(u\\) with\n\\(f(u)\\neq0\\).  We need to ensure that we can choose such a point with\n\\(u\\neq0\\).\n\n*If \\(f(0)=0\\)*, then \\(u\\) cannot be \\(0\\) (otherwise \\(f(0)\\neq0\\)),\nso we already have \\(u\\neq0\\).\n\n*If \\(f(0)=d\\neq0\\)*, suppose for contradiction that \\(f(x)=0\\) for all\n\\(x\\neq0\\).  Take any \\(a\\neq0\\) and set \\(b=0\\) in \\(P(a,b)\\).  \nUnder the assumption we have \\(f(a)=0\\), hence \\(f(f(a))=f(0)=d\\).  \nTherefore  \n\n\\[\n\\text{LHS}=(0-a)f(f(a))=-a d,\\qquad \n\\text{RHS}=a\\,f(a+f(0))=a\\,f(a+d).\n\\]\n\nNow \\(f(a+d)=0\\) if \\(a+d\\neq0\\), and \\(f(a+d)=d\\) if \\(a+d=0\\).  \nIn the first case the right\u2011hand side is \\(0\\), forcing \\(-ad=0\\) \u2013\nimpossible because \\(a,d\\neq0\\).  \nIn the second case we would need \\(-ad=ad\\), i.e. \\(2ad=0\\), again\nimpossible.  Hence the assumption \u201c\\(f(x)=0\\) for all \\(x\\neq0\\)\u201d cannot\nhold; consequently there must exist a non\u2011zero \\(a\\) with \\(f(a)\\neq0\\).\n\nThus **in every non\u2011zero solution we can pick an element**  \n\n\\[\na_{0}\\neq0,\\qquad f(a_{0})\\neq0. \\tag{6}\n\\]\n\n#### 4.2  Properties of \\(a_{0}\\)\n\nFrom (4) and (6) we obtain \\(f(f(a_{0}))=a_{0}\\).  \nBecause \\(a_{0}\\neq0\\) and \\(f(a_{0})\\neq0\\), (5) gives  \n\n\\[\nf(a_{0})=d-a_{0}. \\tag{7}\n\\]\n\n#### 4.3  The zero set of \\(f\\)\n\nLet \\(b\\) be any number with \\(f(b)=0\\).  Substitute \\(a=a_{0}\\) into\n\\(P(a,b)\\):\n\n\\[\n(b-a_{0})\\,f(f(a_{0})) = a_{0}\\,f(a_{0}+f(b)).\n\\]\n\nUsing \\(f(f(a_{0}))=a_{0}\\) and \\(f(b)=0\\) we get  \n\n\\[\n(b-a_{0})\\,a_{0}=a_{0}\\,f(a_{0}).\n\\]\n\nSince \\(a_{0}\\neq0\\) we may cancel \\(a_{0}\\) and obtain\n\\(b-a_{0}=f(a_{0})=d-a_{0}\\); hence  \n\n\\[\nb=d.\n\\]\n\nTherefore **every zero of \\(f\\) must be \\(d\\)**.  We already know from (A)\nthat \\(f(d)=0\\), so the zero set is exactly \\(\\{d\\}\\); i.e.  \n\n\\[\nf(x)=0\\;\\Longleftrightarrow\\;x=d. \\tag{8}\n\\]\n\n#### 4.4  Determination of \\(f\\)\n\nWe now prove \\(f(x)=d-x\\) for all \\(x\\).\n\n* **If \\(x=d\\):**\u2003\\(f(d)=0=d-d\\) \u2013 true.  \n\n* **If \\(x\\neq d\\):**\u2003by (8) we have \\(f(x)\\neq0\\).  \n  * When \\(x\\neq0\\) we can apply (5) (because \\(x\\neq0\\) and \\(f(x)\\neq0\\)):\n    \\(f(x)=d-x\\).  \n  * When \\(x=0\\) (which forces \\(d\\neq0\\) since \\(x\\neq d\\)):\n    by definition \\(f(0)=d\\) and \\(d-0=d\\); hence \\(f(0)=d-0\\).\n\nThus in every case \\(f(x)=d-x\\) holds.\n\nConsequently **every solution that is not the zero function has the form**  \n\n\\[\nf(x)=C-x\\qquad\\text{with }C=f(0)\\in\\mathbb R .\n\\]\n\n---\n\n### 5.  Verification  \n\n*For \\(f(x)=C-x\\):*  \n\n\\[\nf(f(x))=C-(C-x)=x,\\qquad \nf(x+f(y))=C-(x+C-y)=y-x.\n\\]\n\nHence \\((y-x)f(f(x))=(y-x)x = x(y-x)=x\\,f(x+f(y))\\); the original equation\nis satisfied for all \\(x,y\\).  \n\n*For the zero function* \\(f\\equiv0\\) both sides of the equation are\nidentically zero, so it also satisfies the condition.\n\n---\n\n### 6.  Final answer  \n\nAll functions \\(f:\\mathbb R\\to\\mathbb R\\) such that  \n\n\\[\n(b-a)f(f(a))=a\\,f(a+f(b))\\qquad(\\forall a,b\\in\\mathbb R)\n\\]\n\nare exactly  \n\n\\[\n\\boxed{\\;f(x)=0\\ \\text{for all }x\\quad\\text{or}\\quad f(x)=C-x\\ \\text{with }C\\in\\mathbb R\\; }.\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Note that the function is bijective, so setting $x=0$ gives $g(0)=0$ and since it is strictly increasing, we further derive $g(x)>0$ for $x>0$ and $g(x)<0$ for $x<0$.\n\n Consider the sequence $u_0 = x, u_{n+1} = g(u_n)$, we have that $u_{n+1} = u_n + 20u_{n-1}$, which gives $u_n = a (-4)^n + b 5^n$ for some real number $a, b$. Moreover, since $g$ is a bijective, there exists a real number $r$ such that $u_{-1} = r$, and so the sequence is well-defined for negative integer $n$ by defining the sequence backward. And since the sequence is increasing, $u_0 > 0$ implies $u_n > 0$ for all integer $n$.\n\n We will show that $a = 0$, which implies $g(x) = u_1 = 5u_0 = 5x$.\n\n Indeed, assume that $a > 0$, if $u_0 = x > 0$ then we choose a sufficiently small odd negative integer $n$ such that $(-4/5)^n < -b/a$, this gives $u_n < 0$. However, since $g$ is increasing and $u_0 > 0$, we must have that $u_n > 0$, which is a contradiction. Similarly, if $u_0 = a+b < 0$ then we must have $b < 0$ given $a > 0$, and so for a sufficiently small negative even integer $n$, we have $(-4/5)^n > -b/a$, which gives $u_n > 0$, which is a contradiction. Thus, we must have $a \\leq 0$.\n\n Similarly, we can show that $a < 0$ will lead to a contradiction, and so, we must have $a \\geq 0$.\n\n Together, this implies that $a = 0$. Hence proved.", "grading guidelines": "(Partial)\n 1. Proved $g(0)=0$\n 2. Constructed the sequence $u_n =g^{(n)}(x)$ and the recurrence relation.\n(Almost)\n 1. Solved correctly, but did not check that the candidates are indeed the solutions to given equation.", "level": "IMO-easy", "source": "(Modified) VMO 2012, Day2 P3", "question": "Find all strictly increasing functions $g:\\mathbb{R} \\to \\mathbb{R}$ such that:\n (a) $g$ is surjective\n (b) $g(g(x))=g(x)+20x.$", "problem_idx": "PB-Basic-004", "type": "Algebra", "model_prediction": {"proof": "**1.  Basic properties**  \n\\(g:\\mathbb R\\to\\mathbb R\\) is strictly increasing \u21d2 \\(g\\) is injective.  \n\\(g\\) is also surjective, hence bijective. Consequently the inverse function  \n\\(g^{-1}:\\mathbb R\\to\\mathbb R\\) exists; it is strictly increasing as well and satisfies \\(g^{-1}(0)=0\\) once we know \\(g(0)=0\\).\n\n**2.  Value at \\(0\\)**  \nPut \\(x=0\\) in the given equation:  \n\\[\ng(g(0))=g(0)+20\\cdot0=g(0).\n\\]  \nThus \\(g(g(0))=g(0)\\). Because \\(g\\) is injective, \\(g(0)=0\\).\n\n**3.  A relation with the inverse**  \nFor any \\(x\\) take \\(y=g^{-1}(x)\\) in \\(g(g(y))=g(y)+20y\\):  \n\\[\ng(g(g^{-1}(x)))=g(g^{-1}(x))+20g^{-1}(x)\\;\\Longrightarrow\\;g(x)=x+20g^{-1}(x). \\tag{1}\n\\]\n\n**4.  Building a bi\u2011infinite orbit**  \nFix an arbitrary real number \\(a\\). Define a sequence \\((a_n)_{n\\in\\mathbb Z}\\) by  \n\\[\na_0=a,\\qquad a_{n+1}=g(a_n)\\;\\;(n\\in\\mathbb Z).\n\\]  \nBecause \\(g\\) is bijective, this recursively determines the whole sequence:  \nfor \\(n\\ge0\\) we obtain the forward iterates; for \\(n\\le0\\) we use the inverse,\n\\(a_{n-1}=g^{-1}(a_n)\\). In particular, for every integer \\(n\\) we have  \n\\[\na_{n+1}=g(a_n),\\qquad a_{n-1}=g^{-1}(a_n). \\tag{2}\n\\]\n\n**5.  Linear recurrence for the orbit**  \nApply (1) with \\(x=a_n\\):  \n\\[\ng(a_n)=a_n+20g^{-1}(a_n).\n\\]  \nUsing (2) (\\(g(a_n)=a_{n+1}\\) and \\(g^{-1}(a_n)=a_{n-1}\\)) we obtain  \n\\[\na_{n+1}=a_n+20a_{n-1}\\qquad(\\forall n\\in\\mathbb Z). \\tag{3}\n\\]\n\n**6.  Sign preservation**  \nBecause \\(g\\) is strictly increasing and \\(g(0)=0\\):  \n\n- if \\(y>0\\) then \\(g(y)>g(0)=0\\);  \n- if \\(y<0\\) then \\(g(y)<g(0)=0\\).\n\nThe same holds for \\(g^{-1}\\) (it is strictly increasing and \\(g^{-1}(0)=0\\)).\n\nHence for the orbit \\((a_n)\\) we have  \n\n* if \\(a>0\\) then **all** \\(a_n\\) are \\(>0\\) (forward induction for \\(n\\ge0\\), backward induction for \\(n\\le0\\));  \n* if \\(a<0\\) then **all** \\(a_n\\) are \\(<0\\);  \n* if \\(a=0\\) then \\(a_n=0\\) for every \\(n\\) (since \\(g(0)=0\\)).\n\n**7.  Solving the recurrence**  \nEquation (3) is a linear homogeneous recurrence with constant coefficients.  \nIts characteristic equation \\(r^2=r+20\\) (i.e. \\(r^2-r-20=0\\)) has roots  \n\\(r_1=5,\\; r_2=-4\\). Therefore there exist constants \\(\\alpha,\\beta\\) (depending on \\(a\\)) such that  \n\n\\[\na_n=\\alpha\\cdot5^{\\,n}+\\beta\\cdot(-4)^{\\,n}\\qquad(\\forall n\\in\\mathbb Z). \\tag{4}\n\\]  \n(One finds \\(\\alpha,\\beta\\) from \\(a_0\\) and \\(a_1\\): \\(a_0=\\alpha+\\beta,\\;a_1=5\\alpha-4\\beta\\).)\n\n**8.  Eliminating the term with \\((-4)^n\\) \u2013 proving \\(\\beta=0\\)**  \n\nWe treat the three possibilities for \\(a\\).\n\n---\n\n**Case \\(a>0\\).** All \\(a_n>0\\). Assume, for contradiction, that \\(\\beta\\neq0\\).  \n\nWrite \\(n=-k\\;(k\\in\\mathbb N)\\) in (4):  \n\n\\[\na_{-k}= \\alpha\\cdot5^{-k}+\\beta\\cdot(-4)^{-k}= \\alpha\\cdot5^{-k}+\\beta\\,(-1)^k4^{-k}.\n\\]\n\nBecause \\(\\displaystyle\\frac{5^{-k}}{4^{-k}}=\\left(\\frac45\\right)^k\\to0\\), we have  \n\n\\[\n\\lim_{k\\to\\infty}\\frac{|\\alpha\\cdot5^{-k}|}{|\\beta|\\cdot4^{-k}}=0.\n\\]  \n\nThus there exists \\(K\\in\\mathbb N\\) such that for all \\(k\\ge K\\),  \n\n\\[\n|\\alpha\\cdot5^{-k}|<\\frac12\\,|\\beta|\\cdot4^{-k}. \\tag{5}\n\\]\n\nTake any \\(k\\ge K\\).  \n\n*If \\(\\beta\\,(-1)^k4^{-k}>0\\):* from (5)  \n\\[\na_{-k}\\ge \\beta\\,(-1)^k4^{-k}-|\\alpha\\cdot5^{-k}|\n      >\\beta\\,(-1)^k4^{-k}-\\frac12\\beta\\,(-1)^k4^{-k}\n      =\\frac12\\beta\\,(-1)^k4^{-k}>0.\n\\]  \n\n*If \\(\\beta\\,(-1)^k4^{-k}<0\\):* similarly  \n\\[\na_{-k}\\le \\beta\\,(-1)^k4^{-k}+|\\alpha\\cdot5^{-k}|\n      <\\beta\\,(-1)^k4^{-k}+\\frac12\\bigl(-\\beta\\,(-1)^k4^{-k}\\bigr)\n      =\\frac12\\beta\\,(-1)^k4^{-k}<0.\n\\]  \n\nHence for \\(k\\ge K\\) the sign of \\(a_{-k}\\) coincides with the sign of \\(\\beta\\,(-1)^k4^{-k}\\).\n\n- If \\(\\beta>0\\), choose an **odd** \\(k\\ge K\\) (such a \\(k\\) exists because there are infinitely many integers \\(\\ge K\\)). Then \\(\\beta\\,(-1)^k4^{-k}<0\\) and therefore \\(a_{-k}<0\\), contradicting that all \\(a_n\\) are positive.  \n- If \\(\\beta<0\\), choose an **even** \\(k\\ge K\\). Then \\(\\beta\\,(-1)^k4^{-k}<0\\) and again \\(a_{-k}<0\\), contradiction.\n\nThus \\(\\beta\\) cannot be non\u2011zero; we must have \\(\\beta=0\\).\n\n---\n\n**Case \\(a<0\\).** All \\(a_n<0\\). Again suppose \\(\\beta\\neq0\\) and keep the same \\(K\\) satisfying (5).  \nFor \\(k\\ge K\\) the same reasoning shows \\(\\operatorname{sgn}(a_{-k})=\\operatorname{sgn}\\!\\bigl(\\beta\\,(-1)^k4^{-k}\\bigr)\\).\n\n- If \\(\\beta>0\\), pick an **even** \\(k\\ge K\\). Then \\(\\beta\\,(-1)^k4^{-k}>0\\) \u21d2 \\(a_{-k}>0\\), contradicting negativity.  \n- If \\(\\beta<0\\), pick an **odd** \\(k\\ge K\\). Then \\(\\beta\\,(-1)^k4^{-k}>0\\) \u21d2 \\(a_{-k}>0\\), again a contradiction.\n\nHence again \\(\\beta=0\\).\n\n---\n\n**Case \\(a=0\\).** Then \\(a_0=0,\\;a_1=g(0)=0\\). From \\(a_0=\\alpha+\\beta,\\;a_1=5\\alpha-4\\beta\\) we obtain \\(\\alpha=\\beta=0\\); in particular \\(\\beta=0\\).\n\n---\n\nTherefore **for every** \\(a\\in\\mathbb R\\) we have \\(\\beta=0\\) in the representation (4).\n\n**9.  Determining \\(g\\)**  \nWith \\(\\beta=0\\) equation (4) becomes \\(a_n=\\alpha\\cdot5^{\\,n}\\) for all integers \\(n\\).  \nSetting \\(n=0\\) gives \\(\\alpha=a_0=a\\). Consequently  \n\n\\[\na_1=g(a)=a\\cdot5^{\\,1}=5a.\n\\]  \n\nSince \\(a\\) was arbitrary,  \n\n\\[\n\\boxed{\\,g(x)=5x\\quad\\text{for all }x\\in\\mathbb R\\,}.\n\\]\n\n**10.  Verification**  \n- \\(g(x)=5x\\) is strictly increasing.  \n- It is surjective because for any \\(y\\) one can take \\(x=y/5\\).  \n- \\(g(g(x))=5(5x)=25x=5x+20x=g(x)+20x\\).\n\nAll conditions are satisfied, and the argument above shows that no other function can satisfy them. Hence \\(g(x)=5x\\) is the unique solution.\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Substitute $\\frac{1}{x}$ in the place of $x$. Comparing with the original equation, one can see that $P(x-\\frac{1}{x})=P(-x+\\frac{1}{x})$ . This implies that $P$ is even.\n\n Suppose $\\deg P\\geq 6$. Let $P(x)= x^n + a x^{n-2} + b x^{n-4} +Q(x)$, where $\\deg Q < n-4$. Comparing the coefficient of $x^{n-4}$ in the given condition, we have that $b = \\frac{2\\binom{n}{2}+2b}{2}$, which is a contradiction. Therefore, $\\deg P \\leq 4$.\n\n If $\\deg P = 4$, let $P(x) = x^4 + ax^2 +b$. Comparing the constant term, we can conclude that $b=6$. The possible solutions are $P(x) = x^4 +a x^2 +6$ for all real numbers $a$.\n\n If $\\deg P = 2$, let $P(x) = x^2 +a$. Comparing the constant term, we can conclude that $a=0$. The only possible solution is $P(x)=x^2$.\n\n Therefore, the possible solutions are $P(x)= x^4 +ax^2 +6$, $P(x)=x^2$ which satisfies the condition.", "grading guidelines": "(Partial)\n 1. Proved that $P$ is even.\n 2. Correctly identified all solutions.\n(Almost)\n 1. Proved $\\deg(P)\\le 4$, but did not conclude the proof.", "level": "IMO-easy", "source": "(Modified) ELMO 2023 Shortlist A1", "question": "Let $P$ be a polynomial with real coefficients whose leading coefficient is $1$. Suppose that for all nonzero real numbers $x$, we have $P(x) + P(1/x) = \\frac{P(x + 1/x) + P(x - 1/x)}{2}$. Determine all possibilities for $P$.", "problem_idx": "PB-Basic-005", "type": "Algebra", "model_prediction": {"proof": "**1.  Evenness of \\(P\\).**  \nThe given functional equation is  \n\n\\[\nP(x)+P\\!\\left(\\frac1x\\right)=\\frac{P\\!\\left(x+\\frac1x\\right)+P\\!\\left(x-\\frac1x\\right)}{2}\\qquad (x\\neq 0). \\tag{FE}\n\\]\n\nReplace \\(x\\) by \\(\\frac1x\\) in (FE). Because the left\u2011hand side is symmetric we obtain  \n\n\\[\nP\\!\\left(\\frac1x\\right)+P(x)=\\frac{P\\!\\left(\\frac1x+x\\right)+P\\!\\left(\\frac1x-x\\right)}{2}.\n\\]\n\nThe first term in the right\u2011hand side is \\(P(x+1/x)\\); hence  \n\n\\[\n\\frac{P(x+1/x)+P(1/x-x)}{2}=P(x)+P(1/x)=\\frac{P(x+1/x)+P(x-1/x)}{2}.\n\\]\n\nCancelling the common term \\(\\frac12P(x+1/x)\\) gives  \n\n\\[\nP\\!\\left(\\frac1x-x\\right)=P(x-1/x). \\tag{1}\n\\]\n\nSince \\(\\frac1x-x=-(x-1/x)\\), (1) is equivalent to  \n\n\\[\nP(x-1/x)=P\\!\\bigl(-(x-1/x)\\bigr)\\qquad(\\forall x\\neq0). \\tag{2}\n\\]\n\nFor any real number \\(y\\) consider the quadratic equation \\(t^2-yt-1=0\\). Its discriminant is \\(y^{2}+4>0\\); therefore it has a real root. The product of the two roots is \\(-1\\), so one of them is positive. Choosing the positive root  \n\n\\[\nx=\\frac{y+\\sqrt{y^{2}+4}}{2}>0,\n\\]\n\nwe have \\(x-1/x=y\\). Hence the map \\(x\\mapsto x-1/x\\;(x>0)\\) is onto \\(\\mathbb R\\).  \nApplying (2) with this particular \\(x\\) yields \\(P(y)=P(-y)\\) for every \\(y\\in\\mathbb R\\). Consequently \\(P\\) is an **even** polynomial:\n\n\\[\nP(-t)=P(t)\\qquad(\\forall t\\in\\mathbb R). \\tag{3}\n\\]\n\n**2.  Reduction to a polynomial in \\(x^{2}\\).**  \nBecause \\(P\\) is even, only even powers of \\(x\\) appear. Thus there exists a polynomial \\(Q\\) with real coefficients such that  \n\n\\[\nP(x)=Q(x^{2}).\n\\]\n\nLet \\(\\deg P = 2m\\) (\\(m\\ge 0\\)); then \\(\\deg Q = m\\). The leading coefficient of \\(P\\) is \\(1\\); therefore the coefficient of \\(y^{m}\\) in \\(Q\\) is \\(1\\), i.e. \\(Q\\) is monic. Write  \n\n\\[\nQ(y)=\\sum_{k=0}^{m} a_{k}\\,y^{k},\\qquad a_{m}=1,\\;a_{k}\\in\\mathbb R. \\tag{4}\n\\]\n\n**3.  Transforming the functional equation.**  \nInsert \\(P(x)=Q(x^{2})\\) into (FE):\n\n\\[\n\\sum_{k=0}^{m} a_{k}\\bigl(x^{2k}+x^{-2k}\\bigr)\n =\\frac12\\sum_{k=0}^{m} a_{k}\\Bigl[(x+1/x)^{2k}+(x-1/x)^{2k}\\Bigr]. \\tag{5}\n\\]\n\nUsing the binomial theorem  \n\n\\[\n(x\\pm 1/x)^{2k}= \\sum_{i=0}^{2k}\\binom{2k}{i} (\\pm1)^{i}x^{2k-2i},\n\\]\n\nand adding the two expressions, the terms with odd \\(i\\) cancel:\n\n\\[\n(x+1/x)^{2k}+(x-1/x)^{2k}=2\\sum_{j=0}^{k}\\binom{2k}{2j}x^{2k-4j}.\n\\]\n\nDividing by \\(2\\) gives  \n\n\\[\n\\frac12\\bigl[(x+1/x)^{2k}+(x-1/x)^{2k}\\bigr]\n   =\\sum_{j=0}^{k}\\binom{2k}{2j}x^{2k-4j}. \\tag{6}\n\\]\n\nSubstituting (6) into (5) we obtain the identity of Laurent polynomials  \n\n\\[\n\\sum_{k=0}^{m} a_{k}\\bigl(x^{2k}+x^{-2k}\\bigr)\n   =\\sum_{k=0}^{m} a_{k}\\sum_{j=0}^{k}\\binom{2k}{2j}x^{2k-4j}. \\tag{7}\n\\]\n\n**4.  Clearing denominators and comparing coefficients.**  \nMultiply (7) by \\(x^{2m}\\) (recall \\(2m=\\deg P\\)). This yields an ordinary polynomial identity  \n\n\\[\n\\sum_{k=0}^{m} a_{k}\\bigl(x^{2m+2k}+x^{2m-2k}\\bigr)\n   =\\sum_{k=0}^{m} a_{k}\\sum_{j=0}^{k}\\binom{2k}{2j}x^{2m+2k-4j}. \\tag{8}\n\\]\n\nBecause (8) holds for infinitely many real numbers (indeed for all \\(x\\neq0\\)), the two sides are identical as polynomials; hence the coefficients of each power of \\(x\\) must coincide.\n\nWe examine the coefficient of \\(x^{2m+2r}\\) for \\(r=0,1,\\dots ,m\\).\n\n*For \\(r=0\\):*  \nOn the left, \\(x^{2m}\\) appears from the term \\(k=0\\) in both \\(x^{2m+2k}\\) and \\(x^{2m-2k}\\), contributing \\(2a_{0}\\).  \nOn the right we need \\(2k-4j=0\\), i.e. \\(k=2j\\). Hence \\(k\\) must be even and \\(j=k/2\\); the contribution is \\(a_{k}\\binom{2k}{k}\\). Thus  \n\n\\[\n2a_{0}= \\sum_{\\substack{0\\le k\\le m\\\\ k\\ \\text{even}}} a_{k}\\binom{2k}{k}. \\tag{E0}\n\\]\n\n*For \\(r\\ge 1\\):*  \nThe left\u2011hand side contributes only from the summand \\(x^{2m+2k}\\) with \\(k=r\\), giving coefficient \\(a_{r}\\) (the part \\(x^{2m-2k}\\) cannot produce an exponent larger than \\(2m\\)).  \nOn the right we require \\(2m+2k-4j = 2m+2r\\), i.e. \\(2k-4j=2r\\) or \\(k-2j=r\\). Hence \\(j=(k-r)/2\\) must be an integer between \\(0\\) and \\(k\\); this is possible only if \\(k\\ge r\\) and \\(k\\equiv r\\pmod 2\\). For each such \\(k\\) the contribution is \\(a_{k}\\binom{2k}{2j}=a_{k}\\binom{2k}{k-r}\\). Consequently  \n\n\\[\na_{r}= \\sum_{\\substack{k=r\\\\ k\\equiv r\\ (\\mathrm{mod}\\,2)}}^{m} a_{k}\\binom{2k}{k-r},\\qquad 1\\le r\\le m. \\tag{Er}\n\\]\n\n**5.  Solving the linear system.**  \nRecall that \\(a_{m}=1\\).\n\n*Observation for large \\(m\\).*  \nTake \\(r=m-2\\).\n\n- If \\(m=1\\), then \\(r=-1\\) \u2013 this case is handled separately.  \n- If \\(m=2\\), then \\(r=0\\) and the equation is covered by (E0), not by (Er).  \n- **If \\(m\\ge 3\\)**, then \\(r\\ge1\\) and we may apply (Er).  \n  Because \\(m\\) and \\(r=m-2\\) have the same parity, the indices \\(k\\) satisfying \\(k\\ge r\\) and \\(k\\equiv r\\pmod2\\) are exactly \\(k=r\\) and \\(k=m\\) (since \\(r+2=m\\)). Substituting into (Er) gives  \n\n  \\[\n  a_{m-2}=a_{m-2}\\binom{2(m-2)}{0}+a_{m}\\binom{2m}{2}=a_{m-2}+\\binom{2m}{2}.\n  \\]\n\n  With \\(a_{m}=1\\) and \\(\\binom{2m}{2}=m(2m-1)>0\\), this forces \\(0=\\binom{2m}{2}\\), a contradiction. Hence **no solution exists for \\(m\\ge3\\)**.\n\nThus only the cases \\(m=0,1,2\\) need to be examined.\n\n*Case \\(m=0\\).* Then \\(Q(y)=a_{0}\\) with \\(a_{0}=1\\) (monicity). Equation (E0) becomes \\(2\\cdot1=1\\), impossible. So \\(m=0\\) yields no solution.\n\n*Case \\(m=1\\).* Here \\(a_{1}=1\\). Equation (E0) reads \\(2a_{0}=a_{0}\\); thus \\(a_{0}=0\\). Equation (Er) for \\(r=1\\) is \\(a_{1}=a_{1}\\binom{2}{0}=a_{1}\\), automatically true. Therefore  \n\n\\[\nP(x)=a_{1}x^{2}+a_{0}=x^{2}.\n\\]\n\n*Case \\(m=2\\).* Here \\(a_{2}=1\\).  \n(E0) gives \\(2a_{0}=a_{0}+a_{2}\\binom{4}{2}=a_{0}+6\\), so \\(a_{0}=6\\).  \n(Er) for \\(r=1\\) involves only \\(k=1\\) (because \\(k=2\\) is even, parity mismatched): \\(a_{1}=a_{1}\\binom{2}{0}=a_{1}\\); thus \\(a_{1}\\) is arbitrary.  \n(Er) for \\(r=2\\) is \\(a_{2}=a_{2}\\), an identity. Consequently  \n\n\\[\nP(x)=x^{4}+a_{1}x^{2}+6,\\qquad a_{1}\\in\\mathbb R.\n\\]\n\n**6.  Verification (sufficiency).**  \nA quick check confirms that both families indeed satisfy the original equation:\n\n- For \\(P(x)=x^{2}\\):  \n  \\(P(x)+P(1/x)=x^{2}+x^{-2}\\) and  \n  \\(\\frac{P(x+1/x)+P(x-1/x)}{2}= \\frac{(x+1/x)^{2}+(x-1/x)^{2}}{2}=x^{2}+x^{-2}\\).\n\n- For \\(P(x)=x^{4}+c\\,x^{2}+6\\): expanding yields  \n\n  \\[\n  \\begin{aligned}\n  P(x)+P(1/x)&=x^{4}+x^{-4}+c(x^{2}+x^{-2})+12,\\\\[2mm]\n  \\frac{P(x+1/x)+P(x-1/x)}{2}&=x^{4}+x^{-4}+c(x^{2}+x^{-2})+12.\n  \\end{aligned}\n  \\]\n\nThus the polynomials found are indeed solutions.\n\n**7.  Conclusion.**  \nAll monic polynomials with real coefficients satisfying the given functional equation are exactly  \n\n\\[\n\\boxed{\\,P(x)=x^{2}\\quad\\text{or}\\quad P(x)=x^{4}+c\\,x^{2}+6\\ \\text{with}\\ c\\in\\mathbb{R}\\, }.\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "If there exists an integer $k>0$ such that $c_k = 0$, $P(x)=\\sum_{i=0}^k c_i x^i$ has less than $k$ roots. So it suffices to see the cases where $c_k \\ne 0$ for all integers $k>0$. Let's prove the following lemma:\n If a polynomial $\\sum_{i=0}^n a_i x^i$ has $n$ different real roots, $(\\frac{a_{1}}{a_0})^2 - 2 \\frac{a_{2}}{a_0} \\geq n\\sqrt[n]{\\frac{a_n ^2}{a_0^2}}$\n\n (Proof) The left hand side is the sum of squares of inverses of all roots. The right hand side is $n$ times the $n$th root of the product of square of inverses of roots. By AM-GM, we can see that the inequality holds.\n\n Going back to the main proof, let's assume that all $P(x)=\\sum_{i=0}^k c_i x^i$ has exactly $k$ distinct real roots.\n By the lemma, $\\frac{c_{1}^2 - 2c_0 c_{2}}{\\sqrt[n]{c_0^{2n-2}}} \\geq n\\sqrt[n]{c_n^2}$, which shows that $1\\leq c_n^2 \\leq (\\frac{\\frac{c_{1}^2 - 2c_0 c_{2}}{\\sqrt[n]{c_0^{2n-2}}}}{n})^n$. We can easily see that the righthandside tends to $0$ as $n$ goes to infinity. It's a contradiction.", "grading guidelines": "(Partial)\n 1. Derived a useful inequality of between $c_n$ based on Vieta's formula (along with the proof by contradiction).\n(Almost)\n 1. Solution is almost complete, but made minor mistakes which are not negligible.", "level": "IMO-medium", "source": "(Modified) ELMO 2023 Shortlist A3", "question": "Consider any infinite sequence of integers $c_0, c_1, c_2, \\ldots $ such that $c_0 \\neq 0$. Prove that for some integer $k \\geq 0$, the polynomial $P(x) = \\sum_{i = 0}^k c_i x^i$ has fewer than $k$ distinct real roots.", "problem_idx": "PB-Basic-006", "type": "Algebra", "model_prediction": {"proof": "**Solution.**  \n\nLet \\(c_0,c_1,c_2,\\ldots\\) be an infinite sequence of integers with \\(c_0\\neq 0\\).  \nFor each non\u2011negative integer \\(k\\) define  \n\n\\[\nP_k(x)=\\sum_{i=0}^{k}c_i x^{i}.\n\\]\n\nWe must prove that there exists some \\(k\\ge 0\\) such that \\(P_k\\) has **fewer than \\(k\\) distinct real roots**.\n\nWe argue by contradiction. Assume the contrary, namely  \n\n\\[\n\\text{for every }k\\ge 0,\\; P_k \\text{ has at least } k \\text{ distinct real roots}. \\tag{A}\n\\]\n\n---\n### 1.  Consequences of the assumption  \n\nTake any \\(m\\ge 1\\). If \\(c_m=0\\) then the degree of \\(P_m\\) is at most \\(m-1\\).  \nA non\u2011zero polynomial of degree \\(\\le m-1\\) can have at most \\(m-1\\) distinct real roots, which contradicts (A) because \\(P_m\\) is required to have at least \\(m\\) distinct real roots. Hence  \n\n\\[\nc_m\\neq0\\qquad\\text{for all }m\\ge 1.\n\\]\n\nTogether with the hypothesis \\(c_0\\neq0\\) we obtain  \n\n\\[\nc_k\\neq0\\quad\\text{for every }k\\ge 0. \\tag{1}\n\\]\n\nConsequently \\(\\deg P_k = k\\). Condition (A) says that \\(P_k\\) has at least \\(k\\) distinct real roots, but a degree\u2011\\(k\\) polynomial cannot have more than \\(k\\) distinct roots. Therefore  \n\n\\[\nP_k \\text{ has exactly } k \\text{ distinct real roots}. \\tag{2}\n\\]\n\nMoreover \\(P_k(0)=c_0\\neq0\\), so none of those roots equals \\(0\\).\n\n---\n### 2.  Reciprocal polynomials  \n\nFor each \\(k\\) define  \n\n\\[\nQ_k(y)=y^{k}P_k\\!\\left(\\frac1y\\right)\n      =c_0y^{k}+c_1y^{k-1}+c_2y^{k-2}+\\dots +c_k .\n\\]\n\nThe roots of \\(P_k\\) are non\u2011zero (by the remark above); if \\(\\alpha\\) is such a root then \\(\\alpha^{-1}\\) is a root of \\(Q_k\\). Conversely, if \\(\\beta\\) is a root of \\(Q_k\\) then \\(\\beta\\neq0\\) (because \\(Q_k(0)=c_k\\neq0\\)) and \\(P_k(1/\\beta)=0\\). Thus the map \\(\\alpha\\mapsto\\alpha^{-1}\\) gives a bijection between the roots of \\(P_k\\) and those of \\(Q_k\\). Hence \\(Q_k\\) also possesses \\(k\\) distinct non\u2011zero real roots; we denote them by \\(r_1,r_2,\\dots ,r_k\\) (the dependence on \\(k\\) is suppressed in the notation).\n\n---\n### 3.  Reduction to a monic polynomial  \n\nSince \\(c_0\\neq0\\) we may divide by the leading coefficient and obtain the monic polynomial  \n\n\\[\nR_k(y)=\\frac{Q_k(y)}{c_0}=y^{k}+a_1y^{k-1}+a_2y^{k-2}+\\dots +a_k,\n\\qquad\\text{where }a_i=\\frac{c_i}{c_0}.\n\\]\n\nClearly \\(R_k\\) has exactly the same roots \\(r_1,\\dots ,r_k\\).\n\n---\n### 4.  Vieta\u2019s formulas  \n\nWriting \\(R_k(y)=\\prod_{i=1}^{k}(y-r_i)\\) and comparing coefficients yields  \n\n\\[\n\\begin{aligned}\n\\sum_{i=1}^{k} r_i &= -a_1 = -\\frac{c_1}{c_0}, \\tag{3}\\\\[2mm]\n\\sum_{1\\le i<j\\le k} r_i r_j &= a_2 = \\frac{c_2}{c_0}, \\tag{4}\\\\[2mm]\n\\prod_{i=1}^{k} r_i &= (-1)^{k}a_k = (-1)^{k}\\frac{c_k}{c_0}. \\tag{5}\n\\end{aligned}\n\\]\n\n---\n### 5.  A constant sum of squares  \n\nFrom (3) and (4) we compute  \n\n\\[\n\\sum_{i=1}^{k} r_i^{2}\n   =\\Bigl(\\sum_{i=1}^{k} r_i\\Bigr)^{\\!2}-2\\sum_{1\\le i<j\\le k} r_i r_j\n   =\\frac{c_1^{2}}{c_0^{2}}-2\\frac{c_2}{c_0}\n   =\\frac{c_1^{2}-2c_0c_2}{c_0^{2}}. \\tag{6}\n\\]\n\nThe right\u2011hand side involves only the first three coefficients, so for **every** \\(k\\ge 2\\) the sum of the squares of the roots is the same constant. Denote  \n\n\\[\nS:=\\frac{c_1^{2}-2c_0c_2}{c_0^{2}}.\n\\]\n\nBecause \\(\\sum r_i^{2}\\) is a sum of squares, we have \\(S\\ge 0\\). Moreover, if \\(S=0\\) then every \\(r_i=0\\). In that case the product relation (5) would give \\(c_k=0\\), contradicting (1). Consequently  \n\n\\[\n\\boxed{S>0}. \\tag{7}\n\\]\n\n---\n### 6.  Bounding the product of the roots  \n\nFrom (5) we obtain the absolute product  \n\n\\[\n\\prod_{i=1}^{k}|r_i|=\\frac{|c_k|}{|c_0|}\\ge\\frac1{|c_0|}, \\tag{8}\n\\]\n\nwhere we used that \\(c_k\\) is a non\u2011zero integer, hence \\(|c_k|\\ge1\\).\n\nNow apply the **arithmetic\u2013geometric mean inequality** to the non\u2011negative numbers \\(r_1^{2},r_2^{2},\\dots ,r_k^{2}\\):\n\n\\[\n\\bigl(r_1^{2}r_2^{2}\\cdots r_k^{2}\\bigr)^{1/k}\n   \\le\\frac{r_1^{2}+r_2^{2}+\\dots +r_k^{2}}{k}\n   =\\frac{S}{k}. \\tag{9}\n\\]\n\nRaising both sides of (9) to the power \\(k/2\\) (the function \\(t\\mapsto t^{k/2}\\) is increasing for \\(t>0\\)) yields  \n\n\\[\n\\prod_{i=1}^{k}|r_i|\n   =\\bigl(r_1^{2}r_2^{2}\\cdots r_k^{2}\\bigr)^{1/2}\n   \\le\\Bigl(\\frac{S}{k}\\Bigr)^{k/2}. \\tag{10}\n\\]\n\nCombining (8) and (10) we obtain, for every integer \\(k\\ge 2\\),  \n\n\\[\n\\boxed{\\;\\frac1{|c_0|}\\;\\le\\;\\prod_{i=1}^{k}|r_i|\\;\\le\\;\\Bigl(\\frac{S}{k}\\Bigr)^{k/2}\\;}. \\tag{11}\n\\]\n\n---\n### 7.  Obtaining a contradiction  \n\nSince \\(S>0\\) is fixed, \\(\\bigl(\\frac{S}{k}\\bigr)^{k/2}\\to0\\) as \\(k\\to\\infty\\).  \n(Indeed, choose \\(k>2S\\); then \\(\\frac{S}{k}<\\frac12\\) and \\(\\bigl(\\frac{S}{k}\\bigr)^{k/2}<\\bigl(\\frac12\\bigr)^{k/2}\\to0\\).)  \nTherefore there exists an integer \\(K\\ge 2\\) such that  \n\n\\[\n\\Bigl(\\frac{S}{K}\\Bigr)^{K/2}<\\frac1{|c_0|}. \\tag{12}\n\\]\n\nRecall that our initial contradictory hypothesis (A) is assumed to hold **for every** \\(k\\); consequently all the deductions made above are valid for this particular \\(K\\). Substituting \\(k=K\\) into (11) gives  \n\n\\[\n\\frac1{|c_0|}\\;\\le\\;\\prod_{i=1}^{K}|r_i|\\;\\le\\;\\Bigl(\\frac{S}{K}\\Bigr)^{K/2}\\;<\\;\\frac1{|c_0|},\n\\]\n\nwhich is impossible because the left\u2011most term cannot be simultaneously \\(\\ge\\) and \\(<\\) the same number.\n\nThus assumption (A) leads to a contradiction and cannot be true.\n\n---\n### 8.  Conclusion  \n\nThe negation of (A) must therefore hold: there exists some integer \\(k\\ge 0\\) for which \\(P_k\\) does **not** have at least \\(k\\) distinct real roots; i.e. \\(P_k\\) has **fewer than \\(k\\) distinct real roots**. This is exactly the statement we were asked to prove. \u220e", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "$n=2$ with $\\left(a_{0}, a_{1}, a_{2}\\right)=(-1,1,3)$.\n\n We provide a solution when we relax the condition $a_n=3$. When we add back the condition, the only solution is $n=2$ with $\\left(a_{0}, a_{1}, a_{2}\\right)=(-1,1,3)$.\n\n When relaxing the condition $a_n=3$, the short answers are $n=1$ with $\\left(a_{0}, a_{1}\\right)=(2,-2) ; n=2$ with $\\left(a_{0}, a_{1}, a_{2}\\right)=(-1,1,3)$; or $n$ even with $a_{0}=\\cdots=a_{n}=-1$.\n\n It is clear that $a_{0} \\neq 0$ as otherwise $a_{n}=0$. For any $k=1, \\ldots, n+1$, let $I_{k}$ be the convex hull of $0, a_{0}, \\ldots, a_{k-1}$. We will define $a_{-1}=0$ for convenience.\n\n We first show that $a_{k}$ is not in the interior of $I_{k}$. Otherwise, let $i, j \\in\\{-1,0, \\ldots, k-$ $1\\}$ be such that $a_{i}, a_{j}$ are the endpoints of $I_{k}$. Then as $a_{i}-a_{j} \\mid f\\left(a_{i}\\right)-f\\left(a_{j}\\right)=$ $a_{i+1}-a_{j+1}$, we know that $a_{i+1}$ and $a_{j+1}$ are also the endpoints of $I_{k}$, and by continuing this argument we eventually get that $a_{k}$ is an endpoint of $I_{k}$, which is a contradiction. A consequence is that the endpoints of $I_{k}$ are $a_{k-2}$ and $a_{k-1}$ unless $a_{k-2}=a_{k-1}$. Now if $a_{i}=0$ for some $i>0$, then it is clear that the nonzero terms of $a_{0}, \\ldots, a_{n}$ all have the same sign. Then $f\\left(a_{i-1}\\right)=0$ gives a contradiction if we take $i$ to be the smallest index with $a_{i}=0$.\n\n We first assume that $a_{n} \\neq a_{0}$. If $\\left|a_{i}\\right|<2$ for any $i<n$, then we have several possibilities: either $n \\leqslant 2$; or $a_{0}, \\ldots, a_{n}=-1,1, \\ldots,-1,1$, or $a_{0}, \\ldots, a_{n}=1,-1, \\ldots, 1,-1$, or $a_{0}, \\ldots, a_{n}=-1,1,1, \\ldots, 1$, or $a_{0}, \\ldots, a_{n}=1,-1, \\ldots,-1$, for $n>2$. It is easy to verify that the last four cases cannot occur by evaluating $f(1)$. Therefore we have $n=2, a_{0}=-a_{1} \\in\\{1,-1\\}$, or $n=1, a_{0}= \\pm 1$. In the first case, we have $a_{2}-a_{1}=f\\left(a_{1}\\right)-f\\left(a_{0}\\right)=2 a_{1}^{2}=2$ and so $a_{2}=a_{1}+2$. Therefore $a_{1}=f\\left(a_{0}\\right)=$ $\\left(a_{0}+a_{1}+2\\right)+a_{0} a_{1}=2-1=1$, and we get the solution $a_{0}, a_{1}, a_{2}=-1,1,3$. In the second case, we have $a_{1}=f\\left(a_{0}\\right)= \\pm a_{1} \\pm 1$, and we get no solution by parity.\n\n Now if $a_{n} \\neq a_{0}$ and $a_{n}$ has the largest absolute value, pick $i<n$ such that $\\left|a_{i}\\right| \\geqslant 2$. Then\n\n \\[\n \\left|f\\left(a_{i}\\right)\\right| \\geqslant\\left|a_{n}\\right|\\left(\\left|a_{i}\\right|^{n}-\\left|a_{i}\\right|^{n-1}-\\cdots-1\\right) \\geqslant\\left|a_{n}\\right|,\n \\]\n\n and $\\left|f\\left(a_{i}\\right)\\right|=\\left|a_{i+1}\\right|\\left|a_{n}\\right|$. Therefore all equalities should hold, and we get $a_{0}=\\cdots=$ $a_{n-1}=-a_{n}$ and $\\left|a_{i}\\right|=2$. Note that if $n \\geqslant 2$, then $a_{0}=a_{1}$, which shows that\n\n $a_{0}=\\cdots=a_{n}$, which is a contradiction. Therefore $n=1$ and we get $\\left(a_{0}, a_{1}\\right)=(2,-2)$ or $(-2,2)$. The latter is not a solution, so we get $a_{0}=2$ and $a_{1}=-2$.\n\n So now in the case that $a_{n} \\neq a_{0}$, we may assume that $a_{n}$ does not have the largest absolute value. Let $a_{k}$ be the least index such that $a_{k}=a_{k+1}=\\cdots=a_{n}$. Then we must have $\\left|a_{k-1}\\right|>\\left|a_{k}\\right|$ as $a_{k-1}$ and $a_{k}$ are the endpoints of $I_{k-1}$. We know that $a_{0} \\mid a_{k-1}$ and $a_{0} \\mid a_{k}$, and so $\\left|a_{k-1}\\right| \\geqslant\\left|a_{k}\\right|+\\left|a_{0}\\right|$. As $a_{k-1} \\mid f\\left(a_{k-1}\\right)-f(0)=a_{k}-a_{0}$, we have $\\left|a_{k-1}\\right| \\leqslant\\left|a_{k}-a_{0}\\right|$ since $a_{k} \\neq a_{0}$. This shows that $\\left|a_{k}-a_{0}\\right|=\\left|a_{k}\\right|+\\left|a_{0}\\right|=\\left|a_{k-1}\\right|$. As a consequence, we have $\\left|a_{i}\\right| \\leqslant\\left|a_{k}\\right|+\\left|a_{0}\\right|$ for any $i$. Now we have\n\n \\[\n \\left|a_{k}\\right|=\\left|f\\left(a_{k-1}\\right)\\right| \\geqslant\\left|a_{k}\\right|\\left(\\left|a_{k-1}\\right|^{n}-\\left|a_{k-1}\\right|^{n-1}-\\cdots-1\\right)-\\left|a_{0}\\right|\\left(\\left|a_{k-1}\\right|^{n-1}+\\cdots+1\\right) .\n \\]\n\n Hence\n\n \\[\n \\frac{\\left|a_{k}\\right|}{\\left|a_{0}\\right|} \\leqslant \\frac{\\left|a_{k-1}\\right|^{n-1}+\\cdots+1}{\\left|a_{k-1}\\right|^{n}-\\left|a_{k-1}\\right|^{n-1}-\\cdots-1} .\n \\]\n\n Note that $\\left|a_{k}\\right| /\\left|a_{0}\\right|$ is a positive integer. If it is greater than 1 , then as $\\left|a_{k-1}\\right|=$ $\\left|a_{k}\\right|+\\left|a_{0}\\right| \\geqslant 3$, we have\n\n \\[\n \\frac{\\left|a_{k-1}\\right|^{n-1}+\\cdots+1}{\\left|a_{k-1}\\right|^{n}-\\left|a_{k-1}\\right|^{n-1}-\\cdots-1} \\leqslant \\frac{3^{n-1}+\\cdots+1}{3^{n}-3^{n-1}-\\cdots-1}<1\n \\]\n\n which is a contradiction. Therefore $\\left|a_{k}\\right|=\\left|a_{0}\\right|$, and so $a_{k}=-a_{0}$. This also shows that $a_{k-1}=2 a_{0}$, and by the inequality we see that $\\left|a_{0}\\right|=1$. With these constraints, we know that $a_{0}, \\ldots, a_{n} \\in\\left\\{a_{0},-a_{0}, 2 a_{0}\\right\\}$. By enumerating, we only have the possibilities $a_{0}, \\ldots, a_{n}= \\pm 1, \\pm 2, \\mp 1, \\pm 2, \\mp 1, \\ldots, \\pm 2, \\mp 1$, or $a_{0}, \\ldots, a_{n}= \\pm 1, \\mp 1, \\pm 2, \\mp 1, \\ldots, \\pm 2, \\mp 1$, or $a_{0}, \\ldots, a_{n}= \\pm 1, \\pm 2, \\mp 1, \\ldots, \\mp 1$. For the first case, we have $n=2 t$ adn $2 a_{0}=a_{1}=$ $f\\left(a_{0}\\right)=-(t-1) a_{0}+2 t$, showing that $t=1, a_{0}=1$, and by plugging in $a_{1}$ we get a contradiction. For the second case, we have $n=2 t+1$ and $-a_{0}=a_{1}=f\\left(a_{0}\\right)=$ $(2 t+1) a_{0}-(t+1)$, which has no solutions. For the third case, if $a_{0}=1$ then we get $n=2$ and $a_{0}, a_{1}, a_{2}=1,2,-1$ by the equation $a_{1}=f\\left(a_{0}\\right)$, which is not a solution. Thus $a_{0}=-1$, and by plugging in $a_{0}$ we also get a contradiction.\n\n The remaining case is $a_{n}=a_{0}$. If $a_{n}=a_{n-1}$, then we must have $a_{0}=\\cdots=a_{n}$. By plugging in $a_{0}$ we have $a_{0}^{n+1}+\\cdots+a_{0}^{2}=0$, and so $a_{0}=-1$ and $n$ is even. Now assume that $a_{n} \\neq a_{n-1}$. Then $a_{n}, a_{n-1}$ are the endpoints of $I_{n+1}$. Note that if $a_{n-2}=a_{n-1}$\n\n then $a_{n}=a_{n-1}$, which is a contradiction. Therefore $a_{n-2}, a_{n-1}$ are also endpoints of $I_{n+1}$. By induction we may show that $a_{k}, a_{k-1}$ are the endpoints of $I_{k+1}$. As $a_{0} \\neq 0$, we must have $a_{n}=a_{n-2}=\\cdots=a_{0}$, and so $n$ is even. This shows that $a_{n-1}=\\cdots=a_{1}$. Now we have\n\n \\[\n a_{0}^{n+1}+a_{0}^{n-1} a_{1}+\\cdots+a_{0}^{3}+a_{0} a_{1}+a_{0}=a_{1}\n \\]\n\n and\n\n \\[\n a_{0} a_{1}^{n}+a_{1}^{n}+\\cdots+a_{0} a_{1}^{2}+a_{1}^{2}+a_{0}=a_{0}\n \\]\n\n The latter can be rewritten as $\\left(a_{0}+1\\right)\\left(a_{1}^{n-2}+a_{1}^{n-4}+\\cdots+1\\right)=0$. Therefore $a_{0}=-1$ or $a_{1}=-1$. If $a_{0}=-1$, then $-\\left(a_{1}+1\\right) n / 2-1=a_{1}$, or equivalently, $\\left(a_{1}+1\\right)(n+2)=0$. This shows that $a_{1}=-1$, which was already obtained above. If $a_{1}=-1$, then the first equation gives $a_{0}^{n+1}=-1$ and so $a_{0}=-1$ too.\n\n In conclusion, all the solutions are: $n=1$ with $\\left(a_{0}, a_{1}\\right)=(2,-2) ; n=2$ with $\\left(a_{0}, a_{1}, a_{2}\\right)=(-1,1,3)$; or $n$ even with $a_{0}=\\cdots=a_{n}=-1$.", "grading guidelines": "(Incorrect)\n 1. We do not give partial credits for handling the cases when $n$ is small.\n(Partial)\n 1. Observed that $a_k$ should be greater or less than all $a_0, \\ldots, a_{k-1}$.\n 2. Dealt with the case $a_n = a_0$.\n 3. Any other useful observation regarding behavior of the sequnece $(a_i)$ which is useful in the possible solution.\n(Almost)\n 1. Solution is almost complete, but made minor mistakes which are not negligible.", "level": "IMO-medium", "source": "(Modified)  Taiwan TST 2024, 3J Day2 P6", "question": "Determine all positive integers $n$ and integer sequences $a_0, a_1,\\ldots, a_n$ such that $a_n = 3$ and\n \\[f(a_{i-1}) = a_i\\]\n for all $i = 1,2,\\ldots,n$, where $f(x) = a_n x^n + a_{n-1} x^{n-1} + \\cdots + a_1 x + a_0$.", "problem_idx": "PB-Basic-007", "type": "Algebra", "model_prediction": {"proof": "**1. Basic observations and divisibility**  \n\nGiven  \n\\[\nf(x)=3x^n+a_{n-1}x^{\\,n-1}+\\dots +a_1x+a_0\\qquad (a_n=3),\n\\]\nand the conditions \\(f(a_{i-1})=a_i\\;(i=1,\\dots ,n)\\).\n\nFor \\(i=1\\) we have \\(a_1=f(a_0)\\).  \nIf \\(a_0=0\\) then \\(f(0)=0\\); using the recurrence repeatedly yields \\(a_i=0\\) for all \\(i\\), contradicting \\(a_n=3\\). Hence  \n\n\\[\na_0\\neq 0 .\\tag{1}\n\\]\n\nDefine  \n\\[\nh(x)=\\frac{f(x)-a_0}{x}=a_1+a_2x+\\dots +a_nx^{\\,n-1}\\in\\mathbb Z[x].\n\\]\nFrom \\(f(a_{i-1})=a_i\\) we obtain  \n\n\\[\na_i-a_0=a_{i-1}\\,h(a_{i-1})\\qquad(i=1,\\dots ,n). \\tag{2}\n\\]\n\nFor \\(i=1\\) this gives \\(a_1=a_0(1+h(a_0))\\); therefore \\(a_0\\mid a_1\\).  \nAssume \\(a_0\\mid a_{i-1}\\); then (2) shows \\(a_i=a_0+a_{i-1}h(a_{i-1})\\) is also divisible by \\(a_0\\). By induction  \n\n\\[\na_0\\mid a_i\\quad\\text{for every }i .\n\\]\n\nIn particular \\(a_0\\mid a_n=3\\), so  \n\n\\[\na_0\\in\\{\\pm1,\\pm3\\}. \\tag{3}\n\\]\n\n---\n\n**2. A useful estimate**  \n\nLet \\(B\\) be a positive integer such that \\(|a_i|\\le B\\) for all \\(i=0,\\dots ,n-1\\).  \nFor an integer \\(x\\) with \\(|x|=t\\ge 2\\) we have  \n\n\\[\n\\Bigl|\\sum_{i=0}^{n-1} a_i x^i\\Bigr|\n\\le\\sum_{i=0}^{n-1}|a_i|\\,t^i\\le B\\sum_{i=0}^{n-1}t^i\n=B\\frac{t^{\\,n}-1}{t-1}. \\tag{4}\n\\]\n\nIf moreover  \n\n\\[\n3t^{\\,n}>B\\frac{t^{\\,n}-1}{t-1}, \\tag{5}\n\\]\n\nthen certainly \\(3t^{\\,n}>\\bigl|\\sum a_i x^i\\bigr|\\) and the reverse triangle inequality yields  \n\n\\[\n|f(x)|=|3x^n+\\sum a_i x^i|\n\\ge 3t^{\\,n}-\\Bigl|\\sum a_i x^i\\Bigr|\n\\ge 3t^{\\,n}-B\\frac{t^{\\,n}-1}{t-1}. \\tag{6}\n\\]\n\nIn all applications below condition (5) will be checked explicitly.\n\n---\n\n**3. Bounding the absolute values**  \n\nDefine  \n\n\\[\nM=\\max_{0\\le i\\le n}|a_i|.\n\\]\n\nBecause \\(a_n=3\\) we have \\(M\\ge 3\\). **Assume from now on \\(n\\ge2\\)** (the case \\(n=1\\) will be treated separately).\n\n---\n**3.1.  \\(M\\) cannot exceed \\(3\\).**  \n\nSuppose \\(M\\ge4\\). Choose an index \\(i_0\\) with \\(|a_{i_0}|=M\\). Since \\(a_n=3<M\\), we have \\(i_0\\le n-1\\).  \nApply estimate (6) with \\(B=M,\\;t=M\\). Condition (5) is  \n\n\\[\n3M^{\\,n}>M\\frac{M^{\\,n}-1}{M-1}\\;\\Longleftrightarrow\\; M^{\\,n}(2M-3)+M>0,\n\\]\n\nwhich holds for every \\(M\\ge2\\). Hence  \n\n\\[\n|a_{i_0+1}|=|f(a_{i_0})|\\ge 3M^{\\,n}-M\\frac{M^{\\,n}-1}{M-1}.\n\\]\n\nWe show the right\u2011hand side is larger than \\(M\\):\n\n\\[\n\\begin{aligned}\n3M^{\\,n}-M\\frac{M^{\\,n}-1}{M-1}-M\n&=\\frac{M^{\\,n}(2M-3)-M^2+2M}{M-1} \\\\\n&\\ge\\frac{M^2(2M-3)-M^2+2M}{M-1}\\qquad(\\text{since }M^{\\,n}\\ge M^2\\text{ for }n\\ge2)\\\\[2mm]\n&=\\frac{2M(M-1)^2}{M-1}=2M(M-1)>0 .\n\\end{aligned}\n\\]\n\nThus \\(|a_{i_0+1}|>M\\), contradicting the definition of \\(M\\). Consequently \\(M\\le3\\) and together with \\(M\\ge3\\) we obtain  \n\n\\[\n\\boxed{M=3}. \\tag{7}\n\\]\n\n---\n**3.2.  No index before the last can be \\(\\pm3\\).**  \n\nIf for some \\(i<n\\) we had \\(|a_i|=3\\), use (6) with \\(B=3,\\;t=3\\).  \nBecause \\(3\\cdot3^n>3\\frac{3^n-1}{2}\\) for every \\(n\\ge2\\),\n\n\\[\n|a_{i+1}|=|f(a_i)|\\ge 3\\cdot3^n-\\frac{3(3^n-1)}{2}\n=\\frac{3^{n+1}+3}{2}>3,\n\\]\n\ncontradicting (7). Hence  \n\n\\[\n|a_i|\\le2\\qquad\\text{for all }i=0,1,\\dots ,n-1. \\tag{8}\n\\]\n\n---\n**3.3.  For \\(n\\ge3\\) the bound can be sharpened to \\(1\\).**  \n\nNow assume \\(n\\ge3\\). If some \\(i<n\\) satisfied \\(|a_i|=2\\), apply (6) with \\(B=2,\\;t=2\\) (note \\(3\\cdot2^n>2(2^n-1)\\) for all \\(n\\)). Then  \n\n\\[\n|a_{i+1}|=|f(a_i)|\\ge 3\\cdot2^n-2(2^n-1)=2^n+2 .\n\\]\n\nSince \\(n\\ge3\\), \\(2^n+2\\ge10>3\\), again contradicting (7). Therefore  \n\n\\[\n\\boxed{|a_i|\\le1\\quad\\text{for every }i=0,1,\\dots ,n-1\\qquad(n\\ge3).} \\tag{9}\n\\]\n\n---\n**4.  The constant term for \\(n\\ge3\\)**  \n\nFrom (3) we have \\(a_0\\in\\{\\pm1,\\pm3\\}\\); (9) forces \\(|a_0|\\le1\\) and (1) excludes \\(a_0=0\\). Hence  \n\n\\[\na_0=1\\;\\text{ or }\\;a_0=-1. \\tag{10}\n\\]\n\nIn the whole discussion for \\(n\\ge3\\) we shall use that, by (9),  \n\n\\[\na_i\\in\\{-1,0,1\\}\\quad(1\\le i\\le n-1),\\qquad a_n=3. \\tag{11}\n\\]\n\n---\n\n**5.  Case \\(a_0=1\\)**  \n\nBecause \\(a_0=1\\) we have \\(f(1)=a_1\\). Computing \\(f(1)\\) gives  \n\n\\[\na_1=3\\cdot1^{\\,n}+\\sum_{i=0}^{n-1}a_i=3+1+\\sum_{i=1}^{n-1}a_i\n=4+\\sum_{i=1}^{n-1}a_i. \\tag{12}\n\\]\n\nWriting \\(\\displaystyle\\sum_{i=1}^{n-1}a_i=a_1+\\sum_{i=2}^{n-1}a_i\\) and substituting into (12) yields  \n\n\\[\na_1=4+a_1+\\sum_{i=2}^{n-1}a_i\\quad\\Longrightarrow\\quad \n\\sum_{i=2}^{n-1}a_i=-4. \\tag{13}\n\\]\n\n---\n*5.1.  The value of \\(a_1\\) cannot be \\(0\\) or \\(1\\).*  \n\n- If \\(a_1=0\\) then \\(a_2=f(0)=a_0=1\\); then \\(a_3=f(1)=a_1=0\\). Repeating, we obtain \\(a_{2k}=1,\\;a_{2k+1}=0\\) for all \\(k\\ge1\\). Hence \\(a_n\\) would be either \\(1\\) or \\(0\\), never \\(3\\) \u2013 contradiction.  \n\n- If \\(a_1=1\\) then \\(a_2=f(1)=a_1=1\\); inductively \\(a_i=1\\) for all \\(i\\ge1\\), so \\(a_n=1\\) \u2013 contradiction.  \n\nThus we must have  \n\n\\[\na_1=-1. \\tag{14}\n\\]\n\n---\n*5.2.  Consequences of \\(a_1=-1\\).*  \n\nSet \\(\\delta=(-1)^n\\) (so \\(\\delta=1\\) if \\(n\\) even, \\(\\delta=-1\\) if \\(n\\) odd). Using \\(a_0=1\\) and \\(a_1=-1\\),\n\n\\[\n\\begin{aligned}\nf(-1)&=3\\delta+\\sum_{i=0}^{n-1}a_i(-1)^i \\\\\n     &=3\\delta+1+\\sum_{i=1}^{n-1}a_i(-1)^i \\\\\n     &=3\\delta+1+\\Bigl(a_1(-1)+\\sum_{i=2}^{n-1}a_i(-1)^i\\Bigr)\\\\\n     &=3\\delta+1+\\Bigl(1+\\sum_{i=2}^{n-1}a_i(-1)^i\\Bigr)\\\\\n     &=3\\delta+2+\\sum_{i=2}^{n-1}a_i(-1)^i .\n\\end{aligned}\n\\]\n\nSince \\(a_2=f(a_1)=f(-1)\\),\n\n\\[\na_2=3\\delta+2+\\sum_{i=2}^{n-1}a_i(-1)^i . \\tag{15}\n\\]\n\nSplit the sum over indices \\(2,\\dots ,n-1\\) into even and odd parts:\n\n\\[\nE=\\sum_{\\substack{i\\;{\\rm even}\\\\ i\\ge2}}a_i,\\qquad \nO=\\sum_{\\substack{i\\;{\\rm odd}\\\\ i\\ge3}}a_i .\n\\]\n\nThen  \n\n\\[\n\\sum_{i=2}^{n-1}a_i=E+O=-4\\quad\\text{(by (13))}, \\tag{16}\n\\]\n\\[\n\\sum_{i=2}^{n-1}a_i(-1)^i=E-O . \\tag{17}\n\\]\n\nFrom (16) we have \\(O=-4-E\\). Substituting (17) into (15) gives  \n\n\\[\na_2=3\\delta+2+(E-O)=3\\delta+2+\\bigl(E-(-4-E)\\bigr)=3\\delta+2E+6. \\tag{18}\n\\]\n\nBecause of (9), \\(a_2\\in\\{-1,0,1\\}\\). The right\u2011hand side of (18) is odd ( \\(\\delta\\) odd, \\(2E\\) and \\(6\\) even), therefore \\(a_2=\\pm1\\) (the value \\(0\\) is impossible).\n\n---\n*5.3.  Both possibilities for \\(a_2\\) lead to a contradiction.*  \n\n- **If \\(a_2=1\\):** then \\(a_3=f(a_2)=f(1)=a_1=-1\\) and \\(a_4=f(-1)=a_2=1\\). Hence from index\u202f2 onward the sequence alternates \\(1,-1,1,-1,\\dots\\). Consequently \\(a_n\\) is either \\(1\\) (if \\(n\\) even) or \\(-1\\) (if \\(n\\) odd) \u2013 never \\(3\\).\n\n- **If \\(a_2=-1\\):** then \\(a_3=f(a_2)=f(-1)=a_2=-1\\), and by induction \\(a_i=-1\\) for all \\(i\\ge2\\). In particular \\(a_{n-1}=-1\\) and \\(a_n=f(-1)=a_2=-1\\), contradicting \\(a_n=3\\).\n\nBoth alternatives are impossible; therefore **no solution exists with \\(a_0=1\\) for any \\(n\\ge3\\).**\n\n---\n\n**6.  Case \\(a_0=-1\\)**  \n\nNow \\(a_0=-1\\). Because \\(f(0)=a_0=-1\\), the value \\(0\\) cannot be the pre\u2011image of \\(3\\). Hence \\(a_{n-1}\\neq0\\).\n\nIf \\(a_{n-1}=-1\\) then \\(f(-1)=3\\); but \\(f(-1)=a_1\\) would give \\(a_1=3\\), contradicting \\(|a_1|\\le1\\) (by (9)). Therefore  \n\n\\[\na_{n-1}=1\\quad\\text{and consequently}\\quad f(1)=3. \\tag{19}\n\\]\n\nCompute \\(f(1)\\):\n\n\\[\nf(1)=3\\cdot1^{\\,n}+\\sum_{i=0}^{n-1}a_i=3-1+\\sum_{i=1}^{n-1}a_i\n=2+\\sum_{i=1}^{n-1}a_i .\n\\]\n\nUsing \\(f(1)=3\\) we obtain  \n\n\\[\n\\sum_{i=1}^{n-1}a_i=1. \\tag{20}\n\\]\n\nWrite \\(\\displaystyle\\sum_{i=1}^{n-1}a_i=a_1+\\sum_{i=2}^{n-1}a_i\\), hence  \n\n\\[\n\\sum_{i=2}^{n-1}a_i=1-a_1. \\tag{21}\n\\]\n\nNow evaluate \\(f(-1)=a_1\\) with \\(\\delta=(-1)^n\\):\n\n\\[\n\\begin{aligned}\na_1&=f(-1)=3\\delta+\\sum_{i=0}^{n-1}a_i(-1)^i \\\\\n   &=3\\delta-1+\\sum_{i=1}^{n-1}a_i(-1)^i \\\\\n   &=3\\delta-1+\\Bigl(a_1(-1)+\\sum_{i=2}^{n-1}a_i(-1)^i\\Bigr)\\\\\n   &=3\\delta-1-a_1+\\sum_{i=2}^{n-1}a_i(-1)^i .\n\\end{aligned}\n\\]\n\nThus  \n\n\\[\n2a_1=3\\delta-1+\\sum_{i=2}^{n-1}a_i(-1)^i . \\tag{22}\n\\]\n\nAgain introduce the even\u2011/odd\u2011index sums  \n\n\\[\nE=\\sum_{\\substack{i\\;{\\rm even}\\\\ i\\ge2}}a_i,\\qquad \nO=\\sum_{\\substack{i\\;{\\rm odd}\\\\ i\\ge3}}a_i .\n\\]\n\nThen (21) and (22) become  \n\n\\[\nE+O=1-a_1,\\qquad 2a_1=3\\delta-1+(E-O). \\tag{23}\n\\]\n\nAdding and subtracting these two equations gives  \n\n\\[\n2E=a_1-3\\delta+2\\;\\Longrightarrow\\;E=\\frac{a_1-3\\delta+2}{2}, \\tag{24}\n\\]\n\\[\n2O=-3a_1+3\\delta\\;\\Longrightarrow\\;O=\\frac{3(\\delta-a_1)}{2}. \\tag{25}\n\\]\n\nBecause \\(E\\) and \\(O\\) are integers, the right\u2011hand sides must be integers. Testing \\(a_1\\in\\{-1,0,1\\}\\) with \\(\\delta=\\pm1\\):\n\n- \\(\\delta=1\\) ( \\(n\\) even):  \n  \\(a_1=-1\\) gives \\(E=-1,\\;O=3\\);  \n  \\(a_1=0\\) gives non\u2011integer \\(E\\) \u2013 impossible;  \n  \\(a_1=1\\) gives \\(E=0,\\;O=0\\).\n\n- \\(\\delta=-1\\) ( \\(n\\) odd):  \n  \\(a_1=-1\\) gives \\(E=2,\\;O=0\\);  \n  \\(a_1=0\\) gives non\u2011integer \\(E\\) \u2013 impossible;  \n  \\(a_1=1\\) gives \\(E=3,\\;O=-3\\).\n\nHence \\(a_1\\) cannot be \\(0\\); we must have \\(a_1=-1\\) or \\(a_1=1\\).\n\n---\n*6.1.  \\(a_1=1\\) leads to a contradiction.*  \n\nIf \\(a_1=1\\) then \\(a_2=f(1)=3\\) by (19). But \\(a_2\\) has index \\(2<n\\) (since \\(n\\ge3\\)), and (9) forces \\(|a_2|\\le1\\) \u2013 impossible.\n\n*6.2.  \\(a_1=-1\\) also leads to a contradiction.*  \n\nIf \\(a_1=-1\\) then \\(a_2=f(-1)=a_1=-1\\). Because \\(f(-1)=-1\\), induction yields \\(a_i=-1\\) for all \\(i\\ge1\\). In particular \\(a_{n-1}=-1\\), contradicting (19) which says \\(a_{n-1}=1\\).\n\nBoth possibilities are impossible; therefore **no solution exists with \\(a_0=-1\\) for any \\(n\\ge3\\).**\n\n---\n\n**7.  The remaining small values of \\(n\\)**  \n\nWe have proved that **there is no solution for any \\(n\\ge3\\)**. It remains to examine \\(n=1\\) and \\(n=2\\).\n\n---\n*7.1.  \\(n=1\\).*  \nThen \\(f(x)=3x+a_0\\). The condition \\(f(a_0)=a_1=3\\) gives \\(3a_0+a_0=4a_0=3\\), which has no integer solution.\n\n*7.2.  \\(n=2\\).*  \nNow \\(f(x)=3x^2+a_1x+a_0\\). The requirements are  \n\n\\[\nf(a_0)=a_1,\\qquad f(a_1)=3 .\n\\]\n\nExplicitly  \n\n\\[\n\\begin{cases}\n3a_0^{2}+a_1a_0+a_0=a_1,\\\\[2mm]\n3a_1^{2}+a_1^{2}+a_0=4a_1^{2}+a_0=3 .\n\\end{cases}\n\\]\n\nFrom the second equation \\(a_0=3-4a_1^{2}\\). Substituting into the first and simplifying yields  \n\n\\[\n48a_1^{4}-4a_1^{3}-76a_1^{2}+2a_1+30=0 .\n\\]\n\nBy the Rational Root Theorem any integer root must divide \\(30\\). Testing the divisors \\(\\pm1,\\pm2,\\pm3,\\pm5,\\pm6,\\pm10,\\pm15,\\pm30\\) shows that the only integer solution is \\(a_1=1\\). Then \\(a_0=3-4\\cdot1^{2}=-1\\).\n\nThus \\((a_0,a_1,a_2)=(-1,\\,1,\\,3)\\). One readily verifies  \n\n\\[\nf(x)=3x^2+x-1,\\qquad f(-1)=1,\\; f(1)=3,\n\\]\n\nso all conditions are satisfied. No other integer \\(a_1\\) works; hence this is the unique solution for \\(n=2\\).\n\n---\n\n**8.  Conclusion**  \n\nThe only positive integer \\(n\\) and integer sequence \\((a_0,\\dots ,a_n)\\) fulfilling  \n\n\\[\na_n=3,\\qquad f(a_{i-1})=a_i\\;(i=1,\\dots ,n),\\qquad \nf(x)=a_nx^n+\\dots +a_0\n\\]\n\nare  \n\n\\[\n\\boxed{\\,n=2,\\;\\;(a_0,a_1,a_2)=(-1,\\;1,\\;3)\\,}.\n\\]\n\n\u220e\n\n---", "average_automatic_rating": 1.0, "human_rating": 6}}
{"solution": "Renormalizing, we may suppose $a + b + c = 3$ and show $\\sqrt{a}+\\sqrt{b}+\\sqrt{c} \\geq ab+bc+ca$. Note that $\\sqrt{a}+\\sqrt{b}+\\sqrt{c} \\geq ab+bc+ca$ is equivalent to $2\\sqrt{a}+2\\sqrt{b}+2\\sqrt{c} \\geq 2ab+2bc+2ca \\Leftrightarrow a^2+2\\sqrt{a}+b^2+2\\sqrt{b}+c^2+2\\sqrt{c} \\geq a^2+2ab+b^2+2bc+c^2+2ca = (a+b+c)^2$. The inequality is now equivalent to the inequality $a^2+2\\sqrt{a}+b^2+2\\sqrt{b}+c^2+2\\sqrt{c} \\geq 9$. Observe that from AM-GM, we have $a^2+\\sqrt{a}+\\sqrt{a} \\geq 3a$. Similarly, we have $b^2+\\sqrt{b}+\\sqrt{b} \\geq 3b$ and $c^2+\\sqrt{c}+\\sqrt{c} \\geq 3c$. Adding these together, we have $a^2+2\\sqrt{a}+b^2+2\\sqrt{b}+c^2+2\\sqrt{c} \\geq 3(a+b+c) = 9$. Hence proved.", "grading guidelines": "(Partial)\n 1. Reduced the inequality to a more managable form so that one can complete the proof by applying one of the well-knnown inequalities (e.g., Cauchy-Schwarz, AM-GM, Muirhead, or Schur)\n(Almost)\n 1. Made a minor mistake when applying an inequality, or skipped rigorous justification for such a step.", "level": "pre-IMO", "source": "(Modified) All-Russia MO 2002.", "question": "Let $a,b,c$ be positive reals such that $a+b+c = 1$, prove that $\\sqrt{a}+\\sqrt{b}+\\sqrt{c} \\geq 3\\sqrt{3}(ab+bc+ca)$.", "problem_idx": "PB-Basic-008", "type": "Algebra", "model_prediction": {"proof": "**1.  A convenient substitution**  \n\nLet  \n\n\\[\nx=\\sqrt a,\\qquad y=\\sqrt b,\\qquad z=\\sqrt c\\;(>0).\n\\]\n\nThen  \n\n\\[\na+b+c = x^{2}+y^{2}+z^{2}=1,\n\\]\n\nand the inequality to be proved becomes  \n\n\\[\nx+y+z\\;\\ge\\;3\\sqrt3\\,(x^{2}y^{2}+y^{2}z^{2}+z^{2}x^{2}). \\tag{1}\n\\]\n\n**2.  Symmetric sums**  \n\nSet  \n\n\\[\np=x+y+z,\\qquad q=xy+yz+zx,\\qquad r=xyz\\;(>0).\n\\]\n\nBecause \\(x^{2}+y^{2}+z^{2}=1\\),\n\n\\[\np^{2}=x^{2}+y^{2}+z^{2}+2q=1+2q\\quad\\Longrightarrow\\quad \nq=\\frac{p^{2}-1}{2}. \\tag{2}\n\\]\n\nA well\u2011known identity gives  \n\n\\[\nx^{2}y^{2}+y^{2}z^{2}+z^{2}x^{2}=q^{2}-2pr. \\tag{3}\n\\]\n\nSubstituting (3) into (1) yields  \n\n\\[\np\\ge 3\\sqrt3\\,(q^{2}-2pr)=3\\sqrt3\\,q^{2}-6\\sqrt3\\,pr,\n\\]\n\nor, after rearranging,\n\n\\[\np+6\\sqrt3\\,pr\\ge 3\\sqrt3\\,q^{2}. \\tag{4}\n\\]\n\n**3.  An equivalent one\u2011variable condition**  \n\nInsert \\(q^{2}=\\dfrac{(p^{2}-1)^{2}}{4}\\) from (2) into (4):\n\n\\[\np+6\\sqrt3\\,pr\\;\\ge\\;3\\sqrt3\\,\\frac{(p^{2}-1)^{2}}{4}.\n\\]\n\nSince \\(p>0\\) (all variables are positive), we can divide by \\(6\\sqrt3\\,p\\):\n\n\\[\n\\frac{1}{6\\sqrt3}+r\\;\\ge\\;\\frac{(p^{2}-1)^{2}}{8p}.\n\\]\n\nThus (1) is **equivalent** to  \n\n\\[\nr\\;\\ge\\;f(p),\\qquad \nf(p):=\\frac{(p^{2}-1)^{2}}{8p}-\\frac{1}{6\\sqrt3}. \\tag{5}\n\\]\n\n**4.  Bounds for \\(p\\)**  \n\nFrom \\((x+y+z)^{2}\\ge x^{2}+y^{2}+z^{2}=1\\) we obtain \\(p\\ge1\\).  \nCauchy\u2011Schwarz gives \\((x+y+z)^{2}\\le3(x^{2}+y^{2}+z^{2})=3\\), hence \\(p\\le\\sqrt3\\).  \nConsequently  \n\n\\[\np\\in[1,\\sqrt3]. \\tag{6}\n\\]\n\n**5.  Two cases for \\(p\\)**  \n\nWe will prove \\(r\\ge f(p)\\) for every admissible \\(p\\) by splitting the interval \\([1,\\sqrt3]\\) into two parts.\n\n---\n### Case\u202f1 :  \\(1\\le p\\le\\sqrt2\\)\n\nDefine \\(\\displaystyle\\varphi(p)=\\frac{(p^{2}-1)^{2}}{8p}\\).  \nFor \\(p>1\\),\n\n\\[\n\\varphi'(p)=\\frac{(p^{2}-1)(3p^{2}+1)}{8p^{2}}>0,\n\\]\n\nso \\(\\varphi\\) is **strictly increasing** on \\([1,\\infty)\\).  \nHence for \\(p\\in[1,\\sqrt2]\\),\n\n\\[\n\\varphi(p)\\le\\varphi(\\sqrt2)=\\frac{1}{8\\sqrt2}.\n\\]\n\nNow compare \\(\\varphi(\\sqrt2)\\) with \\(\\dfrac{1}{6\\sqrt3}\\):\n\n\\[\n\\frac{1}{8\\sqrt2}<\\frac{1}{6\\sqrt3}\n\\;\\Longleftrightarrow\\;6\\sqrt3<8\\sqrt2\n\\;\\Longleftrightarrow\\;3\\sqrt3<4\\sqrt2\n\\;\\Longleftrightarrow\\;27<32\\ (\\text{true}).\n\\]\n\nTherefore \\(\\varphi(p)<\\dfrac{1}{6\\sqrt3}\\) for every \\(p\\in[1,\\sqrt2]\\), and\n\n\\[\nf(p)=\\varphi(p)-\\frac{1}{6\\sqrt3}<0.\n\\]\n\nBecause \\(r=xyz>0\\), we automatically have \\(r>0>f(p)\\), i.e. \\(r\\ge f(p)\\).  \nThus (5) holds in this case.\n\n---\n### Case\u202f2 :  \\(\\sqrt2\\le p\\le\\sqrt3\\)\n\n**5.1  A lower bound for \\(r\\) from Schur\u2019s inequality**  \n\nSchur\u2019s inequality of degree\u202f1 (valid for non\u2011negative numbers) states  \n\n\\[\nx^{3}+y^{3}+z^{3}+3xyz\\;\\ge\\;xy(x+y)+yz(y+z)+zx(z+x).\n\\]\n\nIn the symmetric sums \\(p,q,r\\) this is  \n\n\\[\np^{3}+9r\\ge4pq. \\tag{7}\n\\]\n\nUsing (2) to replace \\(q\\),\n\n\\[\n4pq=2p(p^{2}-1),\n\\]\n\nand (7) becomes  \n\n\\[\np^{3}+9r\\ge2p(p^{2}-1)\\quad\\Longrightarrow\\quad \n9r\\ge p^{3}-2p.\n\\]\n\nHence  \n\n\\[\nr\\ge g(p),\\qquad g(p):=\\frac{p^{3}-2p}{9}. \\tag{8}\n\\]\n\n**5.2  Comparing \\(g(p)\\) with \\(f(p)\\)**  \n\nCompute the difference:\n\n\\[\n\\begin{aligned}\ng(p)-f(p)&=\\frac{p^{3}-2p}{9}\n          -\\Bigl(\\frac{(p^{2}-1)^{2}}{8p}-\\frac{1}{6\\sqrt3}\\Bigr)\\\\[2mm]\n        &=\\frac{1}{6\\sqrt3}\n          -\\Bigl(\\frac{p^{3}}{72}-\\frac{p}{36}+\\frac{1}{8p}\\Bigr).\n\\end{aligned}\n\\]\n\nDefine  \n\n\\[\nh(p):=\\frac{p^{3}}{72}-\\frac{p}{36}+\\frac{1}{8p}.\n\\]\n\nThen  \n\n\\[\ng(p)-f(p)=\\frac{1}{6\\sqrt3}-h(p). \\tag{9}\n\\]\n\nThus \\(g(p)\\ge f(p)\\) is equivalent to \\(h(p)\\le\\dfrac{1}{6\\sqrt3}\\).\n\n**5.3  Behaviour of \\(h(p)\\) on \\([\\sqrt2,\\sqrt3]\\)**  \n\n\\[\nh'(p)=\\frac{3p^{2}}{72}-\\frac{1}{36}-\\frac{1}{8p^{2}}\n     =\\frac{3p^{4}-2p^{2}-9}{72p^{2}}.\n\\]\n\nSet \\(N(p)=3p^{4}-2p^{2}-9\\).  With \\(u=p^{2}\\) we have \\(N=3u^{2}-2u-9\\).  \nThe positive root of \\(N=0\\) is \\(u_{0}=\\dfrac{1+2\\sqrt7}{3}\\;( \\approx2.097)\\), hence  \n\n\\[\np_{0}=\\sqrt{u_{0}}\\in(\\sqrt2,\\sqrt3).\n\\]\n\n- For \\(p<p_{0}\\) (i.e. on \\([\\sqrt2,p_{0})\\)) we have \\(N(p)<0\\), so \\(h'(p)<0\\): \\(h\\) is **decreasing**.  \n- For \\(p>p_{0}\\) (i.e. on \\((p_{0},\\sqrt3]\\)) we have \\(N(p)>0\\), so \\(h'(p)>0\\): \\(h\\) is **increasing**.\n\nTherefore on the whole interval \\([\\sqrt2,\\sqrt3]\\) the function \\(h\\) first decreases then increases; its maximum is attained at one of the endpoints.\n\n**5.4  Values at the endpoints**  \n\n\\[\n\\begin{aligned}\nh(\\sqrt2)&=\\frac{(\\sqrt2)^{3}}{72}-\\frac{\\sqrt2}{36}+\\frac{1}{8\\sqrt2}\n          =\\frac{\\sqrt2}{36}-\\frac{\\sqrt2}{36}+\\frac{\\sqrt2}{16}\n          =\\frac{\\sqrt2}{16},\\\\[2mm]\nh(\\sqrt3)&=\\frac{(\\sqrt3)^{3}}{72}-\\frac{\\sqrt3}{36}+\\frac{1}{8\\sqrt3}\n          =\\frac{\\sqrt3}{24}-\\frac{\\sqrt3}{36}+\\frac{\\sqrt3}{24}\n          =\\frac{\\sqrt3}{18}=\\frac{1}{6\\sqrt3}.\n\\end{aligned}\n\\]\n\nWe compare \\(h(\\sqrt2)\\) with \\(\\dfrac{1}{6\\sqrt3}\\):\n\n\\[\n\\frac{\\sqrt2}{16}<\\frac{1}{6\\sqrt3}\n\\;\\Longleftrightarrow\\;6\\sqrt6<16\n\\;\\Longleftrightarrow\\;3\\sqrt6<8\n\\;\\Longleftrightarrow\\;54<64\\ (\\text{true}).\n\\]\n\nHence \\(h(\\sqrt2)<\\dfrac{1}{6\\sqrt3}=h(\\sqrt3)\\).\n\nBecause \\(h\\) is decreasing on \\([\\sqrt2,p_{0}]\\), for \\(p\\) in this part we have  \n\\(h(p)\\le h(\\sqrt2)<\\dfrac{1}{6\\sqrt3}\\).  \nOn \\([p_{0},\\sqrt3]\\) the function increases, so \\(h(p)\\le h(\\sqrt3)=\\dfrac{1}{6\\sqrt3}\\).\n\nConsequently **for every \\(p\\in[\\sqrt2,\\sqrt3]\\)**,  \n\n\\[\nh(p)\\le\\frac{1}{6\\sqrt3}. \\tag{10}\n\\]\n\n**5.5  Completion of Case\u202f2**  \n\nFrom (9) and (10) we obtain \\(g(p)-f(p)\\ge0\\), i.e. \\(g(p)\\ge f(p)\\).  \nTogether with Schur\u2019s bound (8) we get  \n\n\\[\nr\\ge g(p)\\ge f(p).\n\\]\n\nThus (5) holds also for \\(p\\in[\\sqrt2,\\sqrt3]\\).\n\n---\n**6.  Conclusion**  \n\nWe have shown that for every admissible triple \\((x,y,z)\\) (i.e. \\(x,y,z>0,\\;x^{2}+y^{2}+z^{2}=1\\)) the inequality \\(r\\ge f(p)\\) \u2013 and therefore its equivalent form (1) \u2013 is true.  Returning to the original variables \\(a=x^{2},\\;b=y^{2},\\;c=z^{2}\\) gives exactly  \n\n\\[\n\\boxed{\\;\\sqrt a+\\sqrt b+\\sqrt c\\;\\ge\\;3\\sqrt3\\,(ab+bc+ca)\\;},\n\\]\n\nwhich is the desired result.\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "I claim the answer is $136$. Take the construction $17, -1,...,-1,-1,-1,-1,-1,-1,-1,-1$, which clearly works.\n Now I will show that this is the minimum. For any partition of $\\{a_1, a_2, ..., a_{18}\\}$ into six triplets, at least one triplet must satisfy that $a_i + a_j +a_k \\ge 0$.\n Therefore there are $\\frac{18!}{(3!)^6 6!}$ partitions, and a fixed triplet is contatined in $\\frac{15!}{(3!)^5 5!}$ partitions, so there are at least $\\frac{18!}{(3!)^6 6!}/\\frac{15!}{(3!)^5 5!} = 136$ partitions satisfying the condition.", "grading guidelines": "(Partial)\n 1. Guessed the answer $136$, and constructed the equality case.\n(Almost)\n 1. Solution is almost complete, but made minor mistakes which are not negligible.", "level": "IMO-easy", "source": "(Modified) ELMO 2013", "question": "Let $a_1,a_2,...,a_{18}$ be 18 real numbers, not necessarily distinct, with average $m$. Let $A$ denote the number of triples $1 \\le i < j < k \\le 18$ for which $a_i + a_j + a_k \\ge 3m$. What is the minimum possible value of $A$?", "problem_idx": "PB-Basic-009", "type": "Combinatorics", "model_prediction": {"proof": "1. **Reduction to zero\u2011sum variables**  \n   Let  \n\n   \\[\n   b_i = a_i - m\\qquad(i=1,\\dots ,18).\n   \\]\n\n   Then \\(\\displaystyle\\sum_{i=1}^{18} b_i = \\sum a_i - 18m = 0\\) and  \n\n   \\[\n   a_i+a_j+a_k \\ge 3m \\;\\Longleftrightarrow\\; b_i+b_j+b_k \\ge 0 .\n   \\]\n\n   Hence  \n\n   \\[\n   A = \\#\\{\\,1\\le i<j<k\\le 18 \\mid b_i+b_j+b_k\\ge 0\\,\\},\n   \\]\n\n   and we may study the problem for 18 real numbers \\(b_1,\\dots ,b_{18}\\) whose sum is \\(0\\).\n\n2. **An example attaining \\(A = 136\\)**  \n   Take  \n\n   \\[\n   b_1 = 17,\\qquad b_2 = b_3 = \\dots = b_{18} = -1 .\n   \\]\n\n   Their sum is \\(17-17=0\\).  \n   \u2013 Every triple that contains the index \\(1\\) has sum \\(17-1-1 = 15>0\\);  \n     there are \\(\\binom{17}{2}=136\\) such triples.  \n   \u2013 Any triple consisting only of the numbers \\(-1\\) has sum \\(-3<0\\) and is not counted.  \n\n   Therefore \\(A = 136\\) is achievable, so the minimum possible value satisfies \\(\\min A \\le 136\\).\n\n3. **Proving the lower bound \\(A\\ge 136\\)**  \n\n   We now show that for **any** choice of real numbers \\(b_1,\\dots ,b_{18}\\) with \\(\\sum b_i =0\\) we must have \\(A\\ge 136\\).\n\n   ---\n\n   **Step 1 \u2013 A random permutation.**  \n   Consider a uniformly random permutation \\(\\pi\\) of \\(\\{1,2,\\dots ,18\\}\\).  \n   Write the numbers in the order  \n\n   \\[\n   b_{\\pi(1)},b_{\\pi(2)},\\dots ,b_{\\pi(18)}\n   \\]\n\n   and split them into six consecutive blocks of three:\n\n   \\[\n   \\begin{aligned}\n   B_1 &= \\{\\pi(1),\\pi(2),\\pi(3)\\},\\\\\n   B_2 &= \\{\\pi(4),\\pi(5),\\pi(6)\\},\\\\\n   &\\ \\ \\vdots\\\\\n   B_6 &= \\{\\pi(16),\\pi(17),\\pi(18)\\}.\n   \\end{aligned}\n   \\]\n\n   For a given permutation define  \n\n   \\[\n   X = \\bigl|\\{\\,t\\in\\{1,\\dots ,6\\}\\mid \\sum_{i\\in B_t} b_i \\ge 0\\,\\}\\bigr|,\n   \\]\n\n   i.e. the number of blocks whose three\u2011element sum is non\u2011negative.\n\n   **Step 2 \u2013 \\(X\\) is always at least \\(1\\).**  \n   Because each \\(b_i\\) appears in exactly one block, the sum of the six block sums equals the total sum of all numbers:\n\n   \\[\n   \\sum_{t=1}^{6}\\;\\sum_{i\\in B_t} b_i \\;=\\; \\sum_{i=1}^{18} b_i \\;=\\; 0 .\n   \\]\n\n   If all six block sums were strictly negative, their total would be negative \u2013 contradicting the equality to \\(0\\).  \n   Hence at least one block has sum \\(\\ge 0\\); therefore **\\(X\\ge 1\\) for every permutation**.\n\n   **Step 3 \u2013 Computing the expectation of \\(X\\).**  \n   By linearity of expectation  \n\n   \\[\n   \\mathbb{E}[X] = \\sum_{t=1}^{6} \\Pr\\bigl(\\text{sum of block }t \\ge 0\\bigr).\n   \\]\n\n   By symmetry of the positions all six blocks have the same distribution, so  \n\n   \\[\n   \\mathbb{E}[X] = 6\\;\\Pr\\bigl(\\text{sum of block }1 \\ge 0\\bigr).\n   \\]\n\n   For block\u202f1 (the first three positions) the set \\(\\{\\pi(1),\\pi(2),\\pi(3)\\}\\) is uniformly distributed over all \\(\\binom{18}{3}\\) unordered triples of indices.  \n   Indeed, for a fixed unordered triple \\(T\\) there are \\(3!\\) ways to order its elements inside the three positions and \\(15!\\) ways to arrange the remaining 15 numbers; thus  \n\n   \\[\n   \\Pr\\bigl(\\{\\pi(1),\\pi(2),\\pi(3)\\}=T\\bigr)=\\frac{3!\\,15!}{18!}= \\frac{1}{\\binom{18}{3}}.\n   \\]\n\n   Consequently  \n\n   \\[\n   \\Pr\\bigl(\\text{sum of block }1 \\ge 0\\bigr)=\\frac{\\text{number of triples with non\u2011negative sum}}{\\binom{18}{3}}\n                                          =\\frac{A}{816}.\n   \\]\n\n   Substituting,  \n\n   \\[\n   \\mathbb{E}[X] = 6\\cdot\\frac{A}{816}= \\frac{A}{136}.\n   \\]\n\n   **Step 4 \u2013 Using the deterministic bound \\(X\\ge 1\\).**  \n   Since \\(X\\ge 1\\) holds for **every** permutation, its expectation must satisfy \\(\\mathbb{E}[X]\\ge 1\\).  \n   Therefore  \n\n   \\[\n   \\frac{A}{136}\\ge 1\\qquad\\Longrightarrow\\qquad A\\ge 136.\n   \\]\n\n   ---\n\n   This completes the proof that \\(A\\ge 136\\) for any admissible numbers.\n\n4. **Conclusion**  \n   We have shown  \n\n   \\[\n   A\\ge 136\\quad\\text{for all choices of }a_1,\\dots ,a_{18},\n   \\]\n   and we have exhibited a concrete choice with \\(A = 136\\).  \n\n   Hence the minimum possible value of \\(A\\) is  \n\n   \\[\n   \\boxed{136}.\n   \\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Let $X = \\sum_{(a, b) \\in S_{AB}} (b - a)$, $Y=\\sum_{(a, b) \\in S_{BA}} (a -b)$ and $Z=X-Y$. We first analyze the case where all elements of $A$ are smaller than all elements of $B$. In that case, $S_{BA} = 0$, and\n \\[ X = \\sum_{i = 1012}^{2022} \\sum_{j = 1}^{1011} (i - j) = 1011 \\cdot \\left(\\sum_{i = 1012}^{2022} i - \\sum_{j = 1}^{1011} j \\right) = 1011^3, \\]\n and so $Z = 1011^3$.\n\n Now, arrange the numbers $1$ to $2022$ on a line in increasing order from left to right, and consider how the quantity $Z$ changes if we swap the set of two adjacent numbers, where the left number is in $A$ and the right number is in $B$. Let $A_l$ and $B_l$ be the number of numbers from $A$ and $B$ to the left of this adjacent pair, and similarly let $A_r$ and $B_r$ be the number of numbers from $A$ and $B$ to the right of this adjacent pair,\n\n First think of how $X$ changes. By moving the number from $A$ one unit to the right, we decrease each $A$-$B$ segment of $B_r$ by one unit. By moving the number from $B$ one unit to the left, we shorten each $A$-$B$ segments of $A_l$ by one unit. Also, we eliminated the length-1 $A$-$B$ segment formed by the swapped points themselves. Thus, $X$ decreases by $B_r + A_l + 1$.\n\n Similarly, $Y$ increases by $A_r + B_l + 1$, after the swap. Thus, $Z$ decreases by $B_r + R_l + B_r + B_l + 2 = 2022$.\n\n Now, starting from the initial configuration where all the 1011 left-most points are $A$, we can reach any other configuration by a series of swaps of adjacent pairs, where the left number is $A$ and the right number is $B$. In the initial configuration, we have $Z = 1011^3$, and it decreases by $2022$ with each swap. Thus, $Z$ always remains an odd number, so it can never be zero. We conclude that $X \\neq Y$.", "grading guidelines": "(Partial)\n 1. Found and proved that the parity of the difference is invariant\n 2. Found an invariant equivalent to it and proved that it is indeed an invariant.\n(Almost)\n 1. Solution is almost complete, but made minor mistakes which are not negligible.", "level": "IMO-easy", "source": "(Modified) Tournament of Towns, Fall 2022 Senior O-level, P3", "question": "The numbers $\\{ 1, 2, 3, \\ldots , 2022 \\}$ are partitioned into two sets $A$ and $B$ of size $1011$ each. Let $S_{AB}$ denote the set of all pairs $(a, b) \\in A \\times B$ where $a < b$, and let $S_{BA}$ denote the set of all pairs $(a, b) \\in A \\times B$ where $b < a$.\n\n Prove that $\\sum_{(a, b) \\in S_{AB}} (b - a) \\neq \\sum_{(a, b) \\in S_{BA}} (a - b)$.", "problem_idx": "PB-Basic-010", "type": "Combinatorics", "model_prediction": {"proof": "Let  \n\n\\[\nX=\\sum_{(a,b)\\in S_{AB}}(b-a),\\qquad \nY=\\sum_{(a,b)\\in S_{BA}}(a-b).\n\\]\n\nWe have to prove that \\(X\\neq Y\\) for every partition of \\(\\{1,2,\\dots ,2022\\}\\) into two subsets \\(A,B\\) with \\(|A|=|B|=1011\\).\n\n---\n\n### 1.  Express \\(X-Y\\) as a double sum over \\(A\\times B\\)\n\nBecause \\(A\\) and \\(B\\) are disjoint (they form a partition), for any \\(a\\in A,\\;b\\in B\\) we have \\(a\\neq b\\); hence exactly one of the relations \\(a<b\\) or \\(b<a\\) holds.  \nThus \\(A\\times B = S_{AB}\\cup S_{BA}\\) and the two sets are disjoint.\n\nNow  \n\n\\[\nY=\\sum_{(a,b)\\in S_{BA}}(a-b)=\\sum_{b<a}(a-b).\n\\]\n\nSince \\(a-b=-(b-a)\\),\n\n\\[\nY=\\sum_{b<a}\\bigl(-(b-a)\\bigr)=-\\sum_{b<a}(b-a).\n\\]\n\nTherefore  \n\n\\[\nX-Y=\\sum_{a<b}(b-a)\\;-\\;\\Bigl(-\\sum_{b<a}(b-a)\\Bigr)\n      =\\sum_{a<b}(b-a)+\\sum_{b<a}(b-a)\n      =\\sum_{(a,b)\\in A\\times B}(b-a). \\tag{1}\n\\]\n\n---\n\n### 2.  Compute \\(\\displaystyle\\sum_{(a,b)\\in A\\times B}(b-a)\\)\n\n\\[\n\\sum_{(a,b)\\in A\\times B}(b-a)=\\sum_{a\\in A}\\sum_{b\\in B}b\\;-\\;\\sum_{a\\in A}\\sum_{b\\in B}a.\n\\]\n\nIn the first double sum each \\(b\\in B\\) appears once for every \\(a\\in A\\); hence  \n\n\\[\n\\sum_{a\\in A}\\sum_{b\\in B}b = |A|\\cdot\\sum_{b\\in B}b.\n\\]\n\nSimilarly, in the second double sum each \\(a\\in A\\) appears once for every \\(b\\in B\\); hence  \n\n\\[\n\\sum_{a\\in A}\\sum_{b\\in B}a = |B|\\cdot\\sum_{a\\in A}a.\n\\]\n\nBecause \\(|A|=|B|=1011\\),\n\n\\[\n\\sum_{(a,b)\\in A\\times B}(b-a)=1011\\Bigl(\\sum_{b\\in B}b-\\sum_{a\\in A}a\\Bigr). \\tag{2}\n\\]\n\nDenote \\(\\Sigma_A=\\sum_{a\\in A}a\\) and \\(\\Sigma_B=\\sum_{b\\in B}b\\).  \nFrom (1) and (2) we obtain  \n\n\\[\nX-Y = 1011\\bigl(\\Sigma_B-\\Sigma_A\\bigr). \\tag{3}\n\\]\n\n---\n\n### 3.  Relating \\(\\Sigma_A\\) and \\(\\Sigma_B\\) to the total sum  \n\nSince \\(A\\cup B=\\{1,2,\\dots ,2022\\}\\) and \\(A\\cap B=\\varnothing\\),\n\n\\[\n\\Sigma_A+\\Sigma_B = 1+2+\\cdots+2022 =:S.\n\\]\n\nThe arithmetic series formula gives  \n\n\\[\nS = \\frac{2022\\cdot2023}{2}=1011\\cdot2023.\n\\]\n\nBoth factors \\(1011\\) and \\(2023\\) are odd; the product of two odd numbers is odd, therefore **\\(S\\) is odd**.\n\n---\n\n### 4.  Proving \\(\\Sigma_A\\neq\\Sigma_B\\)\n\nAssume, for contradiction, that \\(\\Sigma_A=\\Sigma_B\\). Then  \n\n\\[\nS = \\Sigma_A+\\Sigma_B = 2\\Sigma_A,\n\\]\n\nwhich would be an even integer. This contradicts the fact that \\(S\\) is odd. Hence the assumption is false and we must have  \n\n\\[\n\\Sigma_A\\neq\\Sigma_B.\n\\]\n\nConsequently \\(\\Sigma_B-\\Sigma_A\\neq0\\).\n\n---\n\n### 5.  Concluding \\(X\\neq Y\\)\n\nBecause \\(\\Sigma_B-\\Sigma_A\\neq0\\) and the factor \\(1011\\) is non\u2011zero, equation (3) yields  \n\n\\[\nX-Y = 1011\\bigl(\\Sigma_B-\\Sigma_A\\bigr)\\neq0.\n\\]\n\nThus \\(X\\neq Y\\), which is exactly the statement we had to prove. \u220e\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Partition the set $\\{ 1,2,3,\\cdots ,2000\\}$ into 1000 parts $P_{1}\\cup P_{2}\\cup P_{3}\\cup \\cdots \\cup P_{1000}$ such that $P_{a}$ contains all numbers of the form $2^{b}(2a-1)$ where $b$ is a nonnegative integer.\n\n $A$ cannot have two elements from the same part (otherwise one would divide the other by a power of 2). So $A$ must have exactly one element from each part.\n\n Let $t_{a}$ be the element of $A$ contained in $P_{a}$. Then consider $t_{1},t_{2},t_{5},\\cdots $, each being a product of a power of 3 and a power of 2. The highest power of 2 dividing $t_{1}$ must be strictly greater than the highest power of 2 dividing $t_{2}$ (otherwise $t_{1}$ divides $t_{2}$). Similarly, the highest powers of 2 dividing $t_{1},t_{2},t_{5},\\cdots $ must be a strictly decreasing sequence. In particular, there are 7 numbers in the sequence, so $t_{1}$ must be at least $2^6=64$. In a similar manner, if $666<3^{b}(2a-1)<2000$, then $t_{a}\\geq 2^{b}(2a-1)$. (Here we look at the numbers where the odd factors are $(2a-1)$ times a power of 3.)\n\n Suppose one of the $t_{a}$ is less than 64. Then we have\n \\[666<3^{b}(2a-1)\\leq (3/2)^{b}t_{a}<64(3/2)^{b}\\]\n so that $b\\geq 6$. However, this means either $a=1$ (we know $t_{1}\\geq 64$) or $t_{a}\\geq 3\\cdot 2^{6}$, which is a contradiction. Therefore, every element must be at least 64.\n\n\n We could attain a minimum by setting $t_{a}=2^{f(a)}(2a-1)$ where $f(a)$ satisfies $666<3^{f(a)}(2a-1)<2000$ if we can show it works. To do this, we must show that $t_{x}$ cannot divide $t_{y}$ for any $x\\neq y$. Suppose there were such $x$ and $y$. Then\n \\[2^{u}(2x-1)|2^{v}(2y-1)\\]\n where $u=f(x)$ and $v=f(y)$. In particular, $u\\leq v$ and $(2x-1)|(2y-1)$.\n\n In order to have $(2x-1)|(2y-1)$, we must have $2y-1\\geq 3(2x-1)$, but this implies\n \\[3^{u+1}(2x-1) \\ge 2001 >3^{v}(2y-1)\\geq 3^{v+1}(2x-1)\\]\n and $u>v$, a contradiction! Therefore $\\boxed{64}$ is the minimum.", "grading guidelines": "(Partial)\n 1. Constructed the example for the answer $64$.\n 2. Decomposed the set $\\{1,2,...,2000\\}$ as in the solution and analyzed intersections of $A$ and these decomposed subsets.\n(Almost)\n 1. Solution is almost complete, but made minor mistakes which are not negligible.", "level": "IMO-easy", "source": "(Modified) Vietnam TST 2007 P5", "question": "Let $A\\subset \\{1,2,\\ldots,2000\\}$, $|A|=1000$, such that $a$ does not divide $b$ for all distinct elements $a,b\\in A$. For a set $X$ as above let us denote with $m_{X}$ the smallest element in $X$. Find $\\min m_{A}$ (for all $A$ with the above properties).", "problem_idx": "PB-Basic-011", "type": "Combinatorics", "model_prediction": {"proof": "**1.  Odd\u2011part decomposition and the size restriction**  \n\nFor any positive integer \\(n\\) write uniquely \\(n = o\\cdot 2^{k}\\) where \\(o\\) is odd and \\(k\\ge 0\\) ( \\(k\\) is the exponent of \\(2\\) in the prime factorisation).  \nWe call \\(o\\) the *odd part* of \\(n\\).\n\n*Lemma 1.* If two numbers have the same odd part, then one divides the other.  \n*Proof.* Write the numbers as \\(o\\cdot2^{a}\\) and \\(o\\cdot2^{b}\\). If \\(a\\le b\\) then \\(o\\cdot2^{a}\\mid o\\cdot2^{b}\\); otherwise the opposite holds. \u220e\n\nConsequently, in a set \\(A\\) with the property \u201cno element divides another\u201d (an antichain for divisibility) all elements must have **distinct** odd parts. Hence \\(|A|\\) is at most the number of different odd parts that appear among its elements.\n\nThe odd numbers in \\(\\{1,2,\\dots ,2000\\}\\) are exactly \\(1,3,5,\\dots ,1999\\) \u2013 there are \\(1000\\) of them. Therefore any antichain \\(A\\subseteq\\{1,\\dots ,2000\\}\\) satisfies \\(|A|\\le 1000\\).  \nThe problem assumes \\(|A|=1000\\); thus \\(A\\) must be a *maximum* antichain. In particular \\(A\\) contains **exactly one** element for every odd \\(o\\in O:=\\{1,3,5,\\dots ,1999\\}\\) (otherwise we would miss some odd part and could not reach size \\(1000\\), because the map \\(n\\mapsto\\text{odd part}\\) is injective on an antichain).\n\nFor each odd \\(o\\in O\\) denote by \\(a(o)\\) the unique element of \\(A\\) whose odd part is \\(o\\), and write it as  \n\n\\[\na(o)=o\\cdot 2^{k(o)}\\qquad(k(o)\\in\\mathbb N_{0}). \\tag{1}\n\\]\n\nAll \\(a(o)\\) lie in \\(\\{1,\\dots ,2000\\}\\); therefore each \\(k(o)\\) is chosen so that \\(a(o)\\le 2000\\).\n\n---\n\n**2.  When does one chosen element divide another?**  \n\n*Lemma 2.* For distinct odds \\(o,p\\in O\\) we have  \n\n\\[\na(o)\\mid a(p)\\;\\Longleftrightarrow\\; o\\mid p\\ \\text{and}\\ k(o)\\le k(p). \\tag{2}\n\\]\n\n*Proof.* \\(a(o)\\mid a(p)\\) means \\(o\\cdot2^{k(o)}\\) divides \\(p\\cdot2^{k(p)}\\), i.e.  \n\n\\[\n\\frac{p\\cdot2^{k(p)}}{o\\cdot2^{k(o)}}=\\frac{p}{o}\\;2^{\\,k(p)-k(o)}\\in\\mathbb Z .\n\\]\n\n- If \\(o\\nmid p\\), then \\(\\frac{p}{o}\\) is a fraction whose denominator (after reduction) is an odd number \\(\\ge3\\). Multiplying by a power of two cannot cancel that odd denominator, so the product is never an integer.  \n- If \\(o\\mid p\\), write \\(p=o\\cdot d\\) with \\(d\\) odd. The quotient becomes \\(d\\cdot2^{\\,k(p)-k(o)}\\).  \n  *If \\(k(p)\\ge k(o)\\)*, this is an integer.  \n  *If \\(k(p)<k(o)\\)*, we obtain \\(d/2^{\\,k(o)-k(p)}\\). Because \\(d\\) is odd, division by a power of two leaves a non\u2011integer (the denominator would have to be \\(1\\), which would force \\(k(o)=k(p)\\) \u2013 a case already covered by the first sub\u2011case).  \n\nThus the quotient is an integer **iff** \\(o\\mid p\\) and \\(k(p)\\ge k(o)\\). \u220e  \n\nTherefore the antichain condition \u201c\\(a(o)\\nmid a(p)\\) for all distinct \\(o,p\\)\u201d translates into  \n\n\\[\n\\boxed{\\; \\text{If } o\\mid p \\text{ then we must have } k(o)>k(p).\\;} \\tag{3}\n\\]\n\n(If neither \\(o\\mid p\\) nor \\(p\\mid o\\), Lemma\u202f2 already guarantees that neither can divide the other.)\n\n---\n\n**3.  A lower bound for the exponents \\(k(o)\\)**  \n\nFor an odd \\(o\\) define  \n\n\\[\nh(o)=\\max\\{\\,t\\ge 0\\mid 3^{\\,t}o\\le 1999\\,\\}. \\tag{4}\n\\]\n\nInterpretation: \\(h(o)\\) is the maximal number of times we can multiply by the smallest odd factor \\(3\\) without leaving the range \\(\\{1,\\dots ,1999\\}\\). Because any odd factor larger than \\(3\\) would increase the number even faster, \\(h(o)\\) is exactly the maximal possible length (in edges) of a chain of odd multiples starting from \\(o\\).\n\nConsider the concrete chain  \n\n\\[\no = o_{0}\\mid o_{1}\\mid o_{2}\\mid\\dots\\mid o_{h(o)}\\qquad\\text{with}\\qquad o_{j}=3^{\\,j}o .\n\\]\n\nAll these numbers are odd and do not exceed \\(1999\\) by the definition of \\(h(o)\\); moreover \\(o_{h(o)}\\) has no odd multiple \\(\\le1999\\) (since \\(3^{\\,h(o)+1}o>1999\\)), so it is a maximal element in the divisibility order restricted to odd numbers.\n\nBecause \\(A\\) contains one element for every odd number, the elements \\(a(o_{j})=o_{j}\\cdot2^{k(o_{j})}\\) belong to \\(A\\). Applying condition (3) to each consecutive pair \\(o_{j}\\mid o_{j+1}\\) we obtain  \n\n\\[\nk(o_{j})>k(o_{j+1})\\qquad(j=0,1,\\dots ,h(o)-1).\n\\]\n\nThus we have a strictly decreasing sequence of non\u2011negative integers  \n\n\\[\nk(o)=k(o_{0})>k(o_{1})>\\dots>k(o_{h(o)})\\ge0. \\tag{5}\n\\]\n\nA strictly decreasing sequence of length \\(h(o)+1\\) forces its first term to be at least \\(h(o)\\) (the smallest possible values are \\(h(o),h(o)-1,\\dots ,1,0\\)). Consequently  \n\n\\[\nk(o)\\ge h(o). \\tag{6}\n\\]\n\nFrom (1) we therefore obtain a lower bound for each element of \\(A\\):  \n\n\\[\na(o)=o\\cdot2^{k(o)}\\ge o\\cdot2^{h(o)}. \\tag{7}\n\\]\n\n---\n\n**4.  Global lower bound for the smallest element**  \n\nLet \\(m_{A}=\\min A\\) be the smallest element of \\(A\\). From (7) we infer  \n\n\\[\nm_{A}\\ge\\min_{o\\in O}\\,o\\cdot2^{h(o)}. \\tag{8}\n\\]\n\nWe now compute the right\u2011hand side explicitly.\n\n---\n\n**5.  Computing \\(\\displaystyle\\min_{o} o\\cdot2^{h(o)}\\)**  \n\nThe condition \\(3^{\\,t}o\\le1999<3^{\\,t+1}o\\) is equivalent to  \n\n\\[\n\\frac{1999}{3^{\\,t+1}}<o\\le\\frac{1999}{3^{\\,t}}. \\tag{9}\n\\]\n\nThus the value \\(t=h(o)\\) is determined by the interval in which the odd integer \\(o\\) lies. Listing these intervals (the bounds are approximate; only integrality matters):\n\n| \\(t\\) | interval for \\(o\\) | smallest odd \\(o\\) in the interval | \\(o\\cdot2^{t}\\) |\n|------|--------------------|------------------------------------|-----------------|\n| 0 | \\((666.\\overline{3},\\,1999]\\) | 667 | \\(667\\cdot1 = 667\\) |\n| 1 | \\((222.\\overline{1},\\,666.\\overline{3}]\\) | 223 | \\(223\\cdot2 = 446\\) |\n| 2 | \\((74.\\overline{037},\\,222.\\overline{1}]\\) | 75  | \\(75\\cdot4 = 300\\) |\n| 3 | \\((24.\\overline{679},\\,74.\\overline{037}]\\) | 25  | \\(25\\cdot8 = 200\\) |\n| 4 | \\((8.\\overline{224},\\,24.\\overline{679}]\\) | 9   | \\(9\\cdot16 = 144\\) |\n| 5 | \\((2.\\overline{742},\\,8.\\overline{224}]\\) | 3   | \\(3\\cdot32 = 96\\) |\n| 6 | \\((0.914\\ldots,\\,2.\\overline{742}]\\) | 1   | \\(1\\cdot64 = 64\\) |\n| \\(\\ge7\\) | impossible because \\(3^{7}=2187>1999\\) | \u2013 | \u2013 |\n\nInside each interval the expression \\(o\\cdot2^{t}\\) is increasing with \\(o\\); therefore its minimum over that interval is attained at the smallest odd \\(o\\) belonging to it. Comparing the values obtained we see that the overall minimum is **64**.\n\nHence  \n\n\\[\n\\min_{o\\in O} o\\cdot2^{h(o)} = 64. \\tag{10}\n\\]\n\nFrom (8) we conclude that **every** admissible set \\(A\\) satisfies \\(m_{A}\\ge 64\\).\n\n---\n\n**6.  A set attaining the bound**  \n\nDefine  \n\n\\[\nA^{*}= \\{\\, o\\cdot2^{h(o)} \\mid o\\text{ odd},\\ 1\\le o\\le 1999 \\,\\}. \n\\]\n\nWe verify that \\(A^{*}\\) fulfills all requirements and that its smallest element equals \\(64\\).\n\n*Elements lie in \\(\\{1,\\dots ,2000\\}\\).*  \nFrom \\(3^{h(o)}o\\le1999\\) we have \\(o\\le 1999/3^{h(o)}\\). Consequently  \n\n\\[\na(o)=o\\cdot2^{h(o)}\\le\\frac{1999}{3^{h(o)}}\\cdot2^{h(o)}\n      =1999\\Bigl(\\frac{2}{3}\\Bigr)^{h(o)}\\le1999,\n\\]  \nbecause \\((\\frac{2}{3})^{h(o)}\\le1\\). Thus \\(A^{*}\\subseteq\\{1,\\dots ,2000\\}\\).\n\n*Size.* The mapping \\(o\\mapsto o\\cdot2^{h(o)}\\) is injective.  \nIndeed, if \\(o_{1}\\cdot2^{h(o_{1})}=o_{2}\\cdot2^{h(o_{2})}\\) and, say, \\(h(o_{1})<h(o_{2})\\), dividing by \\(2^{h(o_{1})}\\) gives an odd left\u2011hand side and an even right\u2011hand side \u2013 impossible. Hence \\(h(o_{1})=h(o_{2})\\) and then \\(o_{1}=o_{2}\\). Therefore \\(|A^{*}|=1000\\).\n\n*Antichain property.* Let \\(o,p\\) be distinct odds.  \n\n- **If \\(o\\mid p\\)**, write \\(p=o\\cdot d\\) with \\(d\\) odd and \\(d\\ge3\\).  \n  From the definition of \\(h(p)\\) we have \\(3^{h(p)}p\\le1999\\). Substituting \\(p\\) gives \\(3^{h(p)}o\\,d\\le1999\\). Because \\(d\\ge3\\),  \n\n  \\[\n  3^{h(p)+1}o = 3\\cdot3^{h(p)}o \\le 3^{h(p)}o\\,d \\le 1999 .\n  \\]\n\n  Hence \\(3^{h(p)+1}o\\le1999\\); by maximality of \\(h(o)\\) this implies \\(h(o)\\ge h(p)+1\\). Consequently  \n\n  \\[\n  k(o):=h(o) \\;>\\; h(p)=:k(p).\n  \\]\n\n  With \\(o\\mid p\\) and \\(k(o)>k(p)\\), Lemma\u202f2 tells us that \\(a(o)\\) does **not** divide \\(a(p)\\). Moreover \\(p\\) cannot divide \\(o\\) (since \\(p>o\\)), so \\(a(p)\\) does not divide \\(a(o)\\) either.\n\n- **If \\(p\\mid o\\)**, the symmetric argument yields the same conclusion.\n\n- **If neither \\(o\\mid p\\) nor \\(p\\mid o\\)**, Lemma\u202f2 directly shows that neither \\(a(o)\\) divides \\(a(p)\\) nor the opposite (the necessary odd\u2011part divisibility is absent).\n\nThus no two distinct elements of \\(A^{*}\\) are comparable \u2013 \\(A^{*}\\) is an antichain.\n\n*Smallest element.* For \\(o=1\\) we have \\(h(1)=6\\) (because \\(3^{6}=729\\le1999\\) but \\(3^{7}=2187>1999\\)). Hence \\(a(1)=1\\cdot2^{6}=64\\). All other elements are larger, as seen from the table above. Therefore  \n\n\\[\nm_{A^{*}} = 64 .\n\\]\n\n---\n\n**7.  Conclusion**  \n\nWe have proved that for every set \\(A\\subseteq\\{1,\\dots ,2000\\}\\) with \\(|A|=1000\\) and with no element dividing another,  \n\n\\[\nm_{A}\\ge 64,\n\\]\n\nand we have exhibited a specific set \\(A^{*}\\) satisfying all conditions and attaining \\(m_{A^{*}}=64\\). Consequently the minimum possible value of \\(m_{A}\\) is  \n\n\\[\n\\boxed{64}.\n\\]", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "If we move the second path up-left by one unit, the pair of paths corresponds to a pair of paths from (0,0) to (10,10) and from (-1,1) to (9,11) which are non-intersecting. The total number of path pairs is $\\binom{20}{10}^2$. The number of intersecting pairs corresponds to the number of pair of paths from (0,0) to (9, 11) and paths from (-1, 1) to (10,10), because interchanging the two paths at the first intersection point gives a one-to-one correspondence, and thus equals $\\binom{20}{9}^2$. Therefore there are $\\binom{20}{10}^2 - \\binom{20}{9}^2$ paths.", "grading guidelines": "(Partial)\n 1. Came up with an idea of correcting shifting (shifting only one path by $+1$ in the $y$-coordinate) or found an equivalent idea with it.\n(Almost)\n 1. Made a minor mistake when counting.", "level": "IMO-medium", "source": "Novel Problem", "question": "Consider a positive integer $n$. We define $f(n)$ as the number of pairs of paths on an $n \\times n$ grid that:\n\n (1) Both paths start at $(0, 0)$ (bottom left corner) and end at $(n, n)$ (top right corner).\n\n (2) Both paths allow only right or up movements (one unit each).\n\n (3) The $y$ coordinate of the first path never exceeds the y coordinate of the second path at any timestep.\n\n For example, when $n = 2$, consider the following pair of paths:\n\n The first path: $(0,0) \\rightarrow (1,0) \\rightarrow (1,1) \\rightarrow (2,1) \\rightarrow (2,2)$\n The second path: $(0,0) \\rightarrow (1,0) \\rightarrow (2,0) \\rightarrow (2,1) \\rightarrow(2,2)$\n The example is invalid because after 2 steps, the y coordinate of the first path (1) is larger than the y coordinate of the second path (0).\n\n However, the following example is valid,\n\n The first path: $(0,0) \\rightarrow (1,0) \\rightarrow (2,0) \\rightarrow (2,1) \\rightarrow (2,2)$\n The second path: $(0,0) \\rightarrow (1,0) \\rightarrow (1,1) \\rightarrow (2,1) \\rightarrow (2,2)$\n\n since the y coordinate of the first path is never larger than the second path. Find $f(10)$.", "problem_idx": "PB-Basic-012", "type": "Combinatorics", "model_prediction": {"proof": "**1.  Preliminaries**  \nA path from \\((0,0)\\) to \\((n,n)\\) using only unit steps **R** \\(=(1,0)\\) (right) and **U** \\(=(0,1)\\) (up) must contain exactly \\(n\\) R\u2011steps and \\(n\\) U\u2011steps; hence its length is \\(2n\\).  \n\nWrite a path as a sequence of its steps, e.g.  \n\\(P=(p_1,p_2,\\dots ,p_{2n})\\) with \\(p_i\\in\\{R,U\\}\\).  \nFor \\(t=0,1,\\dots ,2n\\) let  \n\n\\[\ny_P(t)=\\#\\{\\,i\\le t\\mid p_i=U\\,\\}\n\\]\n\n(the number of U\u2011steps among the first \\(t\\) steps; \\(y_P(0)=0\\)).  \nThe condition \u201cthe \\(y\\)-coordinate of the first path never exceeds the \\(y\\)-coordinate of the second path at any timestep\u2019\u2019 translates to  \n\n\\[\ny_P(t)\\le y_Q(t)\\qquad (t=0,1,\\dots ,2n)                \\tag{1}\n\\]\n\nfor an ordered pair \\((P,Q)\\).  \n\n**2.  Encoding a pair as a word of pairs**  \nAlign the steps of the two paths: at the \\(i\\)-th step \\(P\\) takes \\(p_i\\) and \\(Q\\) takes \\(q_i\\).  \nRecord the ordered pair \\(w_i=(p_i,q_i)\\).  \nThus we obtain a word \\(W=(w_1,\\dots ,w_{2n})\\) over the four symbols  \n\n\\[\nRR=(R,R),\\; UU=(U,U),\\; RU=(R,U),\\; UR=(U,R).\n\\]\n\nDenote  \n\n\\[\nA=\\#\\{i\\mid w_i=RR\\},\\; B=\\#\\{i\\mid w_i=UU\\},\\; \nC=\\#\\{i\\mid w_i=RU\\},\\; D=\\#\\{i\\mid w_i=UR\\}.\n\\]\n\nBecause each path contains exactly \\(n\\) U\u2011steps we have  \n\n\\[\n\\begin{aligned}\nB+D &= n \\qquad\\text{(U\u2011steps of }P),\\\\\nB+C &= n \\qquad\\text{(U\u2011steps of }Q),\\\\\nA+B+C+D &= 2n. \n\\end{aligned}\n\\]\n\nSubtracting the first two equations gives \\(D=C\\); inserting this into \\(B+D=n\\) yields  \n\n\\[\nC=D=n-B.                                    \\tag{2}\n\\]\n\nSubstituting (2) into \\(A+B+C+D=2n\\) gives  \n\n\\[\nA+B+2(n-B)=2n\\;\\Longrightarrow\\;A=B.       \\tag{3}\n\\]\n\nHence  \n\n\\[\nA=B,\\qquad C=D=n-B,\n\\]\n\nand because \\(C,D\\ge 0\\) we must have \\(0\\le B\\le n\\).  \nThe integer \\(B\\) (the number of \\(UU\\) pairs) will be our main parameter.\n\n**3.  The difference walk**  \nDefine  \n\n\\[\nd_i = y_Q(i)-y_P(i)\\qquad(i=0,1,\\dots ,2n),\\quad d_0=0.\n\\]\n\nFrom the step types we obtain  \n\n\\[\n\\begin{array}{c|c}\nw_i & \\Delta d_i\\\\ \\hline\nRR & 0\\\\\nUU & 0\\\\\nRU & +1\\\\\nUR & -1\n\\end{array}\n\\]\n\nCondition (1) is exactly \\(d_i\\ge 0\\) for all \\(i\\); moreover \\(d_{2n}=0\\) because both paths end with the same number of U\u2011steps.\n\nSteps \\(RR\\) and \\(UU\\) are **neutral** (\\(\\Delta d=0\\)).  \nIf we delete all neutral symbols from \\(W\\) we obtain a reduced word \\(W'\\) of length  \n\n\\[\n2m\\qquad\\text{with }m:=n-B\\;(=C=D).\n\\]\n\n\\(W'\\) consists only of the symbols \\(RU\\) (\\(+1\\)) and \\(UR\\) (\\(-1\\)); it contains exactly \\(m\\) of each.  \nSince neutral steps do not change the value of \\(d\\), the original walk never becomes negative **iff** the reduced walk never becomes negative (and it automatically ends at \\(0\\) because the numbers of \\(+1\\) and \\(-1\\) are equal).  \nThus \\(W'\\) must be a **Dyck path** of semilength \\(m\\): a walk with steps \\(+1\\) and \\(-1\\) that starts at \\(0\\), ends at \\(0\\) and never goes below \\(0\\).\n\n**4.  Counting Dyck paths \u2013 Catalan numbers**  \nFor a given \\(m\\) the number of such Dyck paths is the Catalan number  \n\n\\[\nC_m=\\frac1{m+1}\\binom{2m}{m}.\n\\]\n\n*Proof (reflection principle):*  \nThere are \\(\\binom{2m}{m}\\) sequences of \\(m\\) up\u2011 and \\(m\\) down\u2011steps.  \nIf a sequence ever drops below \\(0\\), let the first time it reaches \\(-1\\) be after step \\(t\\).  \nReflect the prefix up to \\(t\\) (change every up to down and vice\u2011versa).  \nThis yields a bijection between \u201cbad\u2019\u2019 sequences and all sequences with \\(m+1\\) up\u2011steps and \\(m-1\\) down\u2011steps, whose number is \\(\\binom{2m}{m+1}\\).  \nHence the number of good sequences is  \n\n\\[\n\\binom{2m}{m}-\\binom{2m}{m+1}\n   =\\binom{2m}{m}-\\frac{m}{m+1}\\binom{2m}{m}\n   =\\frac1{m+1}\\binom{2m}{m}=C_m.\n\\]\n\n**5.  Inserting the neutral steps**  \nFix a particular Dyck path \\(W'\\) (i.e. a concrete order of its \\(m\\) \\(RU\\) and \\(m\\) \\(UR\\) steps).  \nTo reconstruct a full word \\(W\\) of length \\(2n\\) we must re\u2011insert the \\(2B\\) neutral symbols: \\(B\\) copies of \\(RR\\) and \\(B\\) copies of \\(UU\\).\n\n*   Choose the positions that will be occupied by the \\(2m\\) non\u2011neutral steps.  \n    Because the order of those steps is already prescribed by \\(W'\\), we simply select a set of \\(2m\\) positions out of the \\(2n\\) available; this can be done in \\(\\displaystyle\\binom{2n}{2m}\\) ways.  \n*   In the remaining \\(2B\\) positions we have to place exactly \\(B\\) symbols \\(RR\\) and \\(B\\) symbols \\(UU\\).  \n    Choosing which of those positions receive \\(RR\\) (the rest automatically become \\(UU\\)) gives \\(\\displaystyle\\binom{2B}{B}\\) possibilities.\n\nConsequently, for a fixed Dyck path \\(W'\\) the number of admissible words \\(W\\) is  \n\n\\[\n\\binom{2n}{2m}\\,\\binom{2B}{B}.                           \\tag{4}\n\\]\n\n**6.  Contribution of a fixed \\(B\\)**  \nFor a given \\(B\\) we have \\(m=n-B\\).  \nThere are \\(C_{n-B}\\) Dyck paths of semilength \\(m\\). Multiplying by (4) gives the number of ordered pairs for this \\(B\\):\n\n\\[\nN(B)=C_{\\,n-B}\\;\\binom{2n}{2(n-B)}\\;\\binom{2B}{B}.      \\tag{5}\n\\]\n\n**7.  Summation over all \\(B\\)**  \nSumming (5) for \\(B=0,1,\\dots ,n\\) yields  \n\n\\[\nf(n)=\\sum_{B=0}^{n}C_{\\,n-B}\\;\\binom{2n}{2(n-B)}\\;\\binom{2B}{B}.   \\tag{6}\n\\]\n\nIt is convenient to set \\(k=n-B\\) (so \\(k\\) runs from \\(0\\) to \\(n\\)); then \\(B=n-k\\) and (6) becomes  \n\n\\[\nf(n)=\\sum_{k=0}^{n}C_{k}\\;\\binom{2n}{2k}\\;\\binom{2(n-k)}{n-k}.    \\tag{7}\n\\]\n\n**8.  Algebraic simplification**  \nRecall \\(C_k=\\frac1{k+1}\\binom{2k}{k}\\). Insert this into (7):\n\n\\[\nf(n)=\\sum_{k=0}^{n}\\frac1{k+1}\\binom{2k}{k}\\;\n      \\binom{2n}{2k}\\;\\binom{2(n-k)}{n-k}.\n\\]\n\nCompute the product of the two binomial coefficients:\n\n\\[\n\\binom{2n}{2k}\\binom{2(n-k)}{n-k}\n   =\\frac{(2n)!}{(2k)!\\,(2n-2k)!}\\;\\frac{(2n-2k)!}{(n-k)!\\,(n-k)!}\n   =\\frac{(2n)!}{(2k)!\\,(n-k)!^{2}}.\n\\]\n\nMultiplying by \\(\\binom{2k}{k}=\\frac{(2k)!}{k!\\,k!}\\) cancels \\((2k)!\\) and we obtain  \n\n\\[\nf(n)=(2n)!\\sum_{k=0}^{n}\\frac1{(k+1)\\bigl(k!\\,(n-k)!\\bigr)^{2}}. \\tag{8}\n\\]\n\nNow \\(\\displaystyle k!\\,(n-k)!=\\frac{n!}{\\binom{n}{k}}\\); therefore  \n\n\\[\n\\frac1{\\bigl(k!\\,(n-k)!\\bigr)^{2}}=\\frac{\\binom{n}{k}^{2}}{(n!)^{2}}.\n\\]\n\nSubstituting into (8) gives  \n\n\\[\nf(n)=\\frac{(2n)!}{(n!)^{2}}\\;\\sum_{k=0}^{n}\\frac{\\binom{n}{k}^{2}}{k+1}\n    =\\binom{2n}{n}\\;S_n, \\qquad\n    S_n:=\\sum_{k=0}^{n}\\frac{\\binom{n}{k}^{2}}{k+1}. \\tag{9}\n\\]\n\n**9.  Evaluation of \\(S_n\\)**  \n\nFirst note the elementary identity  \n\n\\[\n\\frac{\\binom{n}{k}}{k+1}=\\frac{\\binom{n+1}{k+1}}{n+1}. \\tag{10}\n\\]\n\n*Proof:* \\(\\displaystyle\\binom{n+1}{k+1}=\\frac{n+1}{k+1}\\binom{n}{k}\\) by factorials; dividing by \\(n+1\\) yields (10).  \n\nMultiplying (10) by \\(\\binom{n}{k}\\) gives  \n\n\\[\n\\frac{\\binom{n}{k}^{2}}{k+1}=\n\\frac{\\binom{n}{k}\\,\\binom{n+1}{k+1}}{n+1}.\n\\]\n\nHence  \n\n\\[\nS_n=\\frac1{n+1}\\sum_{k=0}^{n}\\binom{n}{k}\\binom{n+1}{k+1}. \\tag{11}\n\\]\n\nChange the index: let \\(j=k+1\\) (\\(j\\) runs from \\(1\\) to \\(n+1\\)). Then  \n\n\\[\n\\sum_{k=0}^{n}\\binom{n}{k}\\binom{n+1}{k+1}\n   =\\sum_{j=1}^{n+1}\\binom{n}{j-1}\\binom{n+1}{j}.\n\\]\n\nWrite the second binomial coefficient with symmetry: \\(\\binom{n+1}{j}=\\binom{n+1}{n+1-j}\\).  \nSetting \\(i=j-1\\) (so \\(i=0,\\dots ,n\\)) we obtain  \n\n\\[\n\\sum_{j=1}^{n+1}\\binom{n}{j-1}\\binom{n+1}{j}\n =\\sum_{i=0}^{n}\\binom{n}{i}\\binom{n+1}{n-i}. \\tag{12}\n\\]\n\nThe right\u2011hand side of (12) is a **Vandermonde convolution**:  \n\n\\[\n\\sum_{i=0}^{r}\\binom{a}{i}\\binom{b}{r-i}=\\binom{a+b}{r}.\n\\]\n\nHere \\(a=n,\\;b=n+1,\\;r=n\\); thus  \n\n\\[\n\\sum_{i=0}^{n}\\binom{n}{i}\\binom{n+1}{n-i}=\\binom{2n+1}{n}. \\tag{13}\n\\]\n\n(Combinatorial proof: choose \\(n\\) objects from a set that is the disjoint union of an \\(n\\)-element set \\(A\\) and an \\((n+1)\\)-element set \\(B\\). The total number of ways is \\(\\binom{2n+1}{n}\\); classifying by the number \\(i\\) taken from \\(A\\) gives the sum.)  \n\nCombining (11)\u2013(13) we get  \n\n\\[\nS_n=\\frac1{n+1}\\binom{2n+1}{n}. \\tag{14}\n\\]\n\n**10.  Closed form for \\(f(n)\\)**  \n\nInsert (14) into (9):\n\n\\[\nf(n)=\\binom{2n}{n}\\;\\frac{\\binom{2n+1}{n}}{n+1}\n     =\\frac{\\binom{2n}{n}\\binom{2n+1}{n}}{n+1}. \\tag{15}\n\\]\n\nBecause the Catalan number \\(C_n=\\frac{\\binom{2n}{n}}{n+1}\\), we may also write  \n\n\\[\nf(n)=C_n\\;\\binom{2n+1}{n}. \\tag{16}\n\\]\n\n**11.  Computing \\(f(10)\\)**  \n\nFor \\(n=10\\):\n\n\\[\n\\binom{20}{10}=184756,\\qquad\nC_{10}=\\frac{184756}{11}=16796,\\qquad\n\\binom{21}{10}=352716.\n\\]\n\nTherefore  \n\n\\[\nf(10)=16796\\times 352716 = 5\\,924\\,217\\,936.\n\\]\n\n\\[\n\\boxed{5924217936}\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Let\u2019s say a color \"connects\" two boxes if it appears in both. We want to show there are two colors that connect the same pair of boxes.\n\n Let $c_i$ denote the number of balls with color $i$. Then, the total number of times a color connects two boxes is $N = \\sum_{i=1}^{22} \\binom{c_i}{2}$. We also know the total number of balls is $48$, so $\\sum_{i=1}^{22} c_i = 48$. We now try to find the minimum possible value of $N$.\n\n To do this, we first analyze the quantity $X = \\sum_{i=1}^{22} (c_i - 2)^2$. If at $|c_i - 2| >= 2$ for some $i$, then clearly $X \\ge 4$. Otherwise, all the $c_i$ are 1, 2, or 3. Then, in order for them to sum to 48, at most 18 of them can be 2, so once again $X \\ge 4$. We then have\n\n $4 \\le X = 2N - 3 \\sum_{i=1}^{22} c_i + 4 * 22 = 2N - 3 * 48 + 4 * 22 = 2N - 56$,\n\n so that $N \\ge 30$. But note that there are only $\\binom{8}{2} = 28$ pairs of boxes. Thus, by the pigeonhole principle, some two colors connect the same pair of boxes, as desired.", "grading guidelines": "(Partial)\n 1. Applied some double counting argument but did not progress further.\n(Almost)\n 1. Solved the problem with some mistakes (such as calculation mistakes).", "level": "pre-IMO", "source": "(Modified) USAMO 2001 P1", "question": "Each of 8 boxes contains 6 balls. Each ball has been colored with one of 22 colors. If no two balls in the same box are the same color, prove that there are two colors that occur together in more than one box.", "problem_idx": "PB-Basic-013", "type": "Combinatorics", "model_prediction": {"proof": "Let the colours be numbered \\(1,2,\\dots ,22\\).  \nFor box \\(i\\;(i=1,\\dots ,8)\\) denote by  \n\n\\[\nB_i\\subseteq\\{1,\\dots ,22\\},\\qquad |B_i|=6,\n\\]\n\nthe set of colours that appear in that box (the condition \u201cno two balls in the same box are the same colour\u2019\u2019 guarantees that the \\(B_i\\) are genuine sets, i.e. all six colours in a box are distinct).\n\nWe have to prove that there exist two different colours \\(a\\neq b\\) and two different boxes \\(i\\neq j\\) such that \\(a,b\\in B_i\\cap B_j\\).\n\n---\n\n### 1.  Assume the contrary  \n\nAssume that **no** two colours ever occur together in more than one box; i.e. for every unordered pair \\(\\{a,b\\}\\) of distinct colours there is at most one box containing both \\(a\\) and \\(b\\).\n\n---\n\n### 2.  A first consequence  \n\n**Lemma 1.**  For any two distinct boxes \\(i\\neq j\\) we have \\(|B_i\\cap B_j|\\le 1\\).\n\n*Proof.*  If \\(|B_i\\cap B_j|\\ge 2\\) we could pick two different colours \\(a,b\\in B_i\\cap B_j\\).  \nThen the pair \\(\\{a,b\\}\\) would appear together in both box \\(i\\) and box \\(j\\), contradicting our assumption. \u220e  \n\n---\n\n### 3.  Degrees of colours  \n\nFor a colour \\(c\\) define  \n\n\\[\nd_c = |\\{\\,i\\mid c\\in B_i\\,\\}|\n\\]\n\n(the number of boxes that contain colour \\(c\\)).  \nSince each box contributes six colours,\n\n\\[\n\\sum_{c=1}^{22} d_c = \\sum_{i=1}^{8} |B_i| = 8\\cdot 6 = 48. \\tag{1}\n\\]\n\n---\n\n### 4.  Counting intersecting box\u2011pairs  \n\nLet  \n\n\\[\n\\mathcal P=\\bigl\\{\\{i,j\\}\\mid 1\\le i<j\\le 8\\bigr\\}\n\\]\n\nbe the set of all unordered pairs of boxes, and  \n\n\\[\n\\mathcal I=\\bigl\\{\\{i,j\\}\\in\\mathcal P\\mid B_i\\cap B_j\\neq\\varnothing\\bigr\\}\n\\]\n\nthe pairs that intersect.\n\nFor a fixed colour \\(c\\) consider  \n\n\\[\n\\mathcal P_c=\\bigl\\{\\{i,j\\}\\in\\mathcal P\\mid c\\in B_i\\cap B_j\\bigr\\}.\n\\]\n\nBecause exactly \\(d_c\\) boxes contain colour \\(c\\), we have \\(|\\mathcal P_c|=\\binom{d_c}{2}\\).\n\nBy Lemma\u202f1 any two boxes share **at most one** colour; consequently a pair of boxes cannot belong to two different sets \\(\\mathcal P_c,\\mathcal P_{c'}\\) (otherwise they would share two colours). Moreover, if \\(\\{i,j\\}\\in\\mathcal I\\) then \\(B_i\\cap B_j\\neq\\varnothing\\); Lemma\u202f1 tells us that the intersection has **exactly one** colour, say \\(c\\); hence \\(\\{i,j\\}\\in\\mathcal P_c\\) and it belongs to no other \\(\\mathcal P_{c'}\\). Thus the family \\(\\{\\mathcal P_c\\}_{c=1}^{22}\\) is pairwise disjoint and its union is precisely \\(\\mathcal I\\). Therefore\n\n\\[\n|\\mathcal I|=\\sum_{c=1}^{22}|\\mathcal P_c|\n            =\\sum_{c=1}^{22}\\binom{d_c}{2}. \\tag{2}\n\\]\n\nObviously \\(\\mathcal I\\subseteq\\mathcal P\\) and \\(|\\mathcal P|=\\binom{8}{2}=28\\); hence from (2)\n\n\\[\n\\sum_{c=1}^{22}\\binom{d_c}{2}\\le 28. \\tag{3}\n\\]\n\n---\n\n### 5.  A universal lower bound  \n\nWe now prove that **for any** non\u2011negative integers \\(d_1,\\dots ,d_{22}\\) satisfying (1) we always have  \n\n\\[\n\\sum_{c=1}^{22}\\binom{d_c}{2}\\ge 30. \\tag{4}\n\\]\n\nBecause \\(\\displaystyle\\binom{d}{2}=\\frac{d(d-1)}{2}=\\frac{d^{2}-d}{2}\\),\n\n\\[\n\\sum_{c=1}^{22}\\binom{d_c}{2}\n   =\\frac{\\displaystyle\\sum_{c=1}^{22}d_c^{2}\\;-\\;\\sum_{c=1}^{22}d_c}{2}\n   =\\frac{\\displaystyle\\sum_{c=1}^{22}d_c^{2}\\;-\\;48}{2}. \\tag{5}\n\\]\n\nThus (4) is equivalent to  \n\n\\[\n\\sum_{c=1}^{22} d_c^{2}\\ge 108. \\tag{6}\n\\]\n\n---\n\n#### Lemma\u202f2 (Equalizing Lemma)  \n\nLet \\(n\\ge 1\\) and \\(S\\ge 0\\) be integers. Among all \\(n\\)-tuples \\((y_1,\\dots ,y_n)\\) of non\u2011negative integers with \\(\\sum y_i = S\\), the sum \\(\\sum y_i^{2}\\) is minimized when the numbers are as equal as possible, i.e. when \\(\\max_i y_i-\\min_i y_i\\le 1\\).  \nThe minimum is attained (uniquely up to permutation) by taking  \n\n\\[\nk=\\Bigl\\lfloor\\frac{S}{n}\\Bigr\\rfloor,\\qquad r=S-nk,\n\\]\n\nand setting \\(r\\) of the \\(y_i\\) equal to \\(k+1\\) and the remaining \\(n-r\\) equal to \\(k\\).\n\n*Proof.*  \nSuppose a tuple contains two indices \\(i,j\\) with \\(y_i\\ge y_j+2\\). Replace \\((y_i,y_j)\\) by \\((y_i-1,\\;y_j+1)\\); the total sum \\(S\\) does not change. The change in the sum of squares is  \n\n\\[\n\\begin{aligned}\n\\Delta &= (y_i-1)^{2}+(y_j+1)^{2}-y_i^{2}-y_j^{2}   \\\\\n       &= (y_i^{2}-2y_i+1)+(y_j^{2}+2y_j+1)-y_i^{2}-y_j^{2} \\\\\n       &= -2y_i+2y_j+2 = 2\\bigl(y_j-y_i+1\\bigr).\n\\end{aligned}\n\\]\n\nSince \\(y_i\\ge y_j+2\\), we have \\(y_j-y_i+1\\le -1\\), hence \\(\\Delta\\le -2\\). Thus the operation **strictly decreases** \\(\\sum y_i^{2}\\) while preserving the sum \\(S\\).\n\nIf a tuple is **not** as equal as possible (i.e. \\(\\max-\\min\\ge 2\\)), we can apply this operation and obtain another tuple with a smaller sum of squares. Consequently a minimizer of \\(\\sum y_i^{2}\\) must satisfy \\(\\max-\\min\\le 1\\).\n\nFor such a minimizer let \\(k=\\min_i y_i\\). Then every entry is either \\(k\\) or \\(k+1\\). Let \\(t\\) be the number of entries equal to \\(k+1\\); we have \\(S=nk+t\\) with \\(0\\le t\\le n\\). Because \\(k\\le S/n<k+1\\), we must have \\(k=\\lfloor S/n\\rfloor\\) and \\(t=S-nk\\). The corresponding sum of squares is \\(t(k+1)^{2}+(n-t)k^{2}\\), and this is the minimum possible value. \u220e\n\n---\n\nApply Lemma\u202f2 with \\(n=22\\), \\(S=48\\). Then  \n\n\\[\nk=\\Bigl\\lfloor\\frac{48}{22}\\Bigr\\rfloor=2,\\qquad r=48-22\\cdot2=4.\n\\]\n\nHence the configuration that minimizes \\(\\sum d_c^{2}\\) consists of \\(4\\) numbers equal to \\(3\\) and \\(18\\) numbers equal to \\(2\\). Its sum of squares is  \n\n\\[\n4\\cdot 3^{2}+18\\cdot 2^{2}=4\\cdot9+18\\cdot4=36+72=108.\n\\]\n\nTherefore **every** 22\u2011tuple \\((d_1,\\dots ,d_{22})\\) with total \\(48\\) satisfies  \n\n\\[\n\\sum_{c=1}^{22} d_c^{2}\\ge 108,\n\\]\n\nwhich is exactly (6). Substituting this into (5) gives  \n\n\\[\n\\sum_{c=1}^{22}\\binom{d_c}{2}\n   =\\frac{\\sum d_c^{2}-48}{2}\\ge\\frac{108-48}{2}=30.\n\\]\n\nThus (4) holds for any possible degree sequence.\n\n---\n\n### 6.  Contradiction  \n\nUnder our initial (contradictory) assumption we obtained (3):  \n\n\\[\n\\sum_{c=1}^{22}\\binom{d_c}{2}\\le 28.\n\\]\n\nBut the universal lower bound (4) forces  \n\n\\[\n\\sum_{c=1}^{22}\\binom{d_c}{2}\\ge 30.\n\\]\n\nThese two inequalities cannot be true simultaneously \u2013 a contradiction.\n\n---\n\n### 7.  Conclusion  \n\nTherefore our assumption was false. Hence there **do** exist two distinct colours that occur together in more than one box. \u220e", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Take any Googler. He holds at most 5 flags. If everyone holds at least one of those flags but not more than 199 people speak have each flag, then there are at most 1 + 5\u00b7198 = 991 Googlers. But there are 2024 Googlers, so we must be able to find someone who holds none of the 5 flags. He too has at most 5 flags, giving a total of 10 between the two Googlers selected. Now we are told that every other Googler holds at least one of these 10 flags. So if no more than 199 Googlers holds each flag, then there are at most 2 + 10\u00b7198 = 1982 Googlers. But there are 2024 Googlers, so one of the 10 flags must be held by 200 or more people.", "grading guidelines": "(Partial)\n 1. Established that there is a pair of people not sharing a flag of the same color.\n (Almost)\n 1.  Solution is almost complete, but made minor mistakes which are not negligible.", "level": "pre-IMO", "source": "(Modified) Balkan MO 1985 P4", "question": "In Shoreline Amphitheatre, 2024 Googlers each hold up to five flags of various colors. Any group of three Googlers will always have at least two people holding flags of the same color. Prove that one specific flag color is held by at least 200 Googlers.", "problem_idx": "PB-Basic-014", "type": "Combinatorics", "model_prediction": {"proof": "Let \\(G\\) be the set of the 2024 Googlers.  \n\n**Colour sets.**  \nFor a colour \\(x\\) (from the universe of all possible colours) define  \n\n\\[\nA_x = \\{\\,g\\in G\\mid g\\text{ holds at least one flag of colour }x\\,\\}.\n\\]\n\nOnly colours that actually appear are relevant; the collection \\(\\{A_x\\}\\) is finite because each Googler contributes at most five colours.  \n\nFor a Googler \\(g\\in G\\) let  \n\n\\[\nC(g)=\\{\\,x\\mid g\\in A_x\\,\\}\n\\]\n\nbe the set of distinct colours that \\(g\\) holds.  \nSince a Googler holds **at most five** flags, we have  \n\n\\[\n|C(g)|\\le 5\\qquad(\\text{and }C(g)=\\varnothing\\text{ if }g\\text{ holds no flags}).\n\\]\n\n**The given condition.**  \nThe statement  \n\n> \u201cany three Googlers always contain at least two who hold a flag of the same colour\u201d\n\ncan be rewritten as  \n\n\\[\n\\forall\\;\\text{distinct }a,b,c\\in G,\\;\\exists\\text{ colour }x\\text{ with }|\\{a,b,c\\}\\cap A_x|\\ge 2 .\n\\]\n\nEquivalently, **there is no triple of Googlers whose colour sets are pairwise disjoint**, because such a triple would have no colour appearing on two of them, contradicting the condition, and vice\u2011versa.\n\n---\n\n### Proof by contradiction  \n\nAssume, contrary to what we want to prove, that **every colour occurs on at most 199 Googlers**, i.e.  \n\n\\[\n|A_x|\\le 199\\qquad\\text{for every colour }x .\n\\]\n\n(If a colour never appears, its set is empty, which certainly satisfies the bound.)  \nFrom this assumption we shall construct three Googlers with pairwise disjoint colour sets; this will contradict the given condition, showing that the assumption is impossible. Hence some colour must appear on at least \\(200\\) Googlers.\n\n---\n\n### A convenient set  \n\nFor a Googler \\(g\\) define  \n\n\\[\nT(g)=\\{\\,h\\in G\\mid C(g)\\cap C(h)\\neq\\varnothing\\,\\}\\cup\\{g\\}.\n\\]\n\n\\(T(g)\\) consists of \\(g\\) itself together with every Googler that shares at least one colour with \\(g\\).  \n(If \\(C(g)=\\varnothing\\) then the first part is empty and \\(T(g)=\\{g\\}\\).)\n\n**Lemma.**  For every \\(g\\in G\\), \\(|T(g)|\\le 995\\).\n\n*Proof.*  We distinguish two cases.\n\n*Case 1 \u2013 \\(C(g)=\\varnothing\\).*  \nThen no other Googler can share a colour with \\(g\\); consequently \\(T(g)=\\{g\\}\\) and \\(|T(g)|=1\\le 995\\).\n\n*Case 2 \u2013 \\(C(g)\\neq\\varnothing\\).*  \nWe claim that in this case  \n\n\\[\nT(g)=\\bigcup_{x\\in C(g)} A_x .\n\\]\n\n- **\\(T(g)\\subseteq\\bigcup_{x\\in C(g)}A_x\\):**  \n  Take \\(h\\in T(g)\\). If \\(h=g\\) then, because \\(g\\in A_x\\) for every \\(x\\in C(g)\\), we have \\(g\\in\\bigcup_{x\\in C(g)}A_x\\).  \n  If \\(h\\neq g\\) then by definition of \\(T(g)\\) there exists a colour \\(x\\in C(g)\\cap C(h)\\); thus \\(h\\in A_x\\) and therefore \\(h\\in\\bigcup_{x\\in C(g)}A_x\\).\n\n- **\\(\\bigcup_{x\\in C(g)}A_x\\subseteq T(g)\\):**  \n  If \\(h\\in\\bigcup_{x\\in C(g)}A_x\\), pick \\(x\\in C(g)\\) with \\(h\\in A_x\\).  \n  If \\(h=g\\) then \\(h\\in T(g)\\) because \\(T(g)\\) contains \\(g\\).  \n  If \\(h\\neq g\\) then both \\(g\\) and \\(h\\) belong to \\(A_x\\), so \\(x\\in C(g)\\cap C(h)\\); hence \\(h\\in T(g)\\).\n\nThus the equality holds.  \n\nNow we bound the size of this union.  For any finite family of sets, the size of the union is at most the sum of the sizes (the trivial \u201cunion bound\u201d):\n\n\\[\n\\Bigl|\\bigcup_{x\\in C(g)}A_x\\Bigr|\\le \\sum_{x\\in C(g)} |A_x|.\n\\]\n\nBecause \\(|C(g)|\\le 5\\) and by our assumption \\(|A_x|\\le 199\\) for every colour \\(x\\),\n\n\\[\n\\sum_{x\\in C(g)} |A_x|\\le |C(g)|\\cdot 199\\le 5\\cdot199 = 995 .\n\\]\n\nTherefore \\(|T(g)|\\le 995\\) also in this case. \u220e\n\n\n\n---\n\n### Constructing a triple with pairwise disjoint colour sets  \n\n1. **Pick \\(p_1\\) arbitrarily.**  \n   Choose any Googler \\(p_1\\in G\\).  \n   By the Lemma, \\(|T(p_1)|\\le 995\\); consequently  \n\n   \\[\n   |G\\setminus T(p_1)| = 2024 - |T(p_1)| \\ge 2024-995 = 1029 > 0 .\n   \\]\n\n   Hence \\(G\\setminus T(p_1)\\) is non\u2011empty.  Choose any  \n\n   \\[\n   p_2\\in G\\setminus T(p_1).\n   \\]\n\n   Because \\(p_2\\notin T(p_1)\\), we have \\(p_2\\neq p_1\\) and \\(C(p_1)\\cap C(p_2)=\\varnothing\\) (otherwise \\(p_2\\) would belong to \\(T(p_1)\\)).\n\n2. **Pick \\(p_3\\).**  \n   Consider \\(T(p_2)\\); again the Lemma gives \\(|T(p_2)|\\le 995\\).  \n   Using subadditivity of cardinality,\n\n   \\[\n   |T(p_1)\\cup T(p_2)|\\le |T(p_1)|+|T(p_2)|\\le 995+995 = 1990 .\n   \\]\n\n   Therefore  \n\n   \\[\n   |G\\setminus (T(p_1)\\cup T(p_2))|\n     = 2024 - |T(p_1)\\cup T(p_2)|\n     \\ge 2024-1990 = 34 > 0 .\n   \\]\n\n   Thus we can select a Googler  \n\n   \\[\n   p_3\\in G\\setminus (T(p_1)\\cup T(p_2)).\n   \\]\n\n   By construction \\(p_3\\notin T(p_1)\\) and \\(p_3\\notin T(p_2)\\); hence \\(p_3\\neq p_1,p_2\\) and  \n\n   \\[\n   C(p_3)\\cap C(p_1)=\\varnothing,\\qquad C(p_3)\\cap C(p_2)=\\varnothing .\n   \\]\n\n3. **Pairwise disjointness.**  \n   From step\u202f1 we already have \\(C(p_1)\\cap C(p_2)=\\varnothing\\).  Together with the two equalities above we obtain that the three sets \\(C(p_1),C(p_2),C(p_3)\\) are **pairwise disjoint**.\n\n---\n\n### Contradiction and conclusion  \n\nThe triple \\(\\{p_1,p_2,p_3\\}\\) consists of three distinct Googlers with pairwise disjoint colour sets; therefore **no two of them hold a flag of the same colour**.  This directly contradicts the given condition that any three Googlers must contain at least two who share a colour.\n\nSince the contradiction arose from the assumption that every colour occurs on at most \\(199\\) Googlers, that assumption cannot be true under the stated hypothesis.  Consequently **there exists at least one colour \\(x\\) for which \\(|A_x|\\ge 200\\)**.\n\n\u220e", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Define an inversion to be a pair of cars where the one on the left is wider than the one on the right. Clearly, each move strictly decreases the number of inversions, so the procedure must terminate.\n\n Now, suppose for sake of contradiction that we can make no more moves, but the cars are not sorted in increasing order of width. Consider the smallest index $i$ such that car $i$ is wider than car $i + 1$. Since we cannot make any further swaps, it must also be the case that car $i$ is longer than book $i + 1$. This means that originally, car $i$ was to the right of car $i + 1$, and at some point they switched relative positions. However, this is not possible because the rules prevent us from ever swapping two books when one is both taller and wider than the other.", "grading guidelines": "(Partial)\n 1. Found an increasing quantity (e.g. the number of inversion according to the width or length)\n 2. Tried to use minimality argument by taking the first book not sorted by width.\n(Almost)\n 1.  Solution is almost complete, but made minor mistakes which are not negligible.", "level": "pre-IMO", "source": "(Modified) 2020 USOJMO P1", "question": "Adrian is lining up $n \\geq 2$ toy cars in a row. Each car has a width and length, and no two cars have the same width or length. Initially, the cars are arranged in increasing order of length from left to right. Adrian repeatedly does the following: he chooses some two adjacent cars where the left car is shorter in length and greater in width than the right car, and he swaps them. He keeps doing this until no further moves are possible. Prove that no matter how Adrian chooses his swaps, the procedure will eventually terminate, and in the end, the cars will be sorted in increasing order of width from left to right.", "problem_idx": "PB-Basic-015", "type": "Combinatorics", "model_prediction": {"proof": "**1.  Labeling**  \nBecause all lengths are distinct we may rename (number) the cars so that  \n\n\\[\n\\ell _1<\\ell _2<\\dots <\\ell _n .\n\\]\n\nThe initial order \u2013 increasing length from left to right \u2013 then is simply  \n\n\\[\n1,2,\\dots ,n .\n\\]\n\nFor car \\(i\\) we write \\(w_i\\) for its width (all \\(w_i\\) are also distinct).  \nWith this numbering the swap rule becomes:  \n\n> for two adjacent cars \\(i\\) (left) and \\(j\\) (right) we may swap them **iff**  \n> \\(i<j\\) and \\(w_i>w_j\\).  \n\nIndeed \\(i<j\\;\\Longleftrightarrow\\;\\ell_i<\\ell_j\\), i.e. the left car is shorter, and the second condition is the same \u201cwider\u2019\u2019 requirement.\n\n**2.  Termination \u2013 width\u2011inversion count**  \n\nFor a configuration \\(\\sigma\\) (a permutation of \\(\\{1,\\dots ,n\\}\\) with \\(\\sigma(k)\\) the car at position \\(k\\)) define  \n\n\\[\nI(\\sigma)=\\bigl|\\{(p,q)\\mid 1\\le p<q\\le n,\\; w_{\\sigma(p)}>w_{\\sigma(q)}\\}\\bigr|\n\\]\n\n\u2013 the number of **width inversions**.  \nInitially \\(I\\) is some integer between \\(0\\) and \\(\\binom n2\\).\n\n---\n\n**Lemma 1.**  Every legal swap decreases \\(I\\) by exactly \\(1\\).\n\n*Proof.*  Suppose we swap the adjacent cars at positions \\(k\\) and \\(k+1\\); let  \n\\(a=\\sigma(k)\\), \\(b=\\sigma(k+1)\\). Because the swap is legal we have \\(a<b\\) and \\(w_a>w_b\\).\n\nThe only pair whose relative order changes is \\((a,b)\\); any other car \\(x\\notin\\{a,b\\}\\) is either  \ncompletely to the left of both \\(a\\) and \\(b\\) (position \\(<k\\)) or completely to the right of both\n(position \\(>k+1\\)). Consequently the order of \\(x\\) with respect to \\(a\\) and with respect to \\(b\\) stays the same. Hence every inversion **not** involving the pair \\((a,b)\\) remains an inversion, and no new inversion is created.\n\nBefore the swap \\((a,b)\\) contributes \\(1\\) to \\(I\\) (since \\(w_a>w_b\\) and \\(a\\) is left of \\(b\\)); after the swap \\(a\\) is right of \\(b\\) so this pair contributes \\(0\\). Therefore \\(I\\) drops by exactly \\(1\\). \u220e\n\n---\n\nBecause \\(I\\) is a non\u2011negative integer and strictly decreases at each step, any sequence of swaps can contain at most \\(I(\\text{initial})\\) moves. Hence **the procedure always terminates**, no matter how Adrian chooses his swaps.\n\n**3.  An invariant relating length and width**  \n\nFor a configuration \\(\\sigma\\) denote by \\(\\operatorname{pos}_\\sigma(i)\\) the (unique) index with \\(\\sigma(\\operatorname{pos}_\\sigma(i))=i\\); this is the position of car \\(i\\).\n\n---\n\n**Claim (\u2217).**  In every configuration reachable from the initial one,\n\n\\[\n\\text{if } i>j \\text{ and } w_i>w_j \\text{ then } \\operatorname{pos}_\\sigma(i)>\\operatorname{pos}_\\sigma(j).\n\\]\n\nIn words: whenever a car is **longer** and **wider** than another, it must stand to the *right* of that other car.\n\n*Proof by induction on the number of swaps.*\n\n*Base.*  In the initial configuration \\(\\sigma_0\\) we have \\(\\operatorname{pos}_{\\sigma_0}(i)=i\\).  \nThus \\(i>j\\) directly gives \\(\\operatorname{pos}_{\\sigma_0}(i)>\\operatorname{pos}_{\\sigma_0}(j)\\); the claim holds.\n\n*Inductive step.*  Assume (\u2217) holds for a configuration \\(\\sigma\\) and that we perform a legal swap of the adjacent cars at positions \\(k\\) and \\(k+1\\).  \nWrite \\(a=\\sigma(k)\\), \\(b=\\sigma(k+1)\\); by the swap condition \\(a<b\\) and \\(w_a>w_b\\).  \nLet \\(\\sigma'\\) be the configuration after the swap, so \\(\\sigma'(k)=b,\\;\\sigma'(k+1)=a\\) and \\(\\sigma'(i)=\\sigma(i)\\) for \\(i\\neq k,k+1\\).\n\n**Observation.**  Swapping \\(a\\) and \\(b\\) does **not** change the relative order of any two cars except the unordered pair \\(\\{a,b\\}\\) itself.  \nIndeed, a car \\(x\\notin\\{a,b\\}\\) satisfies either \\(\\operatorname{pos}_\\sigma(x)<k\\) (it is left of both \\(a\\) and \\(b\\)) or \\(\\operatorname{pos}_\\sigma(x)>k+1\\) (it is right of both).  \n- If \\(\\operatorname{pos}_\\sigma(x)<k\\), after the swap we still have \\(\\operatorname{pos}_{\\sigma'}(x)<k=\\operatorname{pos}_{\\sigma'}(b)\\) and \\(<k+1=\\operatorname{pos}_{\\sigma'}(a)\\);  \n- if \\(\\operatorname{pos}_\\sigma(x)>k+1\\), then \\(\\operatorname{pos}_{\\sigma'}(x)>k+1>k\\).  \n\nThus \\(x\\) stays on the same side of \\(a\\) and of \\(b\\); consequently for every ordered pair \\((i,j)\\) with \\(\\{i,j\\}\\neq\\{a,b\\}\\) the relation \u201c\\(i\\) is to the left of \\(j\\)\u2019\u2019 is the same in \\(\\sigma\\) and \\(\\sigma'\\).\n\nNow take arbitrary \\(i>j\\) with \\(w_i>w_j\\).\n\n*Case 1 \u2013 \\(\\{i,j\\}=\\{a,b\\}\\).*  \nBecause \\(b>a\\), the only possibility is \\(i=b,\\;j=a\\). The antecedent of (\u2217) would also require \\(w_b>w_a\\); but we know \\(w_a>w_b\\), so \\(w_b>w_a\\) is **false**. Hence the implication \u201cif \\(i>j\\) and \\(w_i>w_j\\) then \\(\\operatorname{pos}(i)>\\operatorname{pos}(j)\\)\u201d is vacuously true for this pair \u2013 nothing needs to be checked.\n\n*Case 2 \u2013 \\(\\{i,j\\}\\neq\\{a,b\\}\\).*  \nBy the observation the relative order of \\(i\\) and \\(j\\) is unchanged by the swap.  \nSince (\u2217) holds for \\(\\sigma\\), we have \\(\\operatorname{pos}_\\sigma(i)>\\operatorname{pos}_\\sigma(j)\\).  \nBecause the order does not change, we obtain \\(\\operatorname{pos}_{\\sigma'}(i)>\\operatorname{pos}_{\\sigma'}(j)\\).\n\nThus (\u2217) is true for \\(\\sigma'\\) as well, completing the induction. \u220e\n\n**4.  From the invariant to a move when the order is not width\u2011sorted**  \n\n---\n\n**Lemma 2.**  Let \\(\\sigma\\) be a configuration reachable from the start.  \nIf \\(\\sigma\\) is **not** sorted by increasing width (i.e. the sequence \\(w_{\\sigma(1)},w_{\\sigma(2)},\\dots ,w_{\\sigma(n)}\\) is not strictly increasing), then there exists an admissible swap.\n\n*Proof.*  Because all widths are distinct, a sequence is strictly increasing **iff** every adjacent pair is increasing.  \nSince \\(\\sigma\\) is not sorted, there must be an index \\(k\\;(1\\le k<n)\\) with  \n\n\\[\nw_{\\sigma(k)} > w_{\\sigma(k+1)} .\n\\]\n\nSet \\(a=\\sigma(k),\\; b=\\sigma(k+1)\\); thus \\(w_a>w_b\\).\n\nWe show that necessarily \\(a<b\\).  \nSuppose, for contradiction, that \\(a>b\\). Then we would have \\(a>b\\) and \\(w_a>w_b\\) while \\(a\\) is positioned to the **left** of \\(b\\) (because \\(k<k+1\\)). This contradicts the invariant (\u2217), which forces a car that is longer **and** wider to stand to the **right** of the other one. Hence \\(a<b\\).\n\nNow the adjacent pair \\((a,b)\\) satisfies \\(a<b\\) and \\(w_a>w_b\\); exactly the condition that allows a swap. Therefore a legal move exists. \u220e\n\n**5.  Putting everything together**  \n\nBy Lemma\u202f1 the process always terminates; let \\(\\sigma_*\\) be the final configuration (no admissible swap remains).  \n\\(\\sigma_*\\) is reachable, so Lemma\u202f2 applies to it.  \nIf \\(\\sigma_*\\) were **not** width\u2011sorted, Lemma\u202f2 would guarantee the existence of a legal swap \u2013 contradicting the fact that \\(\\sigma_*\\) is final. Consequently \\(\\sigma_*\\) **must be** width\u2011sorted.\n\nThus, regardless of how Adrian chooses his swaps, the procedure eventually stops, and when it stops the cars are arranged from left to right in strictly increasing order of their widths. \u220e\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Let $A$ be the number of indices $i$ where $i$th stone is blue and $i+1$th stone is white (we define the order in mod 101). Similarly, let $C$ be the number of white stones followed by blue stones. In the initial state, we have $A = 1$ and $C = 0$, and in the final state, we have $A = 0$ and $C = 1$.\n\n We claim that $A - C$ is invariant. Indeed, consider all possible colorings of three consecutive stones, and let us enumerate what color the middle side can be changed to. Writing $R, W, B$ to represent red, white, and blue, we have the following possibilities:\n \\[ RBR \\to RWR, \\qquad RWR \\to RBR, \\]\n \\[ BWB \\to BRB, \\qquad BRB \\to BWB, \\]\n \\[ WBW \\to WRW, \\qquad WRW \\to WBW. \\]\n In each case, we find that the quantity $A - C$ doesn't change. However, the initial state has $A - C = 1$, and the final state has $A - C = -1$, so it is not possible to reach the final state.", "grading guidelines": "(Partial)\n 1. Analyzed all the possible cases for when a stone changes color in terms of its neighbors' colors.\n(Almost)\n 1. Solution is almost complete, but made minor mistakes which are not negligible.", "level": "pre-IMO", "source": "(Modified) USAMO 1994 Problem 2", "question": "101 stones are arranged in a circle, numbered 1 through 101 in order (so that stone 1 is next to stone 101). Each stone is painted either red, white, or blue. Initially, stone 101 is the only blue stone. Among the remaining stones, even-numbered stones are red, and odd-numbered stones are white.\n\nWe perform a sequence of modifications to the coloring, where in each step, we may choose a stone and repaint it a different color, as long as we ensure that no two adjacent stones are ever the same color. Prove that it is not possible to eventually reach a state where again stone 101 is the only blue stone, but among the remaining stones, all even-numbered stones are white and all odd-numbered stones are red.", "problem_idx": "PB-Basic-016", "type": "Combinatorics", "model_prediction": {"proof": "**Notation**  \nLet the colours be \\(R=\\text{red},\\;W=\\text{white},\\;B=\\text{blue}\\).  \nFor a stone \\(i\\;(1\\le i\\le 101)\\) denote its colour by \\(c_i\\).  \nIndices are taken modulo \\(101\\); thus \\(c_{0}=c_{101}\\) and \\(c_{102}=c_1\\).  \nAdjacent stones are \\(i\\) and \\(i+1\\) (mod\u202f101). A colouring is *proper* if \\(c_i\\neq c_{i+1}\\) for every \\(i\\).\n\n---\n\n### 1.  When can a stone be recoloured?  \n\nConsider a proper colouring and a stone \\(i\\).  \nLet \\(L=c_{i-1},\\;R=c_{i+1}\\). Because the colouring is proper we have  \n\\(c_i\\neq L\\) and \\(c_i\\neq R\\).\n\n*Case \\(L\\neq R\\).*  \nThe two colours \\(L,R\\) are distinct. With only three colours, the set  \n\\(C\\setminus\\{L,R\\}\\) consists of exactly one colour, call it \\(T\\).  \nSince \\(c_i\\) is different from both \\(L\\) and \\(R\\), we must have \\(c_i=T\\).  \n\nTo repaint \\(i\\) we would need a colour \\(c'\\) with  \n\\(c'\\neq c_i,\\;c'\\neq L,\\;c'\\neq R\\).  \nBut the only colour different from \\(L\\) and \\(R\\) is \\(T\\), which equals \\(c_i\\); therefore no such \\(c'\\) exists.  \n**Hence a move is impossible when the two neighbours have different colours.**\n\n*Case \\(L=R=X\\).*  \nNow \\(c_i\\) must be a colour different from \\(X\\). There are exactly two such colours; call them \\(Y\\) and \\(Z\\) (\\(Y\\neq Z\\)).  \nCurrently \\(c_i\\) is either \\(Y\\) or \\(Z\\). Changing it to the other one gives a valid move, because the new colour is still different from \\(X\\) and differs from the old colour.  \n\n**Thus a move can be performed exactly when the two neighbours have the same colour, and it simply toggles the stone between the two colours that are not the neighbour colour.**\n\nConsequently every step in any admissible sequence is of this \u201ctoggle\u201d type.\n\n---\n\n### 2.  An invariant  \n\nDefine a function \\(f:C\\times C\\to\\mathbb Z\\) (any abelian group would work) with the following property:\n\n> For every colour \\(X\\in C\\) the quantity \\(f(X,Y)+f(Y,X)\\) does **not** depend on the choice of \\(Y\\neq X\\).  \n> In other words, for each \\(X\\) there is a number \\(C_X\\) such that for all \\(Y\\in C\\setminus\\{X\\}\\),  \n> \\(f(X,Y)+f(Y,X)=C_X\\).\n\nFor a proper colouring define  \n\n\\[\nS \\;=\\; \\sum_{i=1}^{101} f(c_i,c_{i+1}),\\qquad\\text{with }c_{102}=c_1 .\n\\]\n\n\\(S\\) is the sum over the 101 directed edges of the cycle.\n\n**Claim.** \\(S\\) is invariant under any admissible move.\n\n*Proof.* Suppose a move is performed at stone \\(i\\). By the characterisation above, before the move we have  \n\\(c_{i-1}=c_{i+1}=X\\) and \\(c_i=Y\\) (where \\(Y\\) is one of the two colours different from \\(X\\)).  \nAfter the move \\(c_i\\) becomes \\(Z\\), the *other* colour different from \\(X\\). All other stones keep their colours.\n\nOnly the two summands involving \\(i\\) change:  \n\\(f(c_{i-1},c_i)=f(X,Y)\\) is replaced by \\(f(X,Z)\\) and  \n\\(f(c_i,c_{i+1})=f(Y,X)\\) is replaced by \\(f(Z,X)\\).\n\nBy the property of \\(f\\),\n\n\\[\nf(X,Y)+f(Y,X)=C_X=f(X,Z)+f(Z,X),\n\\]\n\nso the total sum \\(S\\) remains the same. \u220e\n\nThus any function \\(f\\) satisfying the stated property yields an invariant \\(S\\).\n\n---\n\n### 3.  A concrete choice of \\(f\\)\n\nWe now exhibit a simple function that fulfills the required property and will distinguish the two colourings we are interested in.\n\n\\[\n\\begin{array}{c|ccc}\nf(a,b) & R & W & B\\\\ \\hline\nR & 0 & 1 & 0\\\\\nW & 0 & 0 & 0\\\\\nB & 1 & 1 & 0\n\\end{array}\n\\]\n\nMore explicitly  \n\n\\[\n\\begin{aligned}\n&f(R,W)=1,\\quad f(W,R)=0;\\\\[2pt]\n&f(R,B)=0,\\quad f(B,R)=1;\\\\[2pt]\n&f(W,B)=0,\\quad f(B,W)=1.\n\\end{aligned}\n\\]\n\n(The values on diagonal pairs \\((a,a)\\) are irrelevant for proper colourings; we set them to\u202f0 for completeness.)\n\n**Verification of the property**  \n\n- For \\(X=R\\): \\(f(R,W)+f(W,R)=1+0=1,\\quad f(R,B)+f(B,R)=0+1=1\\).  \n- For \\(X=W\\): \\(f(W,R)+f(R,W)=0+1=1,\\quad f(W,B)+f(B,W)=0+1=1\\).  \n- For \\(X=B\\): \\(f(B,R)+f(R,B)=1+0=1,\\quad f(B,W)+f(W,B)=1+0=1\\).\n\nIn each case the sum is the same constant (\\(1\\)) for both possible choices of \\(Y\\); hence the condition holds.\n\n---\n\n### 4.  Evaluating \\(S\\) on the initial and the desired colourings  \n\n*Initial colouring \\(I\\).*  \nStone\u202f101 is blue; for \\(i=1,\\dots,100\\)\n\n\\[\nc_i=\\begin{cases}\nW &\\text{if }i\\text{ is odd},\\\\[2pt]\nR &\\text{if }i\\text{ is even}.\n\\end{cases}\n\\]\n\nList the directed edges \\((c_i,c_{i+1})\\) for \\(i=1,\\dots,101\\) (with \\(c_{102}=c_1\\)):\n\n- \\(i=1,3,5,\\dots,99\\) (odd numbers): \\((W,R)\\). There are \\(50\\) such \\(i\\).  \n- \\(i=2,4,6,\\dots,98\\) (even numbers): \\((R,W)\\). There are \\(49\\) such \\(i\\).  \n- \\(i=100\\): \\((R,B)\\).  \n- \\(i=101\\): \\((B,W)\\).\n\nUsing our function \\(f\\),\n\n\\[\n\\begin{aligned}\nS(I) &= 50\\cdot f(W,R) \\;+\\; 49\\cdot f(R,W) \\;+\\; f(R,B) \\;+\\; f(B,W)\\\\\n     &= 50\\cdot0 \\;+\\; 49\\cdot1 \\;+\\; 0 \\;+\\; 1\\\\\n     &= 49 + 1 = 50.\n\\end{aligned}\n\\]\n\n*Target colouring \\(T\\).*  \nStone\u202f101 is still blue, but now  \n\n\\[\nc_i=\\begin{cases}\nR &\\text{if }i\\text{ is odd},\\\\[2pt]\nW &\\text{if }i\\text{ is even},\n\\end{cases}\\qquad(i=1,\\dots,100).\n\\]\n\nThe directed edges are  \n\n- \\(i=1,3,5,\\dots,99\\): \\((R,W)\\) \u2013 \\(50\\) edges,  \n- \\(i=2,4,6,\\dots,98\\): \\((W,R)\\) \u2013 \\(49\\) edges,  \n- \\(i=100\\): \\((W,B)\\),  \n- \\(i=101\\): \\((B,R)\\).\n\nHence  \n\n\\[\n\\begin{aligned}\nS(T) &= 50\\cdot f(R,W) \\;+\\; 49\\cdot f(W,R) \\;+\\; f(W,B) \\;+\\; f(B,R)\\\\\n     &= 50\\cdot1 \\;+\\; 49\\cdot0 \\;+\\; 0 \\;+\\; 1\\\\\n     &= 50 + 1 = 51.\n\\end{aligned}\n\\]\n\n---\n\n### 5.  Conclusion  \n\nThe quantity \\(S\\) is invariant under every legal move.  \nWith the function \\(f\\) chosen above, \\(S\\) equals \\(50\\) for the initial colouring and \\(51\\) for the desired colouring.  \nSince an invariant cannot change, it is impossible to transform the initial colouring into the target colouring by any sequence of allowed repaintings. \u220e\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Substitute $a = 3^{4(n^2+n+1)} \\geq 81 \\in Z^+$, we have $A_n = a^7 + a^5 + 1$. Observe that $a^7 + a^5 + 1 = (a^2+a+1)(a^5-a^4+a^3-a+1)$. Since $a \\geq 81$, we have $a^2+a+1 > 1$ and $a^5-a^4+a^3-a+1 > 1$. Hence, $A_n$ is not a prime number for all $n \\geq 0$.", "grading guidelines": "(Partial)\n 1. Applied correct substitution to $x^7+x^5+1$ or $x^{14}+x^{10}+1$ or $x^{28}+x^{20}+1$\n(Almost)\n 1. Correctly applied substitution and factorization but with made minor mistakes.", "level": "pre-IMO", "source": "folklore", "question": "Find all non-negative integer $n$ such that $A_n = 1 + 3^{20(n^2+n+1)} + 9^{14(n^2+n+1)}$ is a prime number.", "problem_idx": "PB-Basic-017", "type": "Number theory", "model_prediction": {"proof": "Let  \n\n\\[\nM=n^{2}+n+1\\qquad (n\\in\\mathbb N_{0}=\\{0,1,2,\\dots\\}).\n\\]\n\n---\n\n### 1.  Simplify the expression  \n\n\\[\nA_n = 1+3^{20(n^{2}+n+1)}+9^{14(n^{2}+n+1)}\n     = 1+3^{20M}+9^{14M}.\n\\]\n\nBecause \\(9 = 3^{2}\\),\n\n\\[\n9^{14M} = (3^{2})^{14M}=3^{2\\cdot14M}=3^{28M}.\n\\]\n\nThus  \n\n\\[\nA_n = 1+3^{20M}+3^{28M}.\n\\]\n\n---\n\n### 2.  Introduce a convenient variable  \n\nNotice that  \n\n\\[\n20M = 5\\cdot(4M),\\qquad 28M = 7\\cdot(4M).\n\\]\n\nSet  \n\n\\[\nd = 4M,\\qquad x = 3^{d}.\n\\]\n\nThen  \n\n\\[\n3^{20M}= (3^{d})^{5}=x^{5},\\qquad 3^{28M}= (3^{d})^{7}=x^{7},\n\\]\n\nand therefore  \n\n\\[\nA_n = 1 + x^{5} + x^{7}=x^{7}+x^{5}+1.\n\\]\n\n---\n\n### 3.  Factor the polynomial \\(x^{7}+x^{5}+1\\)  \n\nA direct multiplication shows  \n\n\\[\n(x^{2}+x+1)(x^{5}-x^{4}+x^{3}-x+1)=x^{7}+x^{5}+1.\n\\]\n\nIndeed,\n\n\\[\n\\begin{aligned}\n&(x^{2})(x^{5}-x^{4}+x^{3}-x+1)=x^{7}-x^{6}+x^{5}-x^{3}+x^{2},\\\\\n&(x)(x^{5}-x^{4}+x^{3}-x+1)=x^{6}-x^{5}+x^{4}-x^{2}+x,\\\\\n&(1)(x^{5}-x^{4}+x^{3}-x+1)=x^{5}-x^{4}+x^{3}-x+1.\n\\end{aligned}\n\\]\n\nAdding these three lines, all intermediate powers cancel, leaving  \n\n\\[\nx^{7}+x^{5}+1.\n\\]\n\nHence  \n\n\\[\nA_n = (x^{2}+x+1)(x^{5}-x^{4}+x^{3}-x+1).\n\\]\n\n---\n\n### 4.  Determine the size of the factors  \n\nBecause \\(n\\ge 0\\),\n\n\\[\nn^{2}+n = n(n+1)\\ge 0\\;\\Longrightarrow\\; M = n^{2}+n+1\\ge 1.\n\\]\n\nConsequently  \n\n\\[\nd = 4M\\ge 4\\quad\\text{and}\\quad x = 3^{d}\\ge 3^{4}=81>1.\n\\]\n\nIn particular, \\(x\\) is an integer and \\(x\\ge 2\\).\n\n- **First factor:** \\(x^{2}+x+1\\).  \n  For any integer \\(x\\ge 1\\) we have \\(x^{2}+x+1\\ge 1^{2}+1+1=3>1\\).  \n  Since \\(x>1\\), this factor is certainly larger than \\(1\\).\n\n- **Second factor:** \\(x^{5}-x^{4}+x^{3}-x+1\\).  \n  For \\(x\\ge 2\\) we can write  \n\n  \\[\n  x^{5}-x^{4}+x^{3}-x+1 = x^{4}(x-1) + x(x^{2}-1) + 1.\n  \\]\n\n  Both \\(x^{4}(x-1)\\) and \\(x(x^{2}-1)\\) are positive integers (because \\(x\\ge2\\) gives \\(x-1\\ge1\\) and \\(x^{2}-1\\ge3\\)).  \n  Hence  \n\n  \\[\n  x^{5}-x^{4}+x^{3}-x+1 \\ge 1 + 16 + 6 = 23 > 1.\n  \\]\n\n  (The bounds \\(x^{4}(x-1)\\ge2^{4}\\cdot1=16\\) and \\(x(x^{2}-1)\\ge2\\cdot3=6\\) hold for every integer \\(x\\ge2\\).)\n\nThus **both factors are integers strictly greater than 1** for every non\u2011negative integer \\(n\\).\n\n---\n\n### 5.  Conclude about primality  \n\nFor every \\(n\\ge0\\),\n\n\\[\nA_n = (x^{2}+x+1)(x^{5}-x^{4}+x^{3}-x+1)\n\\]\n\nis a product of two integers each larger than \\(1\\) (and clearly \\(A_n>1\\)).  \nTherefore \\(A_n\\) is **composite**; it can never be a prime number.\n\n---\n\n### 6.  Answer  \n\nThere exists **no** non\u2011negative integer \\(n\\) such that \\(A_n\\) is prime.  \nIn other words, the set of solutions is empty.\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Lemma: If $ab$ is a perfect square for coprime integers $a,b$ then they are perfect squares.\n\n Observe that $2x^2+x=3y^2+y$ is equivalent to $y^2 = 2x^2-2y^2+x-y = (x-y)(2x+2y+1)$. Let $d$ be the greatest common divisior of $x-y,2x+2y+1$, we have $d | x-y$ and $d | 2x+2y+1$. On the other hand, observe that $y^2 = (x-y)(2x+2y+1)$. Hence, we must have that $d^2 | y^2$, which implies $d | y$. Since $d | y$ and $d | x-y$, we have $d | x$. Furthermore, since $d | x, d | y, d | 2x+2y+1$, we have that $d | 1$ and thus, $d = 1$, meaning that $x-y,2x+2y+1$ are coprime integers. From the Lemma, we have that $x-y,2x+2y+1$ are perfect squares. Hence proved.", "grading guidelines": "(Partial)\n 1. Correctly factorized $(x-y)(2x+2y+1) = y^2$ but did not get other non-trivial results.\n(Almost)\n 1. Proved the problem but made minor mistakes or did not prove $d = 1$", "level": "pre-IMO", "source": "(Modified) Polish MO 1965 P4", "question": "Let $x$ and $y$ be positive integers satisfying $2x^2 + x = 3y^2 + y$. Prove that $2x+2y+1$ is a perfect square.", "problem_idx": "PB-Basic-018", "type": "Number theory", "model_prediction": {"proof": "Given positive integers \\(x,y\\) satisfying  \n\n\\[\n2x^{2}+x = 3y^{2}+y ,\n\\]\n\nwe shall prove that \\(2x+2y+1\\) is a perfect square.\n\n---\n\n### 1.  A useful identity  \n\nSubtract \\(2y^{2}+y\\) from both sides:\n\n\\[\n2x^{2}+x-2y^{2}-y = 3y^{2}+y-2y^{2}-y = y^{2}.\n\\]\n\nFactor the left\u2011hand side:\n\n\\[\n\\begin{aligned}\n2x^{2}-2y^{2}+x-y &= 2(x^{2}-y^{2})+(x-y)  \\\\\n                 &= 2(x-y)(x+y)+(x-y) \\\\\n                 &= (x-y)\\bigl(2(x+y)+1\\bigr).\n\\end{aligned}\n\\]\n\nHence  \n\n\\[\n\\boxed{(x-y)(2x+2y+1)=y^{2}}\\qquad (1)\n\\]\n\n---\n\n### 2.  Positivity and notation  \n\nBecause \\(y>0\\), the right\u2011hand side \\(y^{2}>0\\).  The factor \\(2x+2y+1\\) is obviously positive for positive \\(x,y\\); therefore from (1) we must have  \n\n\\[\nx-y>0\\quad\\Longrightarrow\\quad x>y.\n\\]\n\nDefine  \n\n\\[\nu = x-y\\;(>0),\\qquad v = 2x+2y+1\\;(>0).\n\\]\n\nEquation (1) becomes  \n\n\\[\nu\\,v = y^{2}. \\tag{2}\n\\]\n\nOur goal is to show that \\(v\\) is a perfect square.\n\n---\n\n### 3.  Proving \\(\\gcd(u,v)=1\\)  \n\nLet \\(d = \\gcd(u,v)\\).  Since \\(d\\mid u\\) and \\(d\\mid v\\),\n\n\\[\nd\\mid (v+2u) = (2x+2y+1)+2(x-y)=4x+1. \\tag{3}\n\\]\n\nWrite \\(u = d\\,u_{1},\\; v = d\\,v_{1}\\) with integers \\(u_{1},v_{1}\\).  Substituting into (2) gives  \n\n\\[\ny^{2}= u v = d^{2}\\,u_{1}v_{1},\n\\]\n\nso \\(d^{2}\\mid y^{2}\\).\n\n**Lemma 1.**  If \\(d^{2}\\mid y^{2}\\) then \\(d\\mid y\\).  \n*Proof.*  Consider the prime factorisation.  For a prime \\(p\\) let \\(e=v_{p}(d)\\) (the exponent of \\(p\\) in \\(d\\)).  Then \\(v_{p}(d^{2})=2e\\).  Since \\(d^{2}\\mid y^{2}\\), we have \\(2e\\le v_{p}(y^{2})=2\\,v_{p}(y)\\), hence \\(e\\le v_{p}(y)\\).  Thus \\(p^{e}\\mid y\\).  Doing this for every prime dividing \\(d\\) yields \\(d\\mid y\\). \u220e\n\nApplying Lemma\u202f1 we obtain \\(d\\mid y\\).\n\nNow \\(d\\mid u\\) and \\(d\\mid y\\) imply  \n\n\\[\nd\\mid (u+y) = (x-y)+y = x. \\tag{4}\n\\]\n\nFrom (4) we get \\(d\\mid 4x\\) (because \\(d\\mid x\\) trivially gives \\(d\\mid 4x\\)).  Combining this with (3) we have  \n\n\\[\nd\\mid 4x\\quad\\text{and}\\quad d\\mid 4x+1.\n\\]\n\nConsequently  \n\n\\[\nd\\mid (4x+1)-4x = 1,\n\\]\n\nso \\(d=1\\).  Thus  \n\n\\[\n\\gcd(u,v)=1. \\tag{5}\n\\]\n\n---\n\n### 4.  Coprime factors of a square are squares  \n\nEquation (2) tells us that \\(u\\,v = y^{2}\\) is a perfect square, and (5) tells us that \\(u\\) and \\(v\\) are coprime.\n\n**Lemma 2.**  If \\(a,b\\) are coprime positive integers and \\(ab\\) is a perfect square, then \\(a\\) and \\(b\\) are themselves perfect squares.  \n*Proof.*  Take prime factorisations.  Because \\(\\gcd(a,b)=1\\), a prime cannot appear in both factorisations.  In the product \\(ab\\) every prime exponent is even (since \\(ab\\) is a square).  Hence the exponent of each prime in \\(a\\) (if it occurs there) is even, and the same holds for \\(b\\).  Therefore \\(a\\) and \\(b\\) are perfect squares. \u220e\n\nApplying Lemma\u202f2 to \\(u\\) and \\(v\\) we conclude that both \\(u\\) and \\(v\\) are perfect squares.\n\n---\n\n### 5.  Conclusion  \n\nIn particular \\(v = 2x+2y+1\\) is a perfect square, which is exactly what we needed to prove. \u220e", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Observe the following: If the greatest power of $2$ that divides $n$ is $2^k$, the greatest odd divisor dividing $n$ is $\\frac{n}{2^k}$.\n\n Let $\\sum_{n=1}^N \\frac{\\delta(n)}{n}$ be $S(N)$.\n\n Let the greatest power of $2$ smaller or equal to $N$ be $2^k$. Then, $2^k \\leq N <2^{k+1}$ holds. Using the observation, we get the following equation:\n $\\sum_{n=1}^{2^k} \\frac{\\delta(n)}{n} = \\sum_{i=0}^{k-1} \\frac{2^{k-1-i}}{2^i} + \\frac{1}{2^k} = 2^{k-1}(\\frac{1-\\frac{1}{4^{k}}}{\\frac{3}{4}}) + \\frac{1}{2^k}$\n\n Now observe that for $2^k < n <2^{k+1}$, $\\frac{\\delta(n)}{n} = \\frac{\\delta(n-2^k)}{n-2^k}$. Therefore, we have that $S(N)= S(N-2^k)+ (\\frac{2^{k+1}}{3})(1-\\frac{1}{4^{k}}) + \\frac{1}{2^k}$\n\n Using this, we have that $S(N) - \\frac{2N}{3} = S(N-2^k) - \\frac{2(N-2^k)}{3} + \\frac{1}{3\\cdot 2^k}$\n\n Therefore, $|S(N) - \\frac{2N}{3}|\\leq \\sum_{k=0}^\\infty \\frac{1}{3\\cdot 2^k} \\leq 1$", "grading guidelines": "(Partial)\n 1. Expressed $\\sum \\delta(n)/n$ as negative powers of 2's and attempted to rearrange the summation.\n(Almost)\n 1. Successfully rearranged the summation, and counted $2^{-k}$ correctly.", "level": "IMO-easy", "source": "(translated) 2003 Korea Winter Program Practice Test", "question": "For any positive integer $n$, let $\\delta(n)$ be the largest odd divisor of $n$. Prove for any $N>0$ that we have\n \\[\n \\left| \\sum_{n=1}^N \\frac{\\delta(n)}{n}- \\frac{2}{3}N \\right| <1.\n \\]", "problem_idx": "PB-Basic-019", "type": "Number theory", "model_prediction": {"proof": "**Notation.**  \nFor a positive integer \\(n\\) let \\(v_{2}(n)\\) be the exponent of \\(2\\) in the prime factorisation of \\(n\\) (i.e. the largest integer \\(k\\) with \\(2^{k}\\mid n\\)).  \nWrite \\(n=2^{v_{2}(n)}\\cdot m\\) where \\(m\\) is odd. The largest odd divisor \\(\\delta (n)\\) is then \\(m\\); indeed removing all factors \\(2\\) leaves the odd part. Hence  \n\n\\[\n\\frac{\\delta (n)}{n}= \\frac{m}{2^{v_{2}(n)}m}= \\frac{1}{2^{v_{2}(n)}}.\n\\]\n\nDefine  \n\n\\[\nf(n)=\\frac{1}{2^{v_{2}(n)}},\\qquad S(N)=\\sum_{n=1}^{N}f(n)=\\sum_{n=1}^{N}\\frac{\\delta (n)}{n}.\n\\]\n\n---\n\n### 1. A recurrence for \\(S(N)\\)\n\nWe prove that for every integer \\(N\\ge 2\\)\n\n\\[\n\\boxed{\\;S(N)=\\left\\lceil \\frac N2\\right\\rceil+\\frac12\\;S\\!\\left(\\left\\lfloor \\frac N2\\right\\rfloor\\right)\\;}. \\tag{1}\n\\]\n\nSeparate the sum into odd and even terms:\n\n\\[\nS(N)=\\sum_{\\substack{1\\le n\\le N\\\\ n\\text{ odd}}}f(n)\\;+\\;\\sum_{\\substack{1\\le n\\le N\\\\ n\\text{ even}}}f(n).\n\\]\n\n*Odd numbers.* If \\(n\\) is odd then \\(v_{2}(n)=0\\), so \\(f(n)=1\\). Thus the first sum is simply the number of odd integers between \\(1\\) and \\(N\\).  \nCounting: if \\(N=2k\\) the odds are \\(1,3,\\dots ,2k-1\\) \u2013 there are \\(k=\\frac N2=\\lceil N/2\\rceil\\);  \nif \\(N=2k+1\\) the odds are \\(1,3,\\dots ,2k+1\\) \u2013 there are \\(k+1=\\frac{N+1}{2}=\\lceil N/2\\rceil\\).  \nHence  \n\n\\[\n\\sum_{\\substack{1\\le n\\le N\\\\ n\\text{ odd}}}f(n)=\\left\\lceil \\frac N2\\right\\rceil .\n\\]\n\n*Even numbers.* An even \\(n\\) can be written uniquely as \\(n=2k\\) with \\(k\\in\\mathbb N\\). Then  \n\n\\[\nv_{2}(2k)=1+v_{2}(k)\\quad\\Longrightarrow\\quad \nf(2k)=\\frac{1}{2^{1+v_{2}(k)}}=\\frac12\\cdot\\frac{1}{2^{v_{2}(k)}}=\\frac12 f(k).\n\\]\n\nWhen \\(k\\) runs from \\(1\\) to \\(\\left\\lfloor N/2\\right\\rfloor\\), the numbers \\(2k\\) run through all even integers \\(\\le N\\). Therefore  \n\n\\[\n\\sum_{\\substack{1\\le n\\le N\\\\ n\\text{ even}}}f(n)\n   =\\sum_{k=1}^{\\lfloor N/2\\rfloor}f(2k)\n   =\\frac12\\sum_{k=1}^{\\lfloor N/2\\rfloor}f(k)\n   =\\frac12\\,S\\!\\left(\\lfloor N/2\\rfloor\\right).\n\\]\n\nPutting the two parts together gives (1). (The recurrence is stated for \\(N\\ge2\\); the case \\(N=1\\) will be handled directly as a base case.)\n\n---\n\n### 2. Induction proof of the required inequality\n\nWe prove by **strong induction** on \\(N\\) that for every positive integer \\(N\\)\n\n\\[\n\\bigl|S(N)-\\tfrac23 N\\bigr|<1. \\tag{\u2217}\n\\]\n\n**Base case \\(N=1\\).** \\(S(1)=f(1)=1\\) and \\(|1-\\frac23|=\\frac13<1\\); so \\((\u2217)\\) holds.\n\n**Induction step.** Assume \\(N\\ge 2\\) and that \\((\u2217)\\) is true for **all** positive integers \\(m<N\\).  \nIn particular it holds for  \n\n\\[\nm=\\left\\lfloor \\frac N2\\right\\rfloor,\n\\]\n\nbecause \\(\\lfloor N/2\\rfloor < N\\) for \\(N\\ge2\\). Write this as  \n\n\\[\nS(m)=\\frac23\\,m+e\\qquad\\text{with }|e|<1. \\tag{2}\n\\]\n\nNow apply recurrence (1) and substitute (2):\n\n\\[\n\\begin{aligned}\nS(N)&=\\left\\lceil \\frac N2\\right\\rceil+\\frac12 S(m) \\\\\n    &=\\left\\lceil \\frac N2\\right\\rceil+\\frac12\\!\\left(\\frac23 m+e\\right)\\\\[2mm]\n    &=\\left\\lceil \\frac N2\\right\\rceil+\\frac13 m+\\frac e2. \\tag{3}\n\\end{aligned}\n\\]\n\nTo simplify (3) we express the ceiling and the floor in terms of the parity of \\(N\\).  \nSet  \n\n\\[\n\\varepsilon = N\\bmod 2\\in\\{0,1\\},\n\\]\n\ni.e. \\(\\varepsilon=0\\) when \\(N\\) is even and \\(\\varepsilon=1\\) when \\(N\\) is odd.  \nA direct check gives  \n\n\\[\n\\left\\lceil \\frac N2\\right\\rceil = \\frac N2+\\frac\\varepsilon2,\\qquad\n\\left\\lfloor \\frac N2\\right\\rfloor = \\frac N2-\\frac\\varepsilon2.\n\\]\n\nSince \\(m=\\lfloor N/2\\rfloor = \\frac N2-\\frac\\varepsilon2\\), inserting these expressions into (3) yields  \n\n\\[\n\\begin{aligned}\nS(N)&=\\Bigl(\\frac N2+\\frac\\varepsilon2\\Bigr)\n      +\\frac13\\!\\Bigl(\\frac N2-\\frac\\varepsilon2\\Bigr)+\\frac e2\\\\[2mm]\n    &=\\frac N2+\\frac\\varepsilon2+\\frac N6-\\frac\\varepsilon6+\\frac e2\\\\[2mm]\n    &=\\Bigl(\\frac N2+\\frac N6\\Bigr)+\\Bigl(\\frac\\varepsilon2-\\frac\\varepsilon6\\Bigr)+\\frac e2\\\\[2mm]\n    &=\\frac{2N}{3}+\\frac\\varepsilon3+\\frac e2.\n\\end{aligned}\n\\]\n\nConsequently  \n\n\\[\nS(N)-\\frac23 N = \\frac\\varepsilon3+\\frac e2. \\tag{4}\n\\]\n\nTaking absolute values and using the triangle inequality,\n\n\\[\n\\bigl|S(N)-\\tfrac23 N\\bigr|\n   =\\Bigl|\\frac\\varepsilon3+\\frac e2\\Bigr|\n   \\le \\frac\\varepsilon3+\\frac{|e|}{2}\n   < \\frac\\varepsilon3+\\frac12\\qquad(\\text{because }|e|<1). \\tag{5}\n\\]\n\nNow examine the two possibilities for \\(\\varepsilon\\):\n\n* If \\(\\varepsilon=0\\) (i.e. \\(N\\) even), the right\u2011hand side of (5) equals \\(1/2<1\\).  \n* If \\(\\varepsilon=1\\) (i.e. \\(N\\) odd), it equals \\(\\frac13+\\frac12 = \\frac56<1\\).\n\nIn either case we obtain \\(\\bigl|S(N)-\\frac23 N\\bigr|<1\\), which is exactly \\((\u2217)\\) for this \\(N\\).\n\nThus the induction step is proved for every \\(N\\ge2\\).\n\n**Conclusion.** The base case \\(N=1\\) holds, and the induction step shows that if \\((\u2217)\\) is true for all smaller positive integers then it is true for \\(N\\). By the principle of strong induction, \\((\u2217)\\) holds for **all** positive integers \\(N\\). \u220e\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Step 1. Lemma. If for a prime $p$, $p\\equiv 2 \\pmod{3}$, then $p$ cannot divide $q^2-q+1$ for any prime $q$.\n Proof. Assume $p \\mid q^2-q+1$ (so $p$ is odd); then $p \\mid q^3+1$, so $q^3 \\equiv -1 \\pmod{p}$, thus $q^6 \\equiv 1 \\pmod{p}$. Let $\\nu$ be the multiplicative order of $q$ modulo $p$; then $\\nu \\mid 6$, and $\\nu \\mid p-1$ (by Fermat's Little theorem). That forces $\\nu = 2$ (since $\\nu = 1$ means $q \\equiv 1 \\pmod{p}$, so $-1 \\equiv q^3 \\equiv 1 \\pmod{p}$, forcing $p=2$, absurd), and so $q \\equiv -1 \\pmod{p}$. But then $0\\equiv q^2-q+1 \\equiv 1 + 1 + 1 = 3 \\pmod{p}$, forcing $p=3$, absurd.\n\n Step 2. Easily $a>3$, then $a^2=ab+b^3+1>2b+b^3+1>2b+b^2+1=(b+1)^2$, hence $a>b+1$; but then from $a\\mid b^3+1=(b+1)(b^2-b+1)$ follows that $a\\mid b^2-b+1$, hence $a\\equiv 1 \\pmod{3}$.\n\n Step 3. If $b\\equiv 1\\pmod{3}$, then $1=a^2-ab-b^3 \\equiv 1-1-1 = -1 \\pmod{3}$, a contradiction. If $b\\equiv 2\\pmod{3}$, then $1=a^2 - ab - b^3 \\equiv 1 - 2 + 1 = 0 \\pmod{3}$, a contradiction again. Hence $b=3$ (the only moment where the primality of $b$ is actually used), and from this we easily get $a=7$. So $(a,b)=(7,3)$ is the only solution.", "grading guidelines": "(Partial)\n 1. Proved that $a$ should divide $b^2 - b+1$. Also partial points for proving that $a-2$ cannot be a multiple of $3$.\n(Almost)\n 1. Verification contains minor mistakes only.", "level": "IMO-easy", "source": "(Modified) Tuymaada 2013, Seniors, P6", "question": "Find all pairs of primes $(a, b)$ such that $a^2 - ab - b^3 = 1$.", "problem_idx": "PB-Basic-020", "type": "Number theory", "model_prediction": {"proof": "1. **Show \\(a>b\\).**  \n   If \\(a\\le b\\) then \\(a-b\\le0\\), hence \\(a(a-b)\\le0\\). Consequently  \n   \\[\n   a^{2}-ab-b^{3}=a(a-b)-b^{3}\\le -b^{3}<0,\n   \\]  \n   contradicting \\(a^{2}-ab-b^{3}=1\\). Therefore \\(a>b\\).\n\n2. **Factor the equation.**  \n   \\[\n   a^{2}-ab=b^{3}+1\\quad\\Longrightarrow\\quad a(a-b)=(b+1)(b^{2}-b+1).\\tag{\u2217}\n   \\]\n\n3. **Prove that \\(a\\) cannot divide \\(b+1\\).**  \n   Assume for contradiction that \\(a\\mid(b+1)\\).  \n   Because \\(a>b\\) and both are integers, \\(a\\ge b+1\\).  \n   Since \\(a\\mid(b+1)\\) we also have \\(a\\le b+1\\). Hence \\(a=b+1\\).  \n\n   Substituting \\(a=b+1\\) into the original equation gives  \n   \\[\n   (b+1)^{2}-(b+1)b-b^{3}=1\n   \\;\\Longrightarrow\\; b^{2}+2b+1-b^{2}-b-b^{3}=1\n   \\;\\Longrightarrow\\; b-b^{3}=0\n   \\;\\Longrightarrow\\; b(1-b^{2})=0.\n   \\]  \n   The only integer solutions are \\(b=0,1,-1\\); none is a prime. This contradicts the hypothesis that \\(b\\) is prime. Thus \\(a\\nmid(b+1)\\).\n\n4. **Deduce \\(a\\mid(b^{2}-b+1)\\).**  \n   Equation \\((\u2217)\\) tells us that the prime \\(a\\) divides the product \\((b+1)(b^{2}-b+1)\\).  \n   Because we have just shown \\(a\\nmid(b+1)\\), Euclid\u2019s lemma forces  \n   \\[\n   a\\mid(b^{2}-b+1).\n   \\]\n\n5. **Introduce the positive integer \\(k\\).**  \n   Set  \n   \\[\n   k=\\frac{b^{2}-b+1}{a}\\in\\mathbb{N}.\n   \\]  \n   Then  \n   \\[\n   b^{2}-b+1=ak.\\tag{1}\n   \\]\n\n6. **Obtain a second relation from \\((\u2217)\\).**  \n   Using \\((\u2217)\\) together with (1),  \n   \\[\n   a(a-b)=(b+1)ak\\;\\Longrightarrow\\;a-b=k(b+1).\\tag{2}\n   \\]  \n   From (2) we can write  \n   \\[\n   a=b+k(b+1).\\tag{2'}\n   \\]\n\n7. **Combine (1) and (2\u2032) to derive a key equation.**  \n   Substitute (2\u2032) into (1):  \n   \\[\n   \\bigl(b+k(b+1)\\bigr)k=b^{2}-b+1.\n   \\]  \n   Expanding and simplifying,  \n   \\[\n   bk+k^{2}(b+1)=b^{2}-b+1,\n   \\]  \n   \\[\n   bk+k^{2}b+k^{2}=b^{2}-b+1,\n   \\]  \n   \\[\n   bk(k+1)+k^{2}=b^{2}-b+1.\n   \\]  \n   Rearranging,  \n   \\[\n   b^{2}-b+1-k^{2}=bk(k+1).\n   \\]  \n   Since \\(b^{2}-b=b(b-1)\\),  \n   \\[\n   b(b-1)+(1-k^{2})=bk(k+1),\n   \\]  \n   \\[\n   b(b-1)-bk(k+1)=k^{2}-1,\n   \\]  \n   \\[\n   b\\bigl[(b-1)-k(k+1)\\bigr]=k^{2}-1.\\tag{3}\n   \\]\n\n8. **Analyse the possible values of \\(k\\).**  \n\n   **Case \\(k=1\\).**  \n   Equation (3) becomes  \n   \\[\n   b\\bigl[(b-1)-2\\bigr]=0\\;\\Longrightarrow\\;b(b-3)=0.\n   \\]  \n   Because \\(b\\) is a prime, \\(b\\neq0\\); thus \\(b=3\\).  \n   From (2\u2032) we obtain \\(a=3+1\\cdot(3+1)=7\\).  \n   Both \\(3\\) and \\(7\\) are prime, and a direct check confirms  \n   \\[\n   7^{2}-7\\cdot3-3^{3}=49-21-27=1.\n   \\]  \n   Hence \\((a,b)=(7,3)\\) is a solution.\n\n   **Case \\(k\\ge2\\).**  \n   Let \\(d=(b-1)-k(k+1)\\). Then (3) reads  \n   \\[\n   b\\,d=k^{2}-1.\\tag{4}\n   \\]  \n   For \\(k\\ge2\\) the right\u2011hand side \\(k^{2}-1\\) is positive, so \\(b\\,d>0\\).  \n   Because \\(b>0\\) (a prime), we must have \\(d>0\\); consequently \\(d\\ge1\\) (as an integer).  \n\n   From the definition of \\(d\\),  \n   \\[\n   b=d+1+k(k+1).\\tag{5}\n   \\]  \n   Since \\(d\\ge1\\), (5) yields  \n   \\[\n   b\\ge1+1+k(k+1)=k(k+1)+2.\\tag{6}\n   \\]  \n\n   Now estimate the left\u2011hand side of (4):  \n   \\[\n   b\\,d\\ge b\\cdot1=b\\quad(\\text{because }d\\ge1)\n   \\;\\ge\\;k(k+1)+2\\quad(\\text{by (6)}).\n   \\]  \n\n   For \\(k\\ge2\\) we compare this lower bound with the right\u2011hand side:  \n   \\[\n   k(k+1)+2 = k^{2}+k+2 > k^{2}-1,\n   \\]  \n   because \\((k^{2}+k+2)-(k^{2}-1)=k+3>0\\).  \n   Therefore \\(b\\,d\\ge k(k+1)+2 > k^{2}-1\\), contradicting (4) which requires equality.  \n   Hence no solution exists when \\(k\\ge2\\).\n\n9. **Conclusion.**  \n   The only admissible value is \\(k=1\\), giving the unique prime pair \\((a,b)=(7,3)\\).\n\nThus the equation \\(a^{2}-ab-b^{3}=1\\) has exactly one solution in primes:  \n\n\\[\n\\boxed{(a,b)=(7,3)}.\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "We will prove this using induction. Note that $x_{2}=2^{6}+2=66$\n which is divisible by $x_{1}$ and $x_{3}=2^{66}+2=2(2^{65}+1)$,\n which is divisible by $2(2^{5}+1)=2^{6}+2=x_{2}$.\n\n\n For $a,b\\in\\mathbb{N}$, it is well known that $2^{a}+1|2^{ab}+1$\n and $2^{a}-1|2^{ab}-1$ if $2\\not|b$.\n\n\n We will prove the result by induction. Note that $\\nu_{2}(x_{i})=1$,\n so $\\frac{x_{n-1}}{x_{n-2}}$ is odd. Also, note that $x_{1}|x_{2}$,\n as $2|6$, and $x_{2}|x_{3}$, as $6|66$.\n\n $x_{n}|x_{n+1}\\Longleftrightarrow2^{x_{n-1}-1}+1|2^{x_{n}-1}+1\\Longleftarrow x_{n-1}-1|x_{n}-1\\Longleftrightarrow2^{x_{n-2}}+1|2^{x_{n-1}}+1\\Longleftarrow x_{n-2}|x_{n-1}\\text{ and that \\ensuremath{\\frac{x_{n-1}}{x_{n-2}}} is odd.}$\n Thus $x_{n-2}|x_{n-1}\\implies x_{n}|x_{n+1}$, we can prove by induction\n that $x_{i}|x_{i+1}$ for all $i\\in\\mathbb{N}$.", "grading guidelines": "(Partial)\n 1. Proved $x_{n-1}-1|x_{n}-1$.\n(Almost)\n 1. Solution is almost complete, but made minor mistakes which are not negligible.", "level": "IMO-easy", "source": "(Modified) ELMO 2015 P1", "question": "Define the sequence $x_1 = 6$ and $x_n = 2^{x_{n-1}} + 2$ for all integers $n \\ge 2$. Prove that $x_{n-1}$ divides $x_n$ for all integers $n \\ge 2$.", "problem_idx": "PB-Basic-021", "type": "Number theory", "model_prediction": {"proof": "**Notation.**  \n\\(x_{1}=6\\) and \\(x_{n}=2^{\\,x_{n-1}}+2\\) for \\(n\\ge 2\\).  \nFor an integer \\(m\\) we denote by \\(v_{2}(m)\\) the exponent of \\(2\\) in the prime factorisation of \\(m\\) (the 2\u2011adic valuation); \\(v_{2}(m)=0\\) means that \\(m\\) is odd.\n\n---\n\n### 1.  Basic properties of the sequence  \n\n**Lemma 1.**  For every \\(n\\ge 1\\)  \n\u2003(i) \\(x_{n}\\) is even, and  \n\u2003(ii) \\(v_{2}(x_{n})=1\\).  \n\n*Proof.*  \n- *Evenness.*  \\(x_{1}=6\\) is even.  Assume \\(x_{n-1}\\) is even. Then \\(2^{\\,x_{n-1}}\\) is even, hence \\(x_{n}=2^{\\,x_{n-1}}+2\\) is even.  By induction all \\(x_{n}\\) are even.  \n- *2\u2011adic valuation.*  \\(x_{1}=6=2\\cdot 3\\) gives \\(v_{2}(x_{1})=1\\).  \n  For \\(n\\ge 2\\) we have \\(x_{n}=2^{\\,x_{n-1}}+2\\).  Because \\(x_{n-1}\\) is even and \\(x_{n-1}\\ge 2\\), the number \\(2^{\\,x_{n-1}}\\) is divisible by \\(4\\).  Consequently  \n  \\[\n  x_{n}=2^{\\,x_{n-1}}+2=2\\bigl(2^{\\,x_{n-1}-1}+1\\bigr)\n  \\]\n  and \\(2^{\\,x_{n-1}-1}\\) is even (since \\(x_{n-1}-1\\) is odd), so \\(2^{\\,x_{n-1}-1}+1\\) is odd.  Hence \\(v_{2}(x_{n})=1\\). \u220e  \n\nIn particular, every term satisfies \\(x_{n}\\ge 2\\) and \\(x_{n}-1\\) is odd.\n\n---\n\n### 2.  Two auxiliary statements  \n\nFor each \\(n\\ge 1\\) we define  \n\n\\[\nP(n):\\; x_{n}\\mid\\bigl(2^{\\,x_{n}}+2\\bigr),\\qquad \nQ(n):\\; 2^{\\,x_{n}}\\equiv -1\\pmod{x_{n}-1}.\n\\]\n\nWe shall prove **by induction** that \\(P(n)\\) and \\(Q(n)\\) hold for all \\(n\\).\n\n---\n\n#### Base case \\(n=1\\)\n\n\\(x_{1}=6\\).  \n\n- \\(2^{6}+2=66=6\\cdot 11\\), thus \\(6\\mid 66\\); hence \\(P(1)\\) is true.  \n- \\(2^{6}=64\\) and \\(6-1=5\\); \\(64\\equiv 4\\equiv -1\\pmod 5\\); hence \\(Q(1)\\) is true.\n\n---\n\n#### Inductive step  \n\nAssume that for some \\(n\\ge 1\\) both \\(P(n)\\) and \\(Q(n)\\) are true.  \nSet  \n\n\\[\na:=x_{n},\\qquad b:=x_{n+1}=2^{a}+2 .\n\\]\n\nFrom \\(P(n)\\) we have \\(a\\mid 2^{a}+2\\); therefore we can write  \n\n\\[\n2^{a}+2 = a\\cdot k\\qquad\\text{with }k:=\\frac{b}{a}\\in\\mathbb N .\n\\]\n\n---\n**Step 1 \u2013  \\(k\\) is odd.**  \nBy Lemma\u202f1, \\(v_{2}(a)=1\\) and, because \\(a\\) is even and \\(a\\ge 2\\), \\(2^{a}\\) is divisible by \\(4\\); hence \\(b=2^{a}+2\\equiv2\\pmod4\\) and \\(v_{2}(b)=1\\).  \nSince \\(b=a\\cdot k\\), the 2\u2011adic valuation is additive:  \n\n\\[\nv_{2}(b)=v_{2}(a)+v_{2}(k)\\;\\Longrightarrow\\;1=1+v_{2}(k)\\;\\Longrightarrow\\;v_{2}(k)=0,\n\\]\n\nso \\(k\\) is odd.\n\n---\n**Step 2 \u2013  \\(k\\equiv1\\pmod{a-1}\\).**  \n\\(Q(n)\\) gives \\(2^{a}\\equiv-1\\pmod{a-1}\\); therefore  \n\n\\[\nb = 2^{a}+2 \\equiv -1+2 = 1\\pmod{a-1}.\n\\]\n\nBecause \\(a\\equiv1\\pmod{a-1}\\) we also have  \n\n\\[\nb = a\\cdot k \\equiv 1\\cdot k \\equiv k\\pmod{a-1}.\n\\]\n\nComparing the two congruences yields \\(k\\equiv1\\pmod{a-1}\\).\n\n---\n**Step 3 \u2013  Strengthening to \\(k\\equiv1\\pmod{2(a-1)}\\).**  \nWrite \\(k=1+(a-1)t\\).  Since \\(k\\) is odd and \\(a-1\\) is odd, \\(t\\) must be even; otherwise \\(1+(a-1)t\\) would be even.  Thus \\(t=2u\\) and  \n\n\\[\nk = 1+2(a-1)u\\qquad\\Longrightarrow\\qquad 2(a-1)\\mid(k-1).\n\\]\n\n---\n**Step 4 \u2013  A useful divisor \\(s\\).**  \nDefine \\(s:=2^{a-1}+1\\).  Then \\(b = 2^{a}+2 = 2s\\).  \nClearly \\(2^{a-1}\\equiv-1\\pmod s\\); squaring gives  \n\n\\[\n2^{2(a-1)}\\equiv1\\pmod s .\n\\]\n\nBecause \\(k-1\\) is a multiple of \\(2(a-1)\\), say \\(k-1=2(a-1)u\\), we obtain  \n\n\\[\n2^{\\,k-1}= \\bigl(2^{2(a-1)}\\bigr)^{u}\\equiv 1^{u}=1\\pmod s,\n\\]\n\nhence \\(s\\mid\\bigl(2^{\\,k-1}-1\\bigr)\\).\n\n---\n**Step 5 \u2013  Expressing \\(2^{b}+2\\) and reducing the problem.**  \n\n\\[\n2^{b}+2 = (2^{a})^{k}+2 = (a k-2)^{k}+2 .\n\\]\n\nExpand \\((a k-2)^{k}\\) with the binomial theorem:\n\n\\[\n(a k-2)^{k}= \\sum_{i=0}^{k}\\binom{k}{i}(a k)^{i}(-2)^{k-i}\n           = (a k)\\!\\sum_{i=1}^{k}\\binom{k}{i}(a k)^{i-1}(-2)^{k-i}+(-2)^{k}\n           = b\\,M + (-2)^{k},\n\\]\n\nwhere \\(M\\) is an integer. Consequently  \n\n\\[\n2^{b}+2 = b\\,M + \\bigl((-2)^{k}+2\\bigr).\n\\]\n\nSince \\(k\\) is odd, \\((-2)^{k} = -2^{k}\\) and therefore  \n\n\\[\n(-2)^{k}+2 = -2^{k}+2 = -(2^{k}-2).\n\\]\n\nThus  \n\n\\[\nb\\mid 2^{b}+2 \\;\\Longleftrightarrow\\; b\\mid (2^{k}-2).\n\\]\n\n---\n**Step 6 \u2013  From \\(s\\mid(2^{k-1}-1)\\) to \\(b\\mid(2^{k}-2)\\).**  \n\nRecall \\(b=2s\\).  The divisibility \\(b\\mid(2^{k}-2)\\) is equivalent to  \n\n\\[\n2s \\mid 2\\bigl(2^{k-1}-1\\bigr)\n\\;\\Longleftrightarrow\\; s \\mid \\bigl(2^{k-1}-1\\bigr)\n\\]\n\n(because \\(\\gcd(2,s)=1\\); indeed \\(s\\) is odd).  \nStep\u202f4 already gave \\(s\\mid(2^{k-1}-1)\\).  Hence \\(b\\mid(2^{k}-2)\\) and therefore \\(b\\mid 2^{b}+2\\).  This proves \\(P(n+1)\\).\n\n---\n**Step 7 \u2013  Proving \\(Q(n+1)\\).**  \n\n\\(b-1 = 2^{a}+1\\).  Trivially \\(2^{a}\\equiv-1\\pmod{2^{a}+1}\\).  Raising this congruence to the \\(k\\)-th power (and using that \\(k\\) is odd) yields  \n\n\\[\n(2^{a})^{k}\\equiv (-1)^{k} = -1 \\pmod{2^{a}+1}.\n\\]\n\nBut \\((2^{a})^{k}=2^{a k}=2^{b}\\).  Hence  \n\n\\[\n2^{b}\\equiv -1\\pmod{b-1},\n\\]\n\nwhich is exactly \\(Q(n+1)\\).\n\n---\n\nBecause we have shown that \\(P(n+1)\\) and \\(Q(n+1)\\) follow from \\(P(n),Q(n)\\), the induction is complete.  Consequently **\\(P(n)\\) and \\(Q(n)\\) hold for every positive integer \\(n\\).**\n\n---\n\n### 3.  The required divisibility  \n\nFor any integer \\(n\\ge 2\\) we apply \\(P(n-1)\\) (which is valid since \\(n-1\\ge 1\\)):\n\n\\[\nx_{n-1}\\;\\big|\\;2^{\\,x_{n-1}}+2 = x_{n}.\n\\]\n\nThus \\(x_{n-1}\\) divides \\(x_{n}\\) for all \\(n\\ge 2\\), as was to be proved. \u220e", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Since $0$ is in $S$, there exists an integer $c$ such that $P(c)=0$.\n We can write $P(x)=(x-c)^{n}Q(x)$ for some positive integer $n$\n and integer coefficient polynomial $Q$ such that $Q(c)\\ne0$.\n\n \\noindent Pick a prime number $q$ bigger than $|Q(c)|,|Q(c+1)|,|Q(c-1)|$.\n For every positive integer $m$, there exists an integer $a$ such\n that $P(a)=q^{2024m}$. Then, $(a-c)$ is a power of $q$.\n\n \\noindent If it is 1, it is a contradiction to the fact that $|Q(c+1)|,|Q(c-1)|<q$.\n Therefore, $q$ divides $a-c$ and so $Q(a)-Q(c)$ is a multiple of\n $q$, which shows that $Q(a)$ is not a multiple of $q$. Therefore,\n $|Q(a)|=1$ and $|(a-c)^{n}|=q^{2024m}$. Therefore, $|Q(x)|=1$ for\n infinitely many integers $x$ and so $Q(x)=1$ or $Q(x)=-1$. Then\n $|P(x)|$ is always a $n$th power.\n\n \\noindent In this case we can easily see that $n$ needs to divide\n $2024$. Moreover if $n$ is even and $Q(x)=-1$, $P$ is always negative\n or 0 . Hence, the only possible solutions are of the form: $P(x)=(\\pm(x+c))^{n}$\n for some divisor $n$ of 2024. We can easily see that this satisfies\n the problem conditions.", "grading guidelines": "(Partial)\n 1. Observed that there must be an integer root $c$ and tried to analyze $P$ in terms of it (e.g. reducing without loss of generality to the case $P(0)=0$).\n (Almost)\n 1. Verification contains minor mistakes only.", "level": "IMO-easy", "source": "(Modified) ELMO 2023 Shortlist N1", "question": "Let $S=\\{0,1,2^{2024},3^{2024},\\ldots\\}$ be the set of all perfect\n 2024-th powers. Find all polynomials $P$ with integer coefficients\n such that $P(x)=s$ has an integer solution $x$ for every $s\\in S$.", "problem_idx": "PB-Basic-022", "type": "Number theory", "model_prediction": {"proof": "Let \\(k = 2024\\).  \nWe have to find all \\(P\\in\\mathbb Z[x]\\) such that for every non\u2011negative integer \\(n\\) there exists an integer \\(x\\) with  \n\n\\[\nP(x)=n^{\\,k}.\n\\]\n\n---\n### 1.  First observations  \n\n\\(P\\) cannot be constant (otherwise it could not take both the values \\(0\\) and \\(1\\)).  \nLet \\(\\operatorname{cont}(P)\\) be the greatest common divisor of the coefficients of \\(P\\).  \nIf \\(d=|\\operatorname{cont}(P)|>1\\) then every value \\(P(x)\\) is a multiple of \\(d\\); but \\(1^{k}=1\\) is not divisible by any prime divisor of \\(d\\) \u2013 contradiction.  \nHence \\(\\operatorname{cont}(P)=\\pm1\\); i.e. \\(P\\) is **primitive**.\n\n---\n### 2.  Factorisation in \\(\\mathbb Z[x]\\)  \n\n\\(\\mathbb Z[x]\\) is a unique factorisation domain.  Write  \n\n\\[\nP(x)=u\\prod_{i=1}^{r}f_i(x)^{e_i},\n\\]\n\nwhere  \n\n* \\(u=\\pm1\\);  \n* each \\(f_i\\) is a **primitive irreducible** polynomial with integer coefficients;  \n* the \\(f_i\\) are pairwise non\u2011associate (hence coprime in \\(\\mathbb Q[x]\\));  \n* \\(e_i\\ge 1\\).\n\n---\n### 3.  Only one irreducible factor can appear  \n\nAssume, for a contradiction, that \\(r\\ge 2\\).  \nChoose two distinct factors, say \\(f=f_1,\\;g=f_2\\).\n\n---\n#### 3.1  B\u00e9zout relation  \n\nBecause \\(f\\) and \\(g\\) are coprime in \\(\\mathbb Q[x]\\), there exist polynomials \\(U,V\\in\\mathbb Q[x]\\) with  \n\n\\[\nUf+Vg=1 .\n\\]\n\nMultiplying by a common denominator we obtain \\(A,B\\in\\mathbb Z[x]\\) and a non\u2011zero integer \\(D\\) such that  \n\n\\[\nA(x)f(x)+B(x)g(x)=D\\qquad(\\forall x\\in\\mathbb Z). \\tag{1}\n\\]\n\n---\n#### 3.2  Using the hypothesis for primes  \n\nFor every prime \\(p\\) the hypothesis furnishes an integer \\(x_p\\) with  \n\n\\[\nP(x_p)=p^{\\,k}. \\tag{2}\n\\]\n\nIf \\(p\\neq q\\) then \\(x_p\\neq x_q\\); otherwise we would have \\(p^{k}=q^{k}\\), impossible.  \nThus the set \\(\\{x_p\\mid p\\text{ prime}\\}\\) is infinite and its elements are pairwise distinct.\n\n---\n#### 3.3  Prime divisors of the values of \\(f\\) and \\(g\\)  \n\nFrom (2) and the factorisation of \\(P\\) we have  \n\n\\[\nu\\,f(x_p)^{e_1}g(x_p)^{e_2}\\!\\prod_{i\\ge3}f_i(x_p)^{e_i}=p^{k}.\n\\]\n\nHence **every** prime divisor of any of the integers \\(f(x_p),g(x_p),\\dots\\) must be \\(p\\) (otherwise a different prime would divide the left hand side and consequently \\(p^{k}\\)).  \nIn particular:\n\n* If \\(|f(x_p)|>1\\) then \\(p\\mid f(x_p)\\);  \n* If \\(|g(x_p)|>1\\) then \\(p\\mid g(x_p)\\).\n\n---\n#### 3.4  Eliminating the possibilities \\(|f(x_p)|=0,1\\) and \\(|g(x_p)|=0,1\\)\n\nThe equations  \n\n\\[\nf(x)=0,\\;f(x)=\\pm1,\\;g(x)=0,\\;g(x)=\\pm1\n\\]\n\nare non\u2011constant polynomial equations; therefore each of them has only **finitely many** integer solutions.  \nSince the \\(x_p\\) are infinitely many and distinct, for all but finitely many primes \\(p\\) we have  \n\n\\[\n|f(x_p)|\\ge 2\\quad\\text{and}\\quad|g(x_p)|\\ge 2 .\n\\]\n\nFor those primes we consequently obtain \\(p\\mid f(x_p)\\) and \\(p\\mid g(x_p)\\).\n\n---\n#### 3.5  Contradiction via the B\u00e9zout identity  \n\nSubstituting \\(x=x_p\\) into (1) gives  \n\n\\[\nD = A(x_p)f(x_p)+B(x_p)g(x_p).\n\\]\n\nBecause \\(p\\) divides both \\(f(x_p)\\) and \\(g(x_p)\\), the right hand side is divisible by \\(p\\); hence \\(p\\mid D\\).  \nThus **infinitely many distinct primes divide the fixed non\u2011zero integer \\(D\\)**, which is impossible (an integer has only finitely many prime divisors).\n\nThe contradiction shows that our assumption \\(r\\ge2\\) is false; therefore  \n\n\\[\nr=1\\qquad\\Longrightarrow\\qquad P(x)=u\\,f(x)^{e},\n\\]\n\nwhere \\(f\\) is primitive irreducible, \\(e\\ge1\\) and \\(u=\\pm1\\).\n\n---\n### 4.  Getting rid of the sign factor  \n\n*If \\(e\\) is even* then \\(f(x)^{e}\\ge0\\) for every integer \\(x\\).  \nBecause \\(P\\) takes the positive value \\(1\\) (since \\(1\\in S\\)), we must have \\(u=1\\); otherwise \\(P(x)\\le0\\) for all \\(x\\).\n\n*If \\(e\\) is odd and \\(u=-1\\)* we replace \\(f\\) by \\(-f\\).  \nThe polynomial \\(-f\\) is still primitive irreducible, and \\((-f)^{e}=-f^{e}=P\\).  \nThus after this possible change we may **assume**  \n\n\\[\n\\boxed{P(x)=f(x)^{e}},\\qquad f\\in\\mathbb Z[x]\\text{ primitive irreducible},\\; e\\ge1 .\n\\]\n\n---\n### 5.  The exponent \\(e\\) divides \\(k\\)  \n\n\\(2^{k}\\in S\\); hence there exists an integer \\(a\\) with  \n\n\\[\nP(a)=2^{k}\\;\\Longrightarrow\\;f(a)^{e}=2^{k}.\n\\]\n\nFactorising \\(f(a)\\) as \\(\\pm 2^{t}\\cdot w\\) with \\(w\\) odd, we obtain  \n\n\\[\n(\\pm1)^{e}\\,2^{te}\\,w^{e}=2^{k}.\n\\]\n\nThe right hand side contains only the prime \\(2\\); therefore \\(w^{e}=1\\) and \\((\\pm1)^{e}=1\\).  \nConsequently \\(w=1\\) and \\(|f(a)|=2^{t}\\) with \\(te=k\\).  \nThus \\(e\\mid k\\).  Set  \n\n\\[\nm=\\frac{k}{e}\\in\\mathbb N .\n\\]\n\n---\n### 6.  A reduced condition for \\(f\\)  \n\nTake any \\(n\\in\\mathbb N_{0}\\).  By hypothesis there is an integer \\(x\\) such that  \n\n\\[\nP(x)=n^{k}\\;\\Longrightarrow\\;f(x)^{e}=n^{e m}.\n\\]\n\nTaking absolute values gives  \n\n\\[\n|f(x)|^{e}=n^{e m}=(n^{m})^{e}.\n\\]\n\nBecause the map \\(t\\mapsto t^{e}\\) is strictly increasing on non\u2011negative integers, we deduce  \n\n\\[\n|f(x)|=n^{m}. \\tag{3}\n\\]\n\n---\n### 7.  \\(f\\) has an integer root  \n\nChoosing \\(n=0\\) in (3) yields \\(|f(x)|=0\\) for some integer \\(x\\); hence \\(f(x)=0\\).  \nThus \\(f\\) possesses an integer root \\(r\\).\n\n---\n### 8.  \\(f\\) must be linear  \n\nSince \\(f(r)=0\\) and \\(x-r\\) is monic, the Factor Theorem gives  \n\n\\[\nf(x)=(x-r)\\,g(x),\\qquad g(x)\\in\\mathbb Z[x].\n\\]\n\n\\(f\\) is irreducible; therefore one of the factors must be a unit in \\(\\mathbb Z[x]\\).  \nThe only units are \\(\\pm1\\), and \\(x-r\\) is non\u2011constant, so \\(g(x)=\\pm1\\).  Consequently  \n\n\\[\nf(x)=\\varepsilon\\,(x-r),\\qquad \\varepsilon=\\pm1.\n\\]\n\nWriting \\(c=-\\varepsilon r\\) we obtain the familiar linear form  \n\n\\[\nf(x)=\\varepsilon x + c .\n\\]\n\n---\n### 9.  Form of \\(P\\)\n\nPutting everything together,  \n\n\\[\nP(x)=f(x)^{e}=(\\varepsilon x + c)^{e},\n\\]\n\nand we already know that \\(e\\mid k\\).\n\n---\n### 10.  Verification that all such polynomials work  \n\nLet \\(\\varepsilon=\\pm1\\), \\(c\\in\\mathbb Z\\) and let \\(d\\) be any positive divisor of \\(k\\).  \nDefine \\(P(x)=(\\varepsilon x + c)^{d}\\).  For an arbitrary \\(n\\in\\mathbb N_{0}\\) set  \n\n\\[\nt=n^{\\,k/d}\\quad(\\text{an integer because }k/d\\in\\mathbb N).\n\\]\n\nChoose \\(x\\) as follows  \n\n\\[\n\\begin{cases}\nx = t-c &\\text{if }\\varepsilon=1,\\\\[2mm]\nx = c-t &\\text{if }\\varepsilon=-1.\n\\end{cases}\n\\]\n\nThen \\(\\varepsilon x + c = t\\) and therefore  \n\n\\[\nP(x)=t^{d}=(n^{k/d})^{d}=n^{k}.\n\\]\n\nThus every polynomial of this shape satisfies the required property.\n\n---\n### 11.  Answer  \n\nThe polynomials with integer coefficients for which the equation \\(P(x)=s\\) has an integer solution **for every perfect \\(2024\\)\u2011th power \\(s\\)** are exactly  \n\n\\[\n\\boxed{\\,P(x)=(a x+b)^{d}\\quad\\text{with }a,b\\in\\mathbb Z,\\;a=\\pm1,\\;d\\in\\mathbb N,\\;d\\mid 2024\\,}.\n\\]\n\n(Here \\(d=1\\) gives the linear polynomials \\(\\pm x+b\\), \\(d=2024\\) gives \\((\\pm x+b)^{2024}\\), etc.)\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "From the given equation, observe that $a>c$. The equation can be\n rewritten as:\n \\[\n 2^{c}\\left(2^{a-c}-1\\right)=7^{b}-1.\n \\]\n\n We consider the following cases:\n\n\n \\textbf{Case 1: $b$ is odd}\n\n In this case, $7^{b}-1\\equiv2\\pmod 4$, so $2^{c}=2$, which implies\n $c=1$. Substituting back into the equation, we have:\n \\[\n 2^{a}=7^{b}+1.\n \\]\n\n On the other hand, note that $7^{b}+1=8(7^{b-1}-7^{b-2}+\\cdots+7+1)$.\n If $b\\ge3$ the second factor is an odd number greater than 1 which\n cannot divide $2^{a}$, contradiction. Therefore we have $b=1$ and\n $2^{a}=8$, so $a=3$. Hence, this case gives the solution $(a,b,c)=(3,1,1)$.\n\n\n \\textbf{Case 2: $b$ is even but not divisible by $4$}\n\n Let $b=4k+2$, where $k\\in\\mathbb{N}$. Then:\n \\[\n 7^{b}-1=7^{4k+2}-1=\\left(7^{2k+1}-1\\right)\\left(7^{2k+1}+1\\right).\n \\]\n\n Reasoning similarly to the previous case, we find that $7^{2k+1}-1$\n is divisible by $2$ but not by $4$, $7^{2k+1}+1$ is divisible by\n $8$ but not by $16$. Therefore, $7^{b}-1$ is divisible by $16$\n but not by $32$, which implies $c=4$. Substituting back into the\n equation, we have:\n \\[\n 2^{a}=7^{4k+2}+15.\n \\]\n\n Since $7^{4k+2}+15\\equiv1\\pmod 3$, it follows that $2^{a}\\equiv1\\pmod 3$.\n Thus, $a$ is even. Let $a=2\\ell$, where $\\ell\\in\\mathbb{Z}^{+}$,\n $\\ell\\geq2$ (since $x>z=4$). We can write:\n \\[\n 15=2^{2\\ell}-7^{4k+2}=\\left(2^{\\ell}-7^{2k+1}\\right)\\left(2^{\\ell}+7^{2k+1}\\right).\n \\]\n\n From here we easily obtain $\\ell=3$ and $k=0$ which gives $a=6$\n and $b=2$. Thus, this case gives the solution $(a,b,c)=(6,2,4)$.\n\n\n \\textbf{Case 3: $b$ is divisible by $4$}\n\n In this case, $7^{b}-1$ is divisible by $4^{2}=16$. Since $2^{a-c}-1$\n is divisible by $25$, $a-c$ is divisible by $\\text{ord}_{25}(2)=20$.\n Then, $2^{a-c}-1$ is divisible by 31. Additionally:\n \\[\n 2^{a-c}-1\\text{ is divisible by }31\\implies7^{b}-1\\text{ is divisible by }31.\n \\]\n\n Note that $\\text{ord}_{31}(7)=15$, so $b$ is divisible by $15$.\n However, in this case $7^{b}-1$ is also divisible by $9$, implying\n $a-c$ must be divisible by $6$ which implies that $2^{a-c}-1$ is\n divisible by $7$. Then, we find:\n \\[\n 7^{b}-1\\text{ is divisible by }7,\\text{ leading to a contradiction.}\n \\]\n\n Hence, there are no solutions in this case.\n\n\n \\textbf{Conclusion}\n\n The two valid solutions are:\n \\[\n (a,b,c)=(3,1,1)\\quad\\text{and}\\quad(a,b,c)=(6,2,4).\n \\]", "grading guidelines": "(Partial)\n 1. Found all answers.\n 2. Handled the case of $b$ is odd and $2\\pmod 4$.\n(Almost)\n1. Verification contains minor mistakes only or missed a trivial case.", "level": "IMO-medium", "source": "(Modified) Vietnam TST 2019 P4", "question": "Suppose $a,b,c$ are positive integers such that $2^{a}+1=7^{b}+2^{c}$.\n Find all possible values of $(a,b,c)$.", "problem_idx": "PB-Basic-023", "type": "Number theory", "model_prediction": {"proof": "**1. Preliminary simplifications.**  \n\nGiven positive integers \\(a,b,c\\) with  \n\n\\[\n2^{a}+1 = 7^{b}+2^{c},\n\\]\n\nrewrite as \\(2^{a}-2^{c}=7^{b}-1\\). Because \\(7^{b}\\ge 7>1\\), the right\u2011hand side is positive, hence \\(2^{a}>2^{c}\\) and therefore \\(a>c\\). Set  \n\n\\[\nd = a-c \\qquad (d\\in\\mathbb{Z}_{>0}).\n\\]\n\nThen  \n\n\\[\n2^{c}\\bigl(2^{d}-1\\bigr)=7^{b}-1. \\tag{1}\n\\]\n\nSince \\(2^{d}-1\\) is odd, the power of two dividing the left\u2011hand side is exactly \\(2^{c}\\); consequently  \n\n\\[\nc = v_{2}\\!\\bigl(7^{b}-1\\bigr),\\qquad 2^{d}-1 = \\frac{7^{b}-1}{2^{c}}. \\tag{2}\n\\]\n\n**2. Determining \\(c\\) \u2013 the 2\u2011adic valuation of \\(7^{b}-1\\).**  \n\nWe treat the parity of \\(b\\) separately.\n\n*If \\(b\\) is odd.*  \n\\[\n7^{b}-1 = (7-1)\\bigl(7^{b-1}+7^{b-2}+\\cdots+1\\bigr)=6\\cdot S .\n\\]\nAll terms \\(7^{k}\\) are odd; \\(b\\) is odd, so \\(S\\) is the sum of an odd number of odd integers, hence \\(S\\) is odd. Therefore \\(v_{2}(7^{b}-1)=v_{2}(6)=1\\). From (2) we obtain  \n\n\\[\nc=1. \\tag{3}\n\\]\n\n*If \\(b\\) is even.* Write \\(b = 2^{m}t\\) with \\(t\\) odd and \\(m\\ge 1\\) (so \\(m=v_{2}(b)\\)). Then  \n\n\\[\n7^{b}-1 = \\bigl(7^{2^{m}}\\bigr)^{t}-1.\n\\]\n\nLet \\(X = 7^{2^{m}}\\); \\(X\\) is odd. Using the factorisation  \n\n\\[\nX^{t}-1 = (X-1)(X^{t-1}+X^{t-2}+\\cdots+X+1),\n\\]\n\nthe second factor consists of \\(t\\) odd summands and \\(t\\) is odd, therefore it is odd. Thus  \n\n\\[\nv_{2}\\!\\bigl(7^{b}-1\\bigr)=v_{2}(X-1)=v_{2}\\!\\bigl(7^{2^{m}}-1\\bigr). \\tag{4}\n\\]\n\nNow we compute \\(v_{2}\\!\\bigl(7^{2^{m}}-1\\bigr)\\) by induction on \\(m\\) (\\(m\\ge 1\\)).\n\n- **Base \\(m=1\\):** \\(7^{2}-1 = 48 = 2^{4}\\cdot3\\), so \\(v_{2}=4 = 1+3\\).\n- **Inductive step:** Assume \\(v_{2}\\!\\bigl(7^{2^{m}}-1\\bigr)=m+3\\). Then  \n\n  \\[\n  7^{2^{m+1}}-1 = \\bigl(7^{2^{m}}\\bigr)^{2}-1 = \\bigl(7^{2^{m}}-1\\bigr)\\bigl(7^{2^{m}}+1\\bigr).\n  \\]\n\n  Because \\(7^{2^{m}}\\) is odd and \\(7^{2^{m}}\\equiv 1\\pmod 8\\) (since \\(7^{2}\\equiv1\\pmod8\\) and \\(2^{m}\\) is even), we have \\(7^{2^{m}}+1\\equiv2\\pmod8\\); hence \\(v_{2}\\!\\bigl(7^{2^{m}}+1\\bigr)=1\\). Therefore  \n\n  \\[\n  v_{2}\\!\\bigl(7^{2^{m+1}}-1\\bigr) = v_{2}\\!\\bigl(7^{2^{m}}-1\\bigr)+1 = (m+3)+1 = (m+1)+3.\n  \\]\n\nThe induction gives \\(v_{2}\\!\\bigl(7^{2^{m}}-1\\bigr)=m+3\\) for every \\(m\\ge1\\). From (4) we obtain  \n\n\\[\nc = v_{2}\\!\\bigl(7^{b}-1\\bigr) = m+3. \\tag{5}\n\\]\n\n---\n\n**3. Case\u202fI: \\(b\\) odd.**  \n\nHere \\(c=1\\) by (3). Substituting into (1) yields \\(2(2^{d}-1)=7^{b}-1\\), i.e.  \n\n\\[\n2^{d+1}=7^{b}+1. \\tag{6}\n\\]\n\nBecause \\(b\\) is odd, we examine \\(7^{b}\\) modulo \\(16\\). Since \\(7^{2}\\equiv1\\pmod{16}\\), for any integer \\(k\\),  \n\n\\[\n7^{2k+1}=7\\cdot(7^{2})^{k}\\equiv7\\cdot1^{k}\\equiv7\\pmod{16}.\n\\]\n\nThus \\(7^{b}+1\\equiv8\\pmod{16}\\), which means \\(v_{2}(7^{b}+1)=3\\). Equation (6) is a pure power of two, therefore  \n\n\\[\nd+1 = v_{2}\\!\\bigl(7^{b}+1\\bigr) = 3\\quad\\Longrightarrow\\quad d=2.\n\\]\n\nPlugging \\(d=2\\) into (6) gives \\(2^{3}=8=7^{b}+1\\), whence \\(7^{b}=7\\) and \\(b=1\\). Finally \\(a=c+d=1+2=3\\).\n\nHence the only solution in this case is  \n\n\\[\n(a,b,c)=(3,1,1). \\tag{7}\n\\]\n\n---\n\n**4. Case\u202fII: \\(b\\) even.**  \n\nWrite \\(b=2^{m}t\\) with \\(t\\) odd, \\(m\\ge1\\) (so \\(m=v_{2}(b)\\)). By (5) we have \\(c=m+3\\), and equation (1) becomes  \n\n\\[\n2^{\\,m+3}\\bigl(2^{d}-1\\bigr)=7^{b}-1. \\tag{8}\n\\]\n\nWe first obtain necessary congruences for \\(m\\) and \\(d\\).\n\n*Modulo\u202f7.* Since \\(2^{3}\\equiv1\\pmod7\\), \\(2^{m+3}\\equiv2^{m}\\pmod7\\). Reducing (8) modulo\u202f7 gives  \n\n\\[\n2^{m}\\bigl(2^{d}-1\\bigr)\\equiv -1\\equiv6\\pmod7. \\tag{9}\n\\]\n\nThe residues of \\(2^{m}\\pmod7\\) repeat with period \\(3\\):  \n\n\\[\nm\\equiv0\\pmod3\\;\\Rightarrow\\;2^{m}\\equiv1,\\quad\nm\\equiv1\\pmod3\\;\\Rightarrow\\;2^{m}\\equiv2,\\quad\nm\\equiv2\\pmod3\\;\\Rightarrow\\;2^{m}\\equiv4.\n\\]\n\nThe possible residues of \\(2^{d}-1\\pmod7\\) are \\(0,1,3\\) according as \\(d\\equiv0,1,2\\pmod3\\) respectively (because \\(2^{d}\\equiv1,2,4\\pmod7\\)). Checking the three possibilities for \\(m\\) in (9):\n\n- \\(m\\equiv0\\): \\(1\\cdot(2^{d}-1)\\equiv6\\) impossible (RHS\u202f\\(6\\) not in \\(\\{0,1,3\\}\\));\n- \\(m\\equiv1\\): \\(2(2^{d}-1)\\equiv6\\;\\Rightarrow\\;2^{d}-1\\equiv3\\;\\Rightarrow\\;d\\equiv2\\pmod3\\);\n- \\(m\\equiv2\\): \\(4(2^{d}-1)\\equiv6\\). Multiplying by the inverse of \\(4\\) modulo \\(7\\) (which is \\(2\\)) yields \\(2^{d}-1\\equiv12\\equiv5\\pmod7\\), impossible.\n\nThus we must have  \n\n\\[\nm\\equiv1\\pmod3,\\qquad d\\equiv2\\pmod3. \\tag{10}\n\\]\n\n*Modulo\u202f3.* Because \\(7\\equiv1\\pmod3\\), \\(7^{b}-1\\equiv0\\pmod3\\). Equation (8) gives \\(2^{m+3}(2^{d}-1)\\equiv0\\pmod3\\). The factor \\(2^{m+3}\\) is never divisible by \\(3\\) (since \\(2\\equiv-1\\pmod3\\)). Hence \\(3\\mid(2^{d}-1)\\), i.e. \\(2^{d}\\equiv1\\pmod3\\), which occurs exactly when \\(d\\) is even.\n\nTherefore \\(d\\) is even. Together with \\(d\\equiv2\\pmod3\\) from (10) we obtain the unique congruence modulo \\(6\\):  \n\n\\[\nd\\equiv2\\pmod6. \\tag{11}\n\\]\n\n---\n\n**4.1. Splitting according to \\(m\\).**  \nCondition (10) forces \\(m\\equiv1\\pmod3\\). The possibilities are \\(m=1,4,7,10,\\dots\\). We treat \\(m=1\\) directly and show that \\(m\\ge4\\) leads to a contradiction.\n\n---\n\n**4.2. Subcase\u202f\\(m=1\\).**  \n\nThen \\(c=1+3=4\\) and \\(b=2t\\) with \\(t\\) odd. Equation (8) becomes  \n\n\\[\n2^{4}\\bigl(2^{d}-1\\bigr)=7^{2t}-1\\quad\\Longrightarrow\\quad 16(2^{d}-1)=(7^{t})^{2}-1.\n\\]\n\nRearranging,  \n\n\\[\n(7^{t})^{2}=2^{d+4}-15.\n\\]\n\nBecause \\(d\\) is even (by (11)), \\(d+4\\) is also even; write \\(d+4=2n\\). Then \\(2^{d+4}=(2^{n})^{2}\\), and we obtain  \n\n\\[\n(2^{n})^{2}-(7^{t})^{2}=15\\quad\\Longrightarrow\\quad (2^{n}-7^{t})(2^{n}+7^{t})=15. \\tag{12}\n\\]\n\nBoth factors on the left are positive integers (since \\(2^{n}>7^{t}\\) follows from the positivity of the right\u2011hand side). The factor pairs of \\(15\\) are \\((1,15)\\) and \\((3,5)\\).\n\n- **Pair \\((1,15)\\):**  \n  \\[\n  \\begin{cases}\n  2^{n}-7^{t}=1,\\\\\n  2^{n}+7^{t}=15,\n  \\end{cases}\n  \\]\n  Adding gives \\(2\\cdot2^{n}=16\\), so \\(2^{n}=8\\) and \\(n=3\\); then \\(7^{t}=2^{n}-1=7\\), hence \\(t=1\\).\n\n- **Pair \\((3,5)\\):**  \n  \\[\n  \\begin{cases}\n  2^{n}-7^{t}=3,\\\\\n  2^{n}+7^{t}=5,\n  \\end{cases}\n  \\]\n  Adding gives \\(2\\cdot2^{n}=8\\), so \\(2^{n}=4\\), \\(n=2\\), and then \\(7^{t}=2^{n}-3=1\\), which forces \\(t=0\\), contradicting \\(t\\ge1\\) (and \\(t\\) odd).\n\nThus the only admissible solution is \\(n=3\\), \\(t=1\\). Consequently  \n\n\\[\nd+4 = 2n = 6 \\;\\Longrightarrow\\; d=2,\\qquad\nb = 2t = 2,\\qquad\nc = 4,\\qquad\na = c+d = 6.\n\\]\n\nHence we obtain the triple  \n\n\\[\n(a,b,c)=(6,2,4). \\tag{13}\n\\]\n\n---\n\n**4.3. Subcase\u202f\\(m\\ge4\\).**  \n\nSince \\(m\\ge4\\), \\(b\\) is divisible by \\(2^{4}=16\\), and in particular \\(8\\mid b\\).\n\n**The prime \\(1201\\).**  \nCompute \\(7^{8}=5\\,764\\,801\\), so \\(7^{8}-1 = 5\\,764\\,800\\). Factoring,  \n\n\\[\n7^{8}-1 = 1201\\cdot4800.\n\\]\n\nTo verify that \\(1201\\) is prime, we test divisibility by all primes \\(\\le\\sqrt{1201}\\approx34.6\\):  \n\\(2,3,5,7,11,13,17,19,23,29,31\\). None of them divide \\(1201\\); therefore \\(1201\\) is indeed prime.\n\nBecause \\(8\\mid b\\), we can write \\(b=8k\\) (\\(k\\in\\mathbb{N}\\)). Then  \n\n\\[\n7^{b}-1 = (7^{8})^{k}-1\n\\]\n\nis divisible by \\(7^{8}-1\\); consequently \\(1201\\mid7^{b}-1\\).\n\n**Applying the condition.** Equation (8) reads \\(2^{\\,m+3}(2^{d}-1)=7^{b}-1\\). Since \\(1201\\) is odd, \\(\\gcd(1201,2^{\\,m+3})=1\\); therefore \\(1201\\) must divide the other factor:  \n\n\\[\n1201\\mid 2^{d}-1. \\tag{14}\n\\]\n\n**Order of \\(2\\) modulo \\(1201\\).** Let \\(\\operatorname{ord}\\) denote the multiplicative order of \\(2\\) modulo \\(1201\\). Because \\(1201\\) is prime and \\(1201\\nmid2\\), Fermat\u2019s little theorem gives \\(2^{1200}\\equiv1\\pmod{1201}\\); hence \\(\\operatorname{ord}\\mid1200\\). The prime factorisation of \\(1200\\) is  \n\n\\[\n1200 = 2^{4}\\cdot3\\cdot5^{2}.\n\\]\n\nWe compute \\(2^{400}\\) modulo \\(1201\\) via repeated squaring (all congruences are modulo \\(1201\\)):  \n\n\\[\n\\begin{aligned}\n2^{10}&=1024,\\\\\n2^{20}&\\equiv103,\\\\\n2^{40}&\\equiv1001,\\\\\n2^{80}&\\equiv367,\\\\\n2^{100}&\\equiv570,\\\\\n2^{200}&\\equiv630,\\\\\n2^{400}&\\equiv570\\not\\equiv1.\n\\end{aligned}\n\\]\n\nThus \\(2^{400}\\not\\equiv1\\pmod{1201}\\). If \\(\\operatorname{ord}\\) divided \\(400\\), then \\(2^{400}\\equiv1\\) would follow; therefore \\(\\operatorname{ord}\\nmid400\\).\n\nNow any divisor of \\(1200\\) that is **not** divisible by \\(3\\) can only contain the primes \\(2\\) and \\(5\\), and consequently must be a divisor of \\(2^{4}\\cdot5^{2}=400\\). Since \\(\\operatorname{ord}\\mid1200\\) and \\(\\operatorname{ord}\\nmid400\\), it follows that \\(\\operatorname{ord}\\) is divisible by \\(3\\); i.e. \\(3\\mid\\operatorname{ord}\\).\n\nFrom (14) we have \\(2^{d}\\equiv1\\pmod{1201}\\), so \\(\\operatorname{ord}\\mid d\\). Hence \\(3\\mid d\\).\n\n**Contradiction.** However, from (11) we know \\(d\\equiv2\\pmod6\\), which in particular implies \\(d\\equiv2\\pmod3\\). This is impossible if \\(3\\mid d\\). Therefore the assumption \\(m\\ge4\\) cannot hold; there are **no solutions** in this subcase.\n\n---\n\n**4.4. Summary for even \\(b\\).**  \nThe only viable value of \\(m\\) is \\(m=1\\), giving the unique triple \\((6,2,4)\\) found in Subcase\u202f4.2.\n\n---\n\n**5. Final answer.**  \n\nCombining the results of Case\u202fI and Case\u202fII, the complete set of positive integer triples \\((a,b,c)\\) satisfying \\(2^{a}+1=7^{b}+2^{c}\\) is  \n\n\\[\n\\boxed{(a,b,c)=(3,1,1)\\quad\\text{and}\\quad(a,b,c)=(6,2,4)}.\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "We state the following well-known lemma: If $p=4k+3$ is a prime\n number for some positive integer $k$, and there exists integers $x,y$\n such that $x^{2}+y^{2}$ is divisible by $p$, then we have $x,y$\n are both divisible by $p$.\n\n We omit the proof of this lemma since it is a well-known result.\n\n Now, return to the main problem. It is obvious that $(a,b,c)=(0,0,0)$\n is a solution. Now, consider $c>0$, we have the following cases:\n\n\n \\textbf{Case 1: $a$ is even.}\n\n In this case, we have $a=2k$ for some non-negative integer $k$.\n This gives $(20^{k})^{2}+(b^{2})^{2}$ is divisible by $2024$, which\n is divisible by $11$. Since $11$ is a prime in the form of $4n+3$\n for some positive integer $n$, we must have that $20^{k},b^{2}$\n are all divisible by $11$, which is a contradiction since $\\gcd(20,11)=1$.\n Hence, $a$ cannot be even.\n\n\n \\textbf{Case 2: $a$ is odd.}\n\n In this case, we have $a,c\\geq1$, and so $b$ must be even. Let $b=2^{t}q$\n for some non-negative integer $t,q$ where $q$ is odd, we have the\n equation becomes $2^{2a}5^{a}+2^{4t}q^{4}=2^{3c}253^{c}$. Consider\n quadratic residue modulo $11$, we have the LHS gives us $-5$ is\n a quadratic residue modulo $11$. However, since $11$ has the form\n $4n+3$ we have $-1$ is a quadratic nonresdue, while $5$ is a quadratic\n residue modulo $11$ from the Law of Quadratic Reciprocity. Hence,\n we have that $-5$ is a quadratic nonresidue modulo $11$, which a\n contradiction.\n\n Hence, $(a,b,c)=(0,0,0)$ is the only solution.", "grading guidelines": "(Partial)\n 1. Correctly analyzed either the $a$ is even case or $a$ is odd case but not both.\n(Almost)\n 1. Verification contains minor mistakes only or missed a trivial case.", "level": "IMO-medium", "source": "(Modified) Serbia MO 2008, P1", "question": "Find all non-negative integers $a,b,c$ such that $20^{a}+b^{4}=2024^{c}$", "problem_idx": "PB-Basic-024", "type": "Number theory", "model_prediction": {"proof": "**Case\u202f1: \\(a = 0\\).**  \nThe equation becomes  \n\n\\[\n1 + b^{4} = 2024^{c}. \\tag{1}\n\\]\n\n---\n\n### 1.  Working modulo\u202f5  \n\nBecause \\(2024 \\equiv 4 \\pmod 5\\), we have \\(2024^{c} \\equiv 4^{c} \\pmod 5\\).  \nSince \\(4^{2}\\equiv 1\\pmod5\\),  \n\n\\[\n4^{c}\\equiv\\begin{cases}\n4 & (c\\ \\text{odd}),\\\\[2mm]\n1 & (c\\ \\text{even}).\n\\end{cases}\n\\]\n\nFor any integer \\(b\\),  \n\n\\[\nb^{4}\\pmod5 = \\begin{cases}\n0 & \\text{if }5\\mid b,\\\\\n1 & \\text{otherwise}.\n\\end{cases}\n\\]\n\nHence the left\u2011hand side of (1) satisfies  \n\n\\[\n1+b^{4}\\equiv 1\\ \\text{or}\\ 2 \\pmod5 .\n\\]\n\n*If \\(c\\) were odd*, the right\u2011hand side would be \\(4\\pmod5\\), which cannot equal \\(1\\) or \\(2\\). Therefore \\(c\\) cannot be odd; **\\(c\\) is even**.  \n\nWith \\(c\\) even, \\(2024^{c}\\equiv 1\\pmod5\\). To have \\(1+b^{4}\\equiv 1\\pmod5\\) we need \\(b^{4}\\equiv 0\\pmod5\\), i.e. \\(5\\mid b\\).\n\nThus we can write \\(c = 2k\\) with \\(k\\in\\mathbb N_{0}\\) (non\u2011negative integer) and \\(5\\mid b\\).\n\n---\n\n### 2.  Subcase \\(k = 0\\) (\\(c = 0\\))\n\nEquation (1) becomes \\(1+b^{4}=1\\), so \\(b^{4}=0\\) and consequently \\(b=0\\).  \nThis yields the triple  \n\n\\[\n(a,b,c)=(0,0,0).\n\\]\n\n---\n\n### 3.  Subcase \\(k\\ge 1\\) (\\(c\\ge 2\\))\n\nNow \\(2024^{k}\\ge 2024>1\\).  Equation (1) reads  \n\n\\[\n1+b^{4}= (2024^{k})^{2}\\quad\\Longrightarrow\\quad (2024^{k})^{2}-b^{4}=1.\n\\]\n\nBecause \\(b^{4}=(b^{2})^{2}\\), we have a difference of squares:\n\n\\[\n(2024^{k}-b^{2})(2024^{k}+b^{2}) = 1. \\tag{2}\n\\]\n\nFrom \\((2024^{k})^{2}=b^{4}+1 > b^{4}\\) we obtain \\(2024^{k} > b^{2}\\) (squaring is strictly increasing on non\u2011negative integers). Hence both factors in (2) are **positive integers**.  \n\nThe product of two positive integers equals \\(1\\) only when each factor equals \\(1\\). Thus\n\n\\[\n2024^{k}-b^{2}=1,\\qquad 2024^{k}+b^{2}=1.\n\\]\n\nAdding these equations gives \\(2\\cdot2024^{k}=2\\), i.e. \\(2024^{k}=1\\), which contradicts \\(k\\ge 1\\) (since \\(2024^{k}\\ge2024\\)). Consequently **no solution exists for \\(k\\ge 1\\)**.\n\n---\n\n**Conclusion of Case\u202f1:** The only solution with \\(a=0\\) is \\((a,b,c)=(0,0,0)\\).\n\n---\n\n**Case\u202f2: \\(a\\ge 1\\).**  \n\n\\[\n20^{a}+b^{4}=2024^{c}. \\tag{3}\n\\]\n\nBecause \\(a\\ge1\\), the left\u2011hand side is at least \\(20\\). If \\(c=0\\) then the right\u2011hand side equals \\(1\\), impossible. Hence **\\(c\\ge 1\\)**.\n\nSince \\(2024 = 11\\cdot184\\), every positive power of \\(2024\\) is divisible by \\(11\\). Therefore\n\n\\[\n20^{a}+b^{4}\\equiv 0 \\pmod{11}. \\tag{4}\n\\]\n\n---\n\n### 1.  Reduction modulo\u202f11  \n\n\\(20\\equiv 9\\pmod{11}\\), so \\(20^{a}\\equiv 9^{a}\\pmod{11}\\).\n\n*If \\(11\\mid b\\)* (this includes the possibility \\(b=0\\)), then \\(b^{4}\\equiv0\\pmod{11}\\) and (4) would require \\(9^{a}\\equiv0\\pmod{11}\\). But \\(9\\) is coprime to \\(11\\), so \\(9^{a}\\) can never be \\(0\\) modulo\u202f11 \u2013 a contradiction. Hence  \n\n\\[\n11\\nmid b .\n\\]\n\nThus \\(b^{4}\\) is a non\u2011zero residue modulo\u202f11. Computing \\(b^{4}\\bmod 11\\) for \\(b=1,\\dots,10\\) (or using that \\((\\mathbb Z/11\\mathbb Z)^{\\times}\\) is cyclic of order\u202f10, so fourth powers are exactly the squares) gives  \n\n\\[\nb^{4}\\pmod{11}\\in S:=\\{1,\\,3,\\,4,\\,5,\\,9\\}. \\tag{5}\n\\]\n\n---\n\n### 2.  Powers of \\(9\\) modulo\u202f11  \n\n\\(9^{5}\\equiv1\\pmod{11}\\); therefore the residues of \\(9^{a}\\) repeat with period\u202f5:\n\n\\[\n\\begin{aligned}\na\\equiv1\\pmod5 &: 9^{a}\\equiv9,\\\\\na\\equiv2\\pmod5 &: 9^{a}\\equiv4,\\\\\na\\equiv3\\pmod5 &: 9^{a}\\equiv3,\\\\\na\\equiv4\\pmod5 &: 9^{a}\\equiv5,\\\\\na\\equiv0\\pmod5 &: 9^{a}\\equiv1.\n\\end{aligned}\n\\]\n\nHence \\(9^{a}\\pmod{11}\\) also belongs to the set \\(S\\).\n\n---\n\n### 3.  Impossibility of (4)  \n\nEquation (4) is equivalent to  \n\n\\[\n9^{a}+b^{4}\\equiv0\\pmod{11}\\;\\Longleftrightarrow\\; b^{4}\\equiv -\\,9^{a}\\pmod{11}. \\tag{6}\n\\]\n\nCompute the negatives of the elements of \\(S\\) modulo\u202f11:\n\n\\[\n-1\\equiv10,\\quad -3\\equiv8,\\quad -4\\equiv7,\\quad -5\\equiv6,\\quad -9\\equiv2.\n\\]\n\nThe residues \\(2,6,7,8,10\\) are **not** members of \\(S\\). Because by (5) every possible value of \\(b^{4}\\pmod{11}\\) (when \\(11\\nmid b\\)) lies in \\(S\\), condition (6) can never be satisfied. Consequently (4) is impossible, and **there is no solution with \\(a\\ge 1\\)**.\n\n---\n\n**Final answer**  \n\nCombining both cases, the only triple of non\u2011negative integers \\((a,b,c)\\) that satisfies  \n\n\\[\n20^{a}+b^{4}=2024^{c}\n\\]\n\nis  \n\n\\[\n\\boxed{(a,b,c)=(0,0,0)}.\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Let the incircle of $XYZ$ meet the sides of $XYZ$ at points $D,E,F$. Let $G$ be the centroid of triangle $DEF$, it is well-known that\n $I,G,O$ are collinear. Let $r$ be the inradius and $\\vec{v}$ be\n the unit vector perpendicular to $MN$ pointing outward, we have $YZ\\vec{ID}+ZN\\vec{IE}+YM\\vec{IF}+rMN\\vec{v}=\\vec{0}$.\n Since $YZ=YM=ZN=a$, we have $YZ\\vec{ID}+ZN\\vec{IE}+YM\\vec{IF}+rMN\\vec{v}=\\vec{0}$\n is equivalent to $3a\\vec{IG}=-rMN\\vec{v}$, which implies that $IG$\n is parallel with $\\vec{v}$. Since $\\vec{v}$ is perpendicular to\n $MN$, this implies that $MN$ is perpendicular to $IG$. Combining\n this with the fact that $I,G,O$ is collinear, we have $\\gamma=90^{\\circ}$,\n which means that $\\frac{\\gamma}{2}=45^{\\circ}$.", "grading guidelines": "(Partial)\n 1. Considered the point $G$, the centroid of the triangle formed by the points of tangency of the incircle and the sides of $XYZ$, and explained that $I,G,O$ is collinear.\n(Almost)\n 1. Verification contains minor mistakes only.", "level": "IMO-easy", "source": "folklore", "question": "Given a triangle $XYZ$ with circumcenter $O$, the incircle of triangle\n $XYZ$ has center $I$. Let $M,N$ on the sides $XY,XZ$\n respectively such that $YM=ZN=YZ$. If $\\gamma$ is the angle created\n by two lines $MN,OI$, what is $\\frac{\\gamma}{2}$ in terms of degree?", "problem_idx": "PB-Basic-025", "type": "Geometry", "model_prediction": {"proof": "**Notation.**  \nLet  \n\n\\[\na = XY,\\qquad b = XZ,\\qquad c = YZ .\n\\]\n\n**Vector model.**  \nPlace the vertex \\(Y\\) at the origin of a Cartesian (or vector) coordinate system.  \nDenote the position vectors of the other two vertices by  \n\n\\[\n\\vec Y = \\mathbf 0,\\qquad \\vec Z = \\mathbf z,\\qquad \\vec X = \\mathbf x .\n\\]\n\nThen  \n\n\\[\n|\\mathbf x| = a,\\qquad |\\mathbf z| = c,\\qquad |\\mathbf x-\\mathbf z| = b .\n\\]\n\n**Points \\(M\\) and \\(N\\).**  \n\n* \\(M\\) lies on \\(XY\\) and satisfies \\(YM=c\\).  Since \\(Y\\) is the origin, the ray from \\(Y\\) to \\(X\\) is \\(\\mathbf x\\); moving a distance \\(c\\) along it gives  \n\n\\[\n\\vec M = \\frac{c}{a}\\,\\mathbf x .\n\\]\n\n(The factor \\(c/a\\le 1\\) because \\(M\\) is on the segment \\(XY\\); this is guaranteed by the existence of such an \\(M\\).)\n\n* \\(N\\) lies on \\(XZ\\) with \\(ZN=c\\).  The vector from \\(Z\\) to \\(X\\) is \\(\\mathbf x-\\mathbf z\\); travelling a fraction \\(c/b\\) of this vector yields a point at distance \\(c\\) from \\(Z\\). Hence  \n\n\\[\n\\vec N = \\mathbf z + \\frac{c}{b}(\\mathbf x-\\mathbf z)\n      = \\frac{b-c}{b}\\,\\mathbf z + \\frac{c}{b}\\,\\mathbf x .\n\\]\n\n**Incenter \\(I\\).**  \nFor a triangle the incenter in barycentric coordinates is \\((c:b:a)\\) where the numbers are the lengths of the sides opposite the respective vertices.  Thus, with our notation (\\(c\\) opposite \\(X\\), \\(b\\) opposite \\(Y\\), \\(a\\) opposite \\(Z\\)),\n\n\\[\n\\vec I = \\frac{c\\,\\mathbf x + b\\,\\mathbf 0 + a\\,\\mathbf z}{a+b+c}\n      = \\frac{c\\,\\mathbf x + a\\,\\mathbf z}{S},\\qquad S = a+b+c .\n\\]\n\n**Circumcenter \\(O\\).**  \nLet \\(\\mathbf o\\) be the position vector of \\(O\\).  Because \\(O\\) is equidistant from the three vertices we have  \n\n\\[\n|\\mathbf o| = |\\mathbf o-\\mathbf z| = |\\mathbf o-\\mathbf x|.\n\\]\n\nFrom \\(|\\mathbf o| = |\\mathbf o-\\mathbf z|\\):\n\n\\[\n|\\mathbf o|^2 = |\\mathbf o|^2 - 2\\,\\mathbf o\\!\\cdot\\!\\mathbf z + |\\mathbf z|^2\n\\;\\Longrightarrow\\; \\mathbf o\\!\\cdot\\!\\mathbf z = \\frac{|\\mathbf z|^2}{2}= \\frac{c^{2}}{2}.\n\\]\n\nSimilarly \\(|\\mathbf o| = |\\mathbf o-\\mathbf x|\\) gives  \n\n\\[\n\\mathbf o\\!\\cdot\\!\\mathbf x = \\frac{|\\mathbf x|^{2}}{2}= \\frac{a^{2}}{2}.\n\\]\n\n**The scalar product \\(\\mathbf x\\!\\cdot\\!\\mathbf z\\).**  \nBy the law of cosines applied to \\(\\triangle XYZ\\),\n\n\\[\nb^{2}=|\\mathbf x-\\mathbf z|^{2}=|\\mathbf x|^{2}+|\\mathbf z|^{2}-2\\,\\mathbf x\\!\\cdot\\!\\mathbf z\n      = a^{2}+c^{2}-2\\,\\mathbf x\\!\\cdot\\!\\mathbf z .\n\\]\n\nHence  \n\n\\[\n\\mathbf x\\!\\cdot\\!\\mathbf z = \\frac{a^{2}+c^{2}-b^{2}}{2}\\;\\equiv\\; d .\n\\]\n\n**Vectors \\(\\overrightarrow{MN}\\) and \\(\\overrightarrow{OI}\\).**  \n\n\\[\n\\overrightarrow{MN}= \\vec N-\\vec M\n  = \\left(\\frac{b-c}{b}\\right)\\mathbf z + \\frac{c}{b}\\mathbf x - \\frac{c}{a}\\mathbf x\n  = \\lambda\\,\\mathbf z + \\mu\\,\\mathbf x,\n\\]\n\nwhere  \n\n\\[\n\\lambda = \\frac{b-c}{b},\\qquad \n\\mu = c\\!\\left(\\frac1b-\\frac1a\\right)=\\frac{c(a-b)}{ab}.\n\\]\n\n\\[\n\\overrightarrow{OI}= \\mathbf o - \\vec I .\n\\]\n\n**Dot product \\(\\overrightarrow{OI}\\!\\cdot\\!\\overrightarrow{MN}\\).**  \n\n\\[\n\\begin{aligned}\n\\overrightarrow{OI}\\!\\cdot\\!\\overrightarrow{MN}\n&= (\\mathbf o-\\vec I)\\!\\cdot\\!(\\lambda\\mathbf z+\\mu\\mathbf x)  \\\\\n&= \\lambda\\,\\mathbf o\\!\\cdot\\!\\mathbf z + \\mu\\,\\mathbf o\\!\\cdot\\!\\mathbf x\n   - \\lambda\\,\\vec I\\!\\cdot\\!\\mathbf z - \\mu\\,\\vec I\\!\\cdot\\!\\mathbf x .\n\\end{aligned}\n\\]\n\nInsert the known values:\n\n\\[\n\\mathbf o\\!\\cdot\\!\\mathbf z = \\frac{c^{2}}{2},\\qquad \n\\mathbf o\\!\\cdot\\!\\mathbf x = \\frac{a^{2}}{2},\n\\]\n\n\\[\n\\vec I\\!\\cdot\\!\\mathbf z = \\frac{c d + a c^{2}}{S}= \\frac{c(d+ac)}{S},\\qquad\n\\vec I\\!\\cdot\\!\\mathbf x = \\frac{c a^{2} + a d}{S}= \\frac{a(ca+d)}{S}.\n\\]\n\nThus  \n\n\\[\n\\overrightarrow{OI}\\!\\cdot\\!\\overrightarrow{MN}\n= \\frac{\\lambda c^{2}}{2} + \\frac{\\mu a^{2}}{2}\n  - \\frac{1}{S}\\Bigl[\\lambda c(d+ac) + \\mu a(ca+d)\\Bigr]. \\tag{*}\n\\]\n\n**Simplify the two combinations.**  \n\nFirst,\n\n\\[\n\\lambda c^{2} + \\mu a^{2}\n= \\frac{c^{2}(b-c)}{b} + \\frac{a^{2}\\,c(a-b)}{ab}\n= \\frac{c\\bigl[c(b-c) + a(a-b)\\bigr]}{b}. \\tag{1}\n\\]\n\nSecond,\n\n\\[\n\\begin{aligned}\n\\lambda c(d+ac) + \\mu a(ca+d)\n&= \\frac{c(b-c)(d+ac)}{b} + \\frac{c(a-b)(ca+d)}{b}  \\\\\n&= \\frac{c\\bigl[(b-c)(d+ac) + (a-b)(ca+d)\\bigr]}{b}.\n\\end{aligned}\n\\]\n\nThe bracket simplifies:\n\n\\[\n\\begin{aligned}\n(b-c)(d+ac) + (a-b)(ca+d)\n&= d(b-c)+ac(b-c) + d(a-b) + ac(a-b)\\\\\n&= d\\bigl[(b-c)+(a-b)\\bigr] + ac\\bigl[(b-c)+(a-b)\\bigr]\\\\\n&= d(a-c) + ac(a-c) = (a-c)(d+ac).\n\\end{aligned}\n\\]\n\nHence  \n\n\\[\n\\lambda c(d+ac) + \\mu a(ca+d) = \\frac{c\\,(a-c)(d+ac)}{b}. \\tag{2}\n\\]\n\n**Insert (1) and (2) into (*).**  \n\n\\[\n\\overrightarrow{OI}\\!\\cdot\\!\\overrightarrow{MN}\n= \\frac{c}{b}\\!\\left[ \\frac{c(b-c)+a(a-b)}{2} - \\frac{(a-c)(d+ac)}{S}\\right].\n\\]\n\n**Express \\(d+ac\\) in terms of \\(a,b,c\\).**  \n\n\\[\n\\begin{aligned}\nd+ac &= \\frac{a^{2}+c^{2}-b^{2}}{2} + ac\n      = \\frac{a^{2}+2ac+c^{2}-b^{2}}{2} \\\\\n     &= \\frac{(a+c)^{2}-b^{2}}{2}\n      = \\frac{(a+c-b)(a+c+b)}{2}\n      = \\frac{S\\,(a+c-b)}{2}.\n\\end{aligned}\n\\]\n\nTherefore  \n\n\\[\n\\frac{(a-c)(d+ac)}{S}\n   = \\frac{(a-c)\\,S\\,(a+c-b)}{2S}\n   = \\frac{(a-c)(a+c-b)}{2}.\n\\]\n\n**Finish the computation.**  \n\n\\[\n\\begin{aligned}\n\\overrightarrow{OI}\\!\\cdot\\!\\overrightarrow{MN}\n&= \\frac{c}{b}\\!\\left[ \\frac{c(b-c)+a(a-b)}{2} - \\frac{(a-c)(a+c-b)}{2}\\right] \\\\\n&= \\frac{c}{2b}\\Bigl[\\,c(b-c) + a(a-b) - (a-c)(a+c-b)\\Bigr].\n\\end{aligned}\n\\]\n\nNow expand the two expressions:\n\n\\[\nc(b-c)+a(a-b) = bc - c^{2} + a^{2} - ab,\n\\]\n\\[\n(a-c)(a+c-b) = a^{2} - ab - c^{2} + bc.\n\\]\n\nTheir difference is zero, so  \n\n\\[\n\\overrightarrow{OI}\\!\\cdot\\!\\overrightarrow{MN}=0.\n\\]\n\n**Geometric conclusion.**  \nA zero dot product means the vectors \\(\\overrightarrow{OI}\\) and \\(\\overrightarrow{MN}\\) are orthogonal; consequently the lines \\(OI\\) and \\(MN\\) are perpendicular.  Hence the angle \\(\\gamma\\) between them is \\(90^{\\circ}\\).\n\n\\[\n\\frac{\\gamma}{2}= \\frac{90^{\\circ}}{2}=45^{\\circ}.\n\\]\n\n(If the triangle is equilateral (\\(a=b=c\\)), then \\(M=N=X\\) and \\(O=I\\); the lines \\(MN\\) and \\(OI\\) are not defined.  The problem is intended for non\u2011equilateral triangles; for all such triangles the computation above gives \\(\\gamma = 90^{\\circ}\\) and therefore \\(\\gamma/2 = 45^{\\circ}\\).)\n\n\\[\n\\boxed{45^{\\circ}}\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Lemma: Let $ABC$ be an acute triangle with circumcircle $\\Omega$.\n Let $B_{0}$ be the midpoint of $AC$ and let $C_{0}$ be the midpoint\n of $AB$. Let $D$ be the foot of the altitude from $A$ and let $G$\n be the centroid of the triangle $ABC$. Let $\\omega$ be a circle\n through $B_{0}$ and $C_{0}$ that is tangent to the circle $\\Omega$\n at a point $X\\not=A$. Prove that the points $D,G$ and $X$ are collinear.\n\n This is the well-known IMO Shortlist 2011 G4 problem, we omit the\n proof here.\n\n Consider an inversion center $I$ with power $r^{2}$ where $r$ is\n the inradius. This maps $B,C$ to the midpoint $M_{B},M_{C}$ of $DF,DE$\n respectively. Moreover, we have $DD'$ is parallel to $EF$. Let $G$\n be the centroid of $\\triangle DEF$ and $H_{D}$ be the foot of $D$\n onto $EF$. We have $D',G,H_{D}$ are collinear from Thales Theorem,\n and $X,G,H_{D}$ are collinear. And so, we have $XD'$ passes through\n $G$. Similarly, we have $YE',ZF'$ passes through $G$ as well. Finally,\n it is well-known that $I,G,O$ are collinear. And so, we have $D'X,E'Y,F'Z$\n are concurrent on the line $OI$.", "grading guidelines": "(Partial)\n 1. Applied correct inversion and explain that $D',G,H_{D}$ is collinear, where $H_{D}$ is the foot of $D$ onto $EF$.\n 2. Obtained equivalent information without inversion.\n(Almost)\n 1. Verification contains minor mistakes only.", "level": "IMO-medium", "source": "Novel Problem", "question": "Let $\\triangle ABC$ be an inscribed triangle in $(O)$ and circumscribed\n around $(I)$. The incircle $(I)$ touches $BC,CA,AB$ at $D,E,F$,\n respectively. Construct the circle $(W_{a})$ passing through $B,C$\n and tangent to $(I)$ at $X$, and let $D'$ be the reflection of\n $D$ across $AI$. Define $Y,Z,E',F'$ similarly. Prove that the lines\n $D'X,E'Y,F'Z$ are concurrent on the line $OI$.", "problem_idx": "PB-Basic-026", "type": "Geometry", "model_prediction": {"proof": "**1.  Coordinate set\u2011up**  \nScale the figure so that the incircle has radius\u202f\\(1\\).  \nPlace \\(BC\\) on the \\(x\\)-axis and let the touch point \\(D\\) be the origin.  \nThen  \n\n\\[\nD=(0,0),\\qquad I=(0,1),\\qquad B=(-d,0),\\;C=(e,0)\\;(d,e>0),\n\\]\n\nand \\(a=BC=d+e\\).  \nLet the third vertex be \\(A=(u,v)\\;(v>0)\\).\n\n---\n\n**2.  Coordinates of \\(A\\)**  \n\nThe distance from \\(I\\) to the line \\(AB\\) must equal the radius\u202f\\(1\\):  \n\n\\[\n\\frac{|(A-B)\\times(I-B)|}{|A-B|}=1 .\n\\]\n\nWith \\(A-B=(u+d,\\;v),\\;I-B=(d,\\;1)\\) the determinant is \\(u+d-dv\\).  \nSquaring gives  \n\n\\[\n(u+d-dv)^2=(u+d)^2+v^2. \\tag{1}\n\\]\n\nSimilarly, for line \\(AC\\) (\\(A-C=(u-e,\\;v),\\;I-C=(-e,\\;1)\\), determinant \\(u-e+ev\\))\n\n\\[\n(u-e+ev)^2=(u-e)^2+v^2. \\tag{2}\n\\]\n\nExpanding (1) and (2) and simplifying (remember \\(v\\neq0\\)) yields  \n\n\\[\nv(d^{2}-1)=2d(u+d),\\qquad \nv(e^{2}-1)=-2e(u-e). \\tag{1'},(2')\n\\]\n\nFrom (1\u2032) \\(u=\\dfrac{v(d^{2}-1)}{2d}-d\\); from (2\u2032) \\(u=e-\\dfrac{v(e^{2}-1)}{2e}\\).  \nEquating these expressions and solving for \\(v\\) gives  \n\n\\[\nv=\\frac{2de}{de-1},\\qquad u=\\frac{d-e}{de-1}.\n\\]\n\nIntroduce the convenient notations  \n\n\\[\n\\rho=de,\\qquad \\delta=d-e,\\qquad \\Delta=\\rho-1.\n\\]\n\nThen  \n\n\\[\n\\boxed{u=\\frac{\\delta}{\\Delta}},\\qquad \\boxed{v=\\frac{2\\rho}{\\Delta}}.\n\\]\n\nBecause \\(v>0\\) we must have \\(\\Delta>0\\), i.e. \\(\\rho>1\\).\n\n---\n\n**3.  Auxiliary quantities and identities**  \n\n\\[\na=d+e,\\qquad S=(d^{2}+1)(e^{2}+1)=\\rho^{2}+d^{2}+e^{2}+1,\\qquad \nT=\\delta^{2}+\\rho^{2}.\n\\]\n\nThe following relations are immediate and will be used repeatedly  \n\n\\[\n\\begin{aligned}\n& S=T+2\\rho+1,\\qquad \\delta^{2}=T-\\rho^{2},\\\\[2mm]\n& S=\\delta^{2}+(\\rho+1)^{2}. \\tag{3}\n\\end{aligned}\n\\]\n\n---\n\n**4.  Points \\(E,F\\) and the centroid \\(G\\) of \\(\\triangle DEF\\)**  \n\nThe area of \\(\\triangle ABC\\) is \\(\\frac12 a\\,v=\\frac12 a\\cdot\\frac{2\\rho}{\\Delta}= \\frac{a\\rho}{\\Delta}\\).  \nBecause the incircle radius is\u202f\\(1\\), the area also equals the semiperimeter \\(s\\); hence  \n\n\\[\ns=\\frac{a\\rho}{\\Delta}.\n\\]\n\nFrom the incircle tangency properties we have  \n\n\\[\nBD = BF = s-b = d,\\qquad CD = CE = s-c = e.\n\\]\n\nThus  \n\n\\[\nb = CA = s-d = \\frac{a\\rho}{\\Delta}-d = \\frac{d(e^{2}+1)}{\\Delta},\\qquad \nc = AB = s-e = \\frac{a\\rho}{\\Delta}-e = \\frac{e(d^{2}+1)}{\\Delta}.\n\\]\n\n*Coordinates of \\(E\\)* \u2013 \\(E\\) lies on \\(CA\\) and \\(CE=e\\).  \nWrite \\(E=C+\\lambda(A-C)\\) with \\(\\lambda=\\dfrac{e}{b}= \\dfrac{e\\Delta}{d(e^{2}+1)}\\).  \nUsing \\(u-e =\\dfrac{\\delta}{\\Delta}-e = \\dfrac{d(1-e^{2})}{\\Delta}\\),\n\n\\[\n\\lambda(u-e)=\\frac{e(1-e^{2})}{e^{2}+1},\\qquad \n\\lambda v=\\frac{2e^{2}}{e^{2}+1}.\n\\]\n\nHence  \n\n\\[\nE=\\Bigl(e+\\frac{e(1-e^{2})}{e^{2}+1},\\;\\frac{2e^{2}}{e^{2}+1}\\Bigr)\n  =\\Bigl(\\frac{2e}{e^{2}+1},\\;\\frac{2e^{2}}{e^{2}+1}\\Bigr). \\tag{4}\n\\]\n\n*Coordinates of \\(F\\)* \u2013 \\(F\\) lies on \\(AB\\) and \\(BF=d\\).  \nWrite \\(F=B+\\mu(A-B)\\) with \\(\\mu=\\dfrac{d}{c}= \\dfrac{d\\Delta}{e(d^{2}+1)}\\).  \nUsing \\(u+d =\\dfrac{\\delta}{\\Delta}+d = \\dfrac{e(d^{2}-1)}{\\Delta}\\),\n\n\\[\n\\mu(u+d)=\\frac{d(d^{2}-1)}{d^{2}+1},\\qquad \n\\mu v=\\frac{2d^{2}}{d^{2}+1}.\n\\]\n\nThus  \n\n\\[\nF=\\Bigl(-d+\\frac{d(d^{2}-1)}{d^{2}+1},\\;\\frac{2d^{2}}{d^{2}+1}\\Bigr)\n  =\\Bigl(-\\frac{2d}{d^{2}+1},\\;\\frac{2d^{2}}{d^{2}+1}\\Bigr). \\tag{5}\n\\]\n\nBecause \\(D=(0,0)\\), the centroid of \\(\\triangle DEF\\) is  \n\n\\[\nG=\\frac{E+F}{3}.\n\\]\n\nCompute the sums:\n\n\\[\n\\begin{aligned}\nE_x+F_x &= \\frac{2e}{e^{2}+1}-\\frac{2d}{d^{2}+1}\n         = \\frac{2\\delta\\Delta}{S},\\\\[2mm]\nE_y+F_y &= \\frac{2e^{2}}{e^{2}+1}+\\frac{2d^{2}}{d^{2}+1}\n         = \\frac{2\\bigl(S+\\rho^{2}-1\\bigr)}{S}.\n\\end{aligned}\n\\]\n\nTherefore  \n\n\\[\n\\boxed{G_x=\\frac{2\\delta\\Delta}{3S}},\\qquad \n\\boxed{G_y=\\frac{2\\bigl(S+\\rho^{2}-1\\bigr)}{3S}}. \\tag{6}\n\\]\n\n---\n\n**5.  Reflection \\(D'\\) of \\(D\\) across \\(AI\\)**  \n\nLine \\(AI\\) passes through \\(A(u,v)\\) and \\(I(0,1)\\); a direction vector is \\(\\vec d=(u,\\;v-1)\\).  \nThe foot \\(H\\) of the perpendicular from the origin to this line is obtained by projecting:  \n\\(H=I+t\\vec d\\) with \\(t=-\\dfrac{I\\!\\cdot\\!\\vec d}{\\vec d\\!\\cdot\\!\\vec d}\\).  \nSince \\(I\\!\\cdot\\!\\vec d=v-1\\) and \\(\\vec d\\!\\cdot\\!\\vec d=u^{2}+(v-1)^{2}\\),\n\n\\[\nH=\\Bigl(-\\frac{u(v-1)}{u^{2}+(v-1)^{2}},\\; \\frac{u^{2}}{u^{2}+(v-1)^{2}}\\Bigr).\n\\]\n\nBecause \\(D\\) is the origin, its reflection across \\(AI\\) is \\(D'=2H\\); hence  \n\n\\[\nD'_x=-\\frac{2u(v-1)}{u^{2}+(v-1)^{2}},\\qquad \nD'_y=\\frac{2u^{2}}{u^{2}+(v-1)^{2}}.\n\\]\n\nNow substitute \\(u=\\delta/\\Delta,\\;v-1=(\\rho+1)/\\Delta\\) and note  \n\n\\[\nu^{2}+(v-1)^{2}= \\frac{\\delta^{2}+(\\rho+1)^{2}}{\\Delta^{2}}=\\frac{S}{\\Delta^{2}}.\n\\]\n\nThus  \n\n\\[\n\\boxed{D'_x=-\\frac{2\\delta(\\rho+1)}{S}},\\qquad \n\\boxed{D'_y=\\frac{2\\delta^{2}}{S}}. \\tag{7}\n\\]\n\n---\n\n**6.  Circle \\((W_a)\\) and its tangency point \\(X\\)**  \n\nThe centre of a circle through \\(B\\) and \\(C\\) lies on the perpendicular bisector of \\(BC\\); therefore  \n\n\\[\nO_a=(h,t),\\qquad h=\\frac{e-d}{2}=-\\frac{\\delta}{2}.\n\\]\n\nIts radius satisfies  \n\n\\[\nR^{2}=(-d-h)^{2}+t^{2}=\\Bigl(\\frac{a}{2}\\Bigr)^{2}+t^{2}.\n\\]\n\nNotice that \\(\\bigl(\\frac{a}{2}\\bigr)^{2}=h^{2}+\\rho\\) because  \n\n\\[\nh^{2}=\\frac{\\delta^{2}}{4},\\quad a^{2}=d^{2}+e^{2}+2\\rho\\quad\\Longrightarrow\\quad \n\\frac{a^{2}}{4}=h^{2}+\\rho. \\tag{8}\n\\]\n\nHence  \n\n\\[\nR^{2}=h^{2}+\\rho+t^{2}. \\tag{9}\n\\]\n\nTangency with the incircle \\((I,1)\\) gives either internal or external contact:  \n\n\\[\n\\sqrt{h^{2}+(t-1)^{2}}=R-1\\quad\\text{or}\\quad \\sqrt{h^{2}+(t-1)^{2}}=R+1.\n\\]\n\nSquaring and using (9) (i.e. \\(h^{2}+t^{2}=R^{2}-\\rho\\)) yields after cancellation  \n\n\\[\n-\\rho-2t=-2R\\;\\;(\\text{internal}),\\qquad\n-\\rho-2t=2R\\;\\;(\\text{external}),\n\\]\n\nso  \n\n\\[\nR=t+\\frac{\\rho}{2}\\quad\\text{or}\\quad R=-t-\\frac{\\rho}{2}. \\tag{10}\n\\]\n\nInsert the internal relation into \\(R^{2}=(\\frac{a}{2})^{2}+t^{2}\\):\n\n\\[\n\\bigl(t+\\tfrac{\\rho}{2}\\bigr)^{2}=\\frac{a^{2}}{4}+t^{2}\n\\;\\Longrightarrow\\; \\rho t+\\frac{\\rho^{2}}{4}=\\frac{a^{2}}{4}\n\\;\\Longrightarrow\\; t=\\frac{a^{2}-\\rho^{2}}{4\\rho},\\qquad \nR=t+\\frac{\\rho}{2}= \\frac{a^{2}+\\rho^{2}}{4\\rho}>0.\n\\]\n\nThe external case would give the same \\(t\\) but \\(R=-(a^{2}+\\rho^{2})/(4\\rho)<0\\), impossible.  \nThus the unique admissible circle is internally tangent and we have  \n\n\\[\nt=\\frac{a^{2}-\\rho^{2}}{4\\rho},\\qquad R=\\frac{a^{2}+\\rho^{2}}{4\\rho}. \\tag{11}\n\\]\n\nNow  \n\n\\[\nR-1=\\frac{a^{2}+\\rho^{2}-4\\rho}{4\\rho}.\n\\]\n\nObserve that  \n\n\\[\na^{2}+\\rho^{2}-4\\rho = d^{2}+e^{2}+2\\rho+\\rho^{2}-4\\rho\n                     = d^{2}+e^{2}+\\rho^{2}-2\\rho = T,\n\\]\n\nso  \n\n\\[\nR-1=\\frac{T}{4\\rho}. \\tag{12}\n\\]\n\nFor two circles that are internally tangent, the point of tangency is the internal homothety centre:  \n\n\\[\nX = \\frac{R\\,I - O_a}{R-1}.\n\\]\n\nUsing \\(I=(0,1)\\), \\(O_a=(h,t)\\),\n\n\\[\nX_x=\\frac{-h}{R-1}= \\frac{\\delta/2}{T/(4\\rho)} = \\frac{2\\rho\\delta}{T},\\qquad\nX_y=\\frac{R-t}{R-1}= \\frac{\\rho/2}{T/(4\\rho)} = \\frac{2\\rho^{2}}{T}.\n\\]\n\nThus  \n\n\\[\n\\boxed{X=\\Bigl(\\frac{2\\rho\\delta}{T},\\;\\frac{2\\rho^{2}}{T}\\Bigr)}. \\tag{13}\n\\]\n\n---\n\n**7.  Collinearity of \\(D',G,X\\)**  \n\n*If \\(\\delta=0\\) (i.e. \\(d=e\\))*, then from (7), (13) and (6):  \n\\(D'=(0,0)=D,\\; X=(0,2),\\; G_x=0\\); all three lie on the \\(y\\)-axis, hence collinear.\n\nAssume now \\(\\delta\\neq0\\). Compute the vectors  \n\n\\[\n\\vec u = G-D',\\qquad \\vec v = X-D'.\n\\]\n\nFrom (6) and (7)\n\n\\[\n\\begin{aligned}\n\\vec u_x &= \\frac{2\\delta\\Delta}{3S}+\\frac{2\\delta(\\rho+1)}{S}\n          = \\frac{4\\delta(2\\rho+1)}{3S},\\\\[2mm]\n\\vec u_y &= \\frac{2(S+\\rho^{2}-1)}{3S}-\\frac{2\\delta^{2}}{S}\n          = \\frac{4\\bigl(2\\rho^{2}+3\\rho+1-S\\bigr)}{3S}. \\tag{14}\n\\end{aligned}\n\\]\n\nFrom (13) and (7)\n\n\\[\n\\begin{aligned}\n\\vec v_x &= \\frac{2\\rho\\delta}{T}+\\frac{2\\delta(\\rho+1)}{S}\n          = \\frac{2\\delta\\bigl(\\rho S+(\\rho+1)T\\bigr)}{ST},\\\\[2mm]\n\\vec v_y &= \\frac{2\\rho^{2}}{T}-\\frac{2\\delta^{2}}{S}\n          = \\frac{2\\bigl(\\rho^{2}S-\\delta^{2}T\\bigr)}{ST}. \\tag{15}\n\\end{aligned}\n\\]\n\nCollinearity is equivalent to \\(\\det(\\vec u,\\vec v)=0\\):\n\n\\[\n\\det = \\frac{4\\delta(2\\rho+1)}{3S}\\cdot\\frac{2(\\rho^{2}S-\\delta^{2}T)}{ST}\n      -\\frac{4(2\\rho^{2}+3\\rho+1-S)}{3S}\\cdot\\frac{2\\delta(\\rho S+(\\rho+1)T)}{ST}.\n\\]\n\nFactor the common factor \\(\\dfrac{8\\delta}{3S^{2}T}\\):\n\n\\[\n\\det = \\frac{8\\delta}{3S^{2}T}\\Bigl[\n         (2\\rho+1)(\\rho^{2}S-\\delta^{2}T)\n         - (2\\rho^{2}+3\\rho+1-S)\\bigl(\\rho S+(\\rho+1)T\\bigr)\n       \\Bigr].\n\\]\n\nSince \\(\\delta\\neq0\\) and the denominator is non\u2011zero, it suffices to prove the bracket vanishes.\n\nUse the identities (3): \\(S=T+2\\rho+1,\\;\\delta^{2}=T-\\rho^{2}\\). Moreover  \n\n\\[\n2\\rho^{2}+3\\rho+1-S = \\rho(2\\rho+1)-T,\\qquad\n\\rho S+(\\rho+1)T = (2\\rho+1)(T+\\rho).\n\\]\n\nNow compute  \n\n\\[\n\\rho^{2}S-\\delta^{2}T = \\rho^{2}(T+2\\rho+1)-(T-\\rho^{2})T\n                     = -T^{2}+2\\rho^{2}T+2\\rho^{3}+\\rho^{2}.\n\\]\n\nHence  \n\n\\[\n(2\\rho+1)(\\rho^{2}S-\\delta^{2}T)=(2\\rho+1)\\bigl(-T^{2}+2\\rho^{2}T+2\\rho^{3}+\\rho^{2}\\bigr). \\tag{16}\n\\]\n\nFor the second term,\n\n\\[\n\\begin{aligned}\n(2\\rho^{2}+3\\rho+1-S)\\bigl(\\rho S+(\\rho+1)T\\bigr)\n &= \\bigl(\\rho(2\\rho+1)-T\\bigr)\\,(2\\rho+1)(T+\\rho)\\\\\n &= (2\\rho+1)\\Bigl[\\rho(2\\rho+1)(T+\\rho)-T(T+\\rho)\\Bigr]\\\\\n &= (2\\rho+1)\\bigl(2\\rho^{2}T+2\\rho^{3}+\\rho^{2}-T^{2}\\bigr). \\tag{17}\n\\end{aligned}\n\\]\n\nThe right\u2011hand sides of (16) and (17) are identical; therefore their difference is zero.  \nConsequently \\(\\det=0\\) and \\(D',G,X\\) are collinear.  \n\n\\[\n\\boxed{G\\in D'X}. \\tag{18}\n\\]\n\n---\n\n**8.  \\(G\\) lies on the line \\(OI\\)**  \n\nThe circumcenter \\(O\\) also lies on the perpendicular bisector of \\(BC\\); write  \n\n\\[\nO=(h,y_O),\\qquad h=-\\frac{\\delta}{2}.\n\\]\n\nThe condition \\(OA=OB\\) gives  \n\n\\[\n(u-h)^{2}+(v-y_O)^{2}=(-d-h)^{2}+y_O^{2}.\n\\]\n\nExpanding and cancelling \\(y_O^{2}\\) yields  \n\n\\[\n(u-h)^{2}+v^{2}-2v\\,y_O = (-d-h)^{2}=\\Bigl(\\frac{a}{2}\\Bigr)^{2}. \\tag{19}\n\\]\n\nNow  \n\n\\[\nu-h = \\frac{\\delta}{\\Delta}+\\frac{\\delta}{2}= \\frac{\\delta(\\rho+1)}{2\\Delta},\\qquad\n(u-h)^{2}= \\frac{\\delta^{2}(\\rho+1)^{2}}{4\\Delta^{2}},\\qquad\nv^{2}= \\frac{4\\rho^{2}}{\\Delta^{2}}.\n\\]\n\nSubstituting into (19) and solving for \\(y_O\\):\n\n\\[\n2v\\,y_O = \\frac{\\delta^{2}(\\rho+1)^{2}}{4\\Delta^{2}}+\\frac{4\\rho^{2}}{\\Delta^{2}}-\\frac{a^{2}}{4}.\n\\]\n\nSince \\(v=2\\rho/\\Delta\\),\n\n\\[\ny_O = \\frac{\\delta^{2}(\\rho+1)^{2}+16\\rho^{2}-a^{2}\\Delta^{2}}{4\\Delta^{2}}\n      \\Big/ \\Bigl(2\\cdot\\frac{2\\rho}{\\Delta}\\Bigr)\n    = \\frac{\\delta^{2}(\\rho+1)^{2}+16\\rho^{2}-a^{2}\\Delta^{2}}{16\\rho\\,\\Delta}. \\tag{20}\n\\]\n\nSimplify the numerator. Write \\(Q=d^{2}+e^{2}\\) (so \\(\\delta^{2}=Q-2\\rho,\\;a^{2}=Q+2\\rho,\\;\\Delta=\\rho-1\\)). Then  \n\n\\[\n\\begin{aligned}\nN &:=\\delta^{2}(\\rho+1)^{2}+16\\rho^{2}-a^{2}\\Delta^{2}\\\\\n  &= (Q-2\\rho)(\\rho^{2}+2\\rho+1)+16\\rho^{2}-(Q+2\\rho)(\\rho-1)^{2}\\\\\n  &= 4\\rho\\bigl(Q-\\rho^{2}+4\\rho-1\\bigr)\\\\\n  &= 4\\rho\\bigl(S-2\\rho^{2}+4\\rho-2\\bigr) \\quad (\\text{since }Q=S-\\rho^{2}-1).\n\\end{aligned}\n\\]\n\nThus  \n\n\\[\ny_O = \\frac{4\\rho\\bigl(S-2\\rho^{2}+4\\rho-2\\bigr)}{16\\rho\\,\\Delta}\n    = \\frac{S-2\\rho^{2}+4\\rho-2}{4\\Delta}. \\tag{21}\n\\]\n\nNow compute  \n\n\\[\n\\begin{aligned}\nG_y-1 &= \\frac{2(S+\\rho^{2}-1)}{3S}-1 = -\\frac{S-2\\rho^{2}+2}{3S},\\\\[2mm]\ny_O-1 &= \\frac{S-2\\rho^{2}+4\\rho-2}{4\\Delta}-1 = \\frac{S-2\\rho^{2}+2}{4\\Delta},\\\\[2mm]\nh &= -\\frac{\\delta}{2},\\qquad G_x = \\frac{2\\delta\\Delta}{3S}.\n\\end{aligned}\n\\]\n\nThen  \n\n\\[\n\\begin{aligned}\n(G_y-1)h &= -\\frac{S-2\\rho^{2}+2}{3S}\\Bigl(-\\frac{\\delta}{2}\\Bigr)\n         = \\frac{\\delta\\,(S-2\\rho^{2}+2)}{6S},\\\\[2mm]\nG_x\\,(y_O-1) &= \\frac{2\\delta\\Delta}{3S}\\cdot\\frac{S-2\\rho^{2}+2}{4\\Delta}\n             = \\frac{\\delta\\,(S-2\\rho^{2}+2)}{6S}.\n\\end{aligned}\n\\]\n\nThus \\((G_y-1)h = G_x\\,(y_O-1)\\); this equality means that the vectors \\(I\\!\\to\\!G\\) and \\(I\\!\\to\\!O\\) are linearly dependent, i.e. \\(I,G,O\\) are collinear. (When \\(\\delta=0\\) we have \\(h=0,\\;G_x=0\\) and all three points lie on the \\(y\\)-axis, so collinearity holds trivially.)  \n\n\\[\n\\boxed{G\\in OI}. \\tag{22}\n\\]\n\n---\n\n**9.  Concurrency on the line \\(OI\\)**  \n\nThe whole construction is cyclically symmetric. If we cyclically permute the vertices \\((A,B,C)\\to(B,C,A)\\), the definitions transform as  \n\n\\[\n(D,X,D')\\;\\longrightarrow\\;(E,Y,E'),\\qquad\n\\text{and similarly }(E,Y,E')\\to(F,Z,F').\n\\]\n\nThe point \\(G\\) \u2013 the centroid of \\(\\triangle DEF\\) \u2013 remains unchanged because the set \\(\\{D,E,F\\}\\) is unchanged by a mere relabelling.  \nThe proof given in Sections\u202f1\u20138 uses only the fact that we are dealing with a side of the triangle and its adjacent contact point; therefore it applies equally well to side \\(CA\\) after the cyclic relabelling, yielding \\(G\\in E'Y\\). One more cyclic permutation gives \\(G\\in F'Z\\).\n\nConsequently the three lines \\(D'X,\\;E'Y,\\;F'Z\\) all pass through the same point \\(G\\), and by (22) this point lies on the line \\(OI\\). \u220e\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "\\textbf{Claim.} $X,E,E_{2}$ are colinear.\n\n\n \\noindent\\emph{Proof. }Let $T$ be a intersection of $EE_{2}$ and\n $AC$. Observe that $CE_{1}=CE=CE_{2}$ and $(B,C,E,E_{1},E_{2})$\n are cyclic. This gives $\\angle E_{2}E_{1}C=\\frac{1}{2}(180^{\\circ}-2\\angle C)=\\angle E_{2}TC$,\n so $(E_{2},T,C,E_{1})$ are cyclic. Thus, $T=X$, and we have $X,E,E_{2}$\n colinear.\n\n\n Now, observe $\\angle OXC=90-\\angle XE_{2}C=90-\\angle EE_{2}C=90-\\angle ABC=90-\\angle ADE=90-\\angle XDE$.\n Thus, $\\angle OXC+\\angle XDE=90^{\\circ}$, and we have $XO\\perp DE$\n as desired.", "grading guidelines": "(Partial)\n 1. Proved that $X,E,E_{2}$ are colinear.\n(Almost)\n 1. Verification contains minor mistakes only.", "level": "IMO-easy", "source": "(Modified) FKMO 2016 P1", "question": "Given an acute triangle $ABC$, let $D$ and $E$ be the feet of\n the altitudes from $B$ to $AC$ and $C$ to $AB$, respectively.\n Let $E_{1}$ and $E_{2}$ be the reflections of $E$ with respect\n to $AC$ and $BC$, respectively. If $X$ (not equal to $C$) is an\n intersection point of the circumcircle of $\\triangle CE_{1}E_{2}$\n and $AC$, and $O$ is the circumcenter of $\\triangle CE_{1}E_{2}$,\n prove that $XO$ is perpendicular to $DE$.", "problem_idx": "PB-Basic-027", "type": "Geometry", "model_prediction": {"proof": "### 1.  A convenient coordinate system  \nBecause the statement is invariant under similarity transformations (rotation, translation, uniform scaling) we may place the triangle so that  \n\n\\[\nA=(0,0),\\qquad C=(1,0)\n\\]\n\nand \\(AC\\) is the \\(x\\)-axis.  \nSince the triangle is **acute**, the foot \\(D\\) of the altitude from \\(B\\) to \\(AC\\) lies **between** \\(A\\) and \\(C\\).  \nWrite \\(B=(d,h)\\) with  \n\n\\[\n0<d<1,\\qquad h>0 .\n\\]\n\nThen the projection of \\(B\\) onto the \\(x\\)-axis is \\(D=(d,0)\\).\n\n---\n\n### 2.  Coordinates of \\(E\\) (foot from \\(C\\) to \\(AB\\))  \n\nThe line \\(AB\\) passes through the origin; a point on it has the form \\(tB\\).  \nThe orthogonal projection of \\(C\\) onto this line is obtained by  \n\n\\[\nt=\\frac{C\\cdot B}{B\\cdot B}= \\frac{d}{d^{2}+h^{2}} .\n\\]\n\nSet  \n\n\\[\nk=d^{2}+h^{2},\\qquad a=\\frac{d^{2}}{k},\\qquad b=\\frac{dh}{k}.\n\\]\n\nThus  \n\n\\[\nE=(a,b),\\qquad\\text{and we note } a^{2}+b^{2}=a \\;( \\text{since }a^{2}+b^{2}= \\frac{d^{4}+d^{2}h^{2}}{k^{2}}=\\frac{d^{2}k}{k^{2}}=a).\n\\]\n\nFor later use we also introduce  \n\n\\[\np=\\frac{h^{2}}{k}=1-a\\qquad(\\text{so }a+p=1).\n\\]\n\n---\n\n### 3.  The reflected points \\(E_{1},E_{2}\\)\n\n*Reflection across \\(AC\\) (the \\(x\\)-axis) simply changes the sign of the \\(y\\)-coordinate:*  \n\n\\[\nE_{1}=(a,-b).\n\\]\n\n*Reflection across \\(BC\\).*  \nLet \\(\\delta =1-d\\;(>0)\\).  Write  \n\n\\[\nw=B-C=(d-1,h)=(-\\delta ,h),\\qquad L=|w|^{2}=\\delta ^{2}+h^{2}=k+1-2d .\n\\]\n\nThe vector from \\(C\\) to \\(E\\) is  \n\n\\[\nv=E-C=(a-1,b)=(-p,b).\n\\]\n\nBecause \\(C\\) lies on the line \\(BC\\), the reflection of \\(E\\) across \\(BC\\) is  \n\n\\[\nE_{2}=C+2\\operatorname{proj}_{w}(v)-v,\n\\]\nwhere \\(\\operatorname{proj}_{w}(v)=\\dfrac{v\\cdot w}{w\\cdot w}\\,w\\).\n\nFirst compute  \n\n\\[\nv\\cdot w =(-p)(-\\delta)+b\\,h =p\\delta+d p =p(\\delta+d)=p\\qquad(\\text{since }\\delta+d=1).\n\\]\n\nHence  \n\n\\[\n\\alpha =\\frac{v\\cdot w}{w\\cdot w}= \\frac{p}{L}.\n\\]\n\nTherefore  \n\n\\[\nE_{2}=C+2\\alpha w-v\n      =(1,0)+2\\frac{p}{L}(-\\delta ,h)-(-p,b)\n      =\\Bigl(1+p-\\frac{2p\\delta}{L},\\; \\frac{2p h}{L}-b\\Bigr).\n\\]\n\nDenote  \n\n\\[\nx_{2}=1+p-\\frac{2p\\delta}{L},\\qquad y_{2}= \\frac{2p h}{L}-b .\n\\]\n\nA few useful relations follow immediately:\n\n* \\(b=\\dfrac{d h}{k}= \\dfrac{d p}{h}\\) (because \\(p=h^{2}/k\\)).  \n* \\(x_{2}-1 = p\\Bigl(1-\\frac{2\\delta}{L}\\Bigr)=p\\frac{k-1}{L}\\).  \n* \\(h y_{2}+d p = 2p\\,\\frac{h^{2}}{L}\\).   (Indeed \\(h y_{2}=2p\\frac{h^{2}}{L}-d p\\).)  \n* \\(x_{2}-a = (x_{2}-1)+(1-a)= p\\frac{k-1}{L}+p = p\\Bigl(\\frac{k-1}{L}+1\\Bigr)\n          =p\\frac{k-1+L}{L}=p\\frac{2(k-d)}{L}=2p\\frac{k-d}{L}\\).  \n\n---\n\n### 4.  Equations of the perpendicular bisectors of \\(CE_{1}\\) and \\(CE_{2}\\)\n\nLet \\((x,y)\\) be a point.  The circumcenter \\(O=(x_{0},y_{0})\\) of \\(\\triangle C E_{1}E_{2}\\) satisfies  \n\n\\[\n|(x,y)-C|^{2}=|(x,y)-E_{1}|^{2},\\qquad |(x,y)-C|^{2}=|(x,y)-E_{2}|^{2}.\n\\]\n\n#### 4.1  Bisector of \\(CE_{1}\\)\n\n\\[\n(x-1)^{2}+y^{2}=(x-a)^{2}+(y+b)^{2}.\n\\]\n\nExpanding and cancelling \\(x^{2},y^{2}\\) gives  \n\n\\[\n-2x+1=-2ax +a^{2}+2by+b^{2}.\n\\]\n\nUsing \\(a^{2}+b^{2}=a\\) and \\(1-a=p\\),\n\n\\[\n2x(a-1)+(1-a)-2by=0\\;\\Longrightarrow\\;p(1-2x)=2by.\n\\]\n\nInsert \\(b=\\dfrac{dh}{k}\\) and multiply by \\(k\\):  \n\n\\[\nh^{2}(1-2x)=2dhy.\n\\]\n\nDividing by \\(h>0\\) and rearranging yields the **linear equation**\n\n\\[\n\\boxed{\\,2h x+2d y = h\\,}. \\tag{L1}\n\\]\n\n#### 4.2  Bisector of \\(CE_{2}\\)\n\n\\[\n(x-1)^{2}+y^{2}=(x-x_{2})^{2}+(y-y_{2})^{2}.\n\\]\n\nAfter cancelling \\(x^{2},y^{2}\\),\n\n\\[\n-2x+1=-2x_{2}x +x_{2}^{2}-2y_{2}y+y_{2}^{2},\n\\]\n\\[\n\\Longrightarrow\\;2(x_{2}-1)x+2y_{2}y+1-x_{2}^{2}-y_{2}^{2}=0. \\tag{*}\n\\]\n\nBecause \\(E_{2}\\) is the reflection of \\(E\\) across \\(BC\\) and \\(C\\) lies on \\(BC\\),  \n\n\\[\n|E_{2}-C|^{2}=|E-C|^{2}.\n\\]\n\nBut  \n\n\\[\n|E-C|^{2}=(a-1)^{2}+b^{2}=a^{2}-2a+1+b^{2}=a-2a+1=1-a=p.\n\\]\n\nThus  \n\n\\[\n(x_{2}-1)^{2}+y_{2}^{2}=p.\n\\]\n\nExpanding this relation gives  \n\n\\[\nx_{2}^{2}-2x_{2}+1+y_{2}^{2}=p\\;\\Longrightarrow\\;x_{2}^{2}+y_{2}^{2}=2x_{2}-a.\n\\]\n\nSubstituting into \\((*)\\) we obtain  \n\n\\[\n2(x_{2}-1)x+2y_{2}y+1-(2x_{2}-a)=0,\n\\]\n\nor equivalently  \n\n\\[\n\\boxed{\\,2(x_{2}-1)x+2y_{2}y = 2x_{2}-a-1\\,}. \\tag{L2}\n\\]\n\n---\n\n### 5.  The vectors \\(OX\\) and \\(DE\\)\n\nThe circle through \\(C,E_{1},E_{2}\\) meets the line \\(AC\\) (the \\(x\\)-axis) at \\(C=(1,0)\\) and at another point \\(X=(x_{X},0)\\) (given \\(X\\neq C\\)).  \nSince \\(O\\) is the centre, it lies on the perpendicular bisector of the chord \\(CX\\).  The chord is horizontal, therefore its perpendicular bisector is **vertical**; consequently the midpoint of \\(CX\\) has the same \\(x\\)-coordinate as \\(O\\):\n\n\\[\nx_{0}=\\frac{1+x_{X}}{2}\\quad\\Longrightarrow\\quad x_{X}=2x_{0}-1.\n\\]\n\nHence  \n\n\\[\n\\overrightarrow{OX}=X-O=(x_{X}-x_{0},\\,0-y_{0})=(x_{0}-1,\\,-y_{0}). \\tag{3}\n\\]\n\nFor \\(DE\\) we have \\(D=(d,0),\\;E=(a,b)\\); thus  \n\n\\[\n\\overrightarrow{DE}=E-D=(a-d,\\;b).\n\\]\n\nUsing \\(a=\\dfrac{d^{2}}{k}\\) and \\(b=\\dfrac{dh}{k}\\),\n\n\\[\na-d=\\frac{d^{2}}{k}-d=\\frac{d(d-k)}{k},\\qquad b=\\frac{dh}{k}. \\tag{4}\n\\]\n\n---\n\n### 6.  What has to be proved  \n\nFrom (3) and (4)\n\n\\[\n\\overrightarrow{OX}\\!\\cdot\\!\\overrightarrow{DE}\n   =(x_{0}-1)\\frac{d(d-k)}{k}+(-y_{0})\\frac{dh}{k}\n   =\\frac{d}{k}\\Bigl[(x_{0}-1)(d-k)-y_{0}h\\Bigr].\n\\]\n\nTherefore  \n\n\\[\n\\overrightarrow{OX}\\perp\\overrightarrow{DE}\n\\;\\Longleftrightarrow\\;\n(x_{0}-1)(d-k)-y_{0}h=0\n\\;\\Longleftrightarrow\\;\ny_{0}=\\frac{d-k}{h}\\,(x_{0}-1).\n\\]\n\nSet  \n\n\\[\n\\lambda=\\frac{d-k}{h}.\n\\]\n\nThe desired condition is simply  \n\n\\[\n\\boxed{\\;\\lambda x_{0}-y_{0}-\\lambda=0\\;}. \\tag{5}\n\\]\n\n---\n\n### 7.  Showing that the circumcenter satisfies \\(\\lambda x-y=\\lambda\\)\n\nDefine the two linear forms coming from (L1) and (L2):\n\n\\[\nL_{1}(x,y)=2h x+2d y-h,\\qquad \nL_{2}(x,y)=2(x_{2}-1)x+2y_{2}y-(2x_{2}-a-1).\n\\]\n\nThe circumcenter \\(O=(x_{0},y_{0})\\) satisfies \\(L_{1}(O)=0,\\;L_{2}(O)=0\\).\n\nWe look for real numbers \\(\\alpha,\\beta\\) such that **for all** \\((x,y)\\)\n\n\\[\n\\alpha L_{1}(x,y)+\\beta L_{2}(x,y)=\\lambda x-y-\\lambda. \\tag{*}\n\\]\n\nIf such \\(\\alpha,\\beta\\) exist, then substituting \\(O\\) gives \\(\\lambda x_{0}-y_{0}-\\lambda=0\\), which is exactly (5).\n\n#### 7.1  Determining \\(\\alpha,\\beta\\) from the coefficients of \\(x\\) and \\(y\\)\n\nEquating coefficients of \\(x,\\;y\\) and the constant term in \\((*)\\) yields the system  \n\n\\[\n\\begin{aligned}\n2h\\alpha+2(x_{2}-1)\\beta &=\\lambda, \\tag{9}\\\\\n2d\\alpha+2y_{2}\\beta &=-1, \\tag{10}\\\\\n-h\\alpha-(2x_{2}-a-1)\\beta &=-\\lambda. \\tag{11}\n\\end{aligned}\n\\]\n\nBecause the two perpendicular bisectors are not parallel (otherwise \\(\\triangle C E_{1}E_{2}\\) would be degenerate), the determinant  \n\n\\[\n\\Delta = h\\,y_{2}-d\\,(x_{2}-1)\\neq 0.\n\\]\n\nSolving (9)\u2013(10) for \\(\\alpha,\\beta\\) (Cramer\u2019s rule) gives  \n\n\\[\n\\alpha=\\frac{\\lambda y_{2}+(x_{2}-1)}{2\\Delta},\\qquad \n\\beta=-\\frac{h+d\\lambda}{2\\Delta}. \\tag{12}\n\\]\n\n#### 7.2  Verifying that (11) is automatically satisfied  \n\nInsert (12) into the left\u2011hand side of (11) and multiply by \\(2\\Delta\\):\n\n\\[\n-\\,h\\bigl(\\lambda y_{2}+(x_{2}-1)\\bigr)+(2x_{2}-a-1)(h+d\\lambda)\n   \\;=\\; -2\\lambda\\Delta .\n\\]\n\nReplace \\(\\Delta = h y_{2}-d(x_{2}-1)\\) on the right and bring everything to one side:\n\n\\[\n-\\,h\\lambda y_{2}-h(x_{2}-1)+(2x_{2}-a-1)h+(2x_{2}-a-1)d\\lambda\n   +2\\lambda h y_{2}-2\\lambda d(x_{2}-1)=0.\n\\]\n\nGroup the terms containing \\(\\lambda\\) and the remaining ones:\n\n\\[\n\\lambda\\Bigl[-h y_{2}+d(2x_{2}-a-1)+2h y_{2}-2d(x_{2}-1)\\Bigr]\n   +h\\Bigl[-(x_{2}-1)+(2x_{2}-a-1)\\Bigr]=0.\n\\]\n\nThe bracket without \\(\\lambda\\) simplifies to \\(h(x_{2}-a)\\).  \nInside the \\(\\lambda\\)\u2011bracket we have  \n\n\\[\nh y_{2}+d\\bigl[(2x_{2}-a-1)-2(x_{2}-1)\\bigr]\n   =h y_{2}+d(1-a).\n\\]\n\nThus condition (11) is equivalent to  \n\n\\[\n\\boxed{\\;\\lambda\\bigl(h y_{2}+d(1-a)\\bigr)+h\\,(x_{2}-a)=0\\;}. \\tag{13}\n\\]\n\nNow use the relations obtained in **\u00a73**:\n\n* \\(1-a=p\\).  \n* \\(h y_{2}+d p = 2p\\,\\dfrac{h^{2}}{L}\\).  \n* \\(x_{2}-a = 2p\\,\\dfrac{k-d}{L}\\).  \n\nSubstituting these into (13) yields  \n\n\\[\n\\lambda\\cdot\\frac{2p h^{2}}{L}+h\\cdot\\frac{2p(k-d)}{L}\n   =\\frac{2p}{L}\\Bigl(\\lambda h^{2}+h(k-d)\\Bigr).\n\\]\n\nBecause \\(\\lambda=\\dfrac{d-k}{h}\\),\n\n\\[\n\\lambda h^{2}+h(k-d)=\\frac{d-k}{h}\\,h^{2}+h(k-d)=h(d-k)+h(k-d)=0.\n\\]\n\nHence (13) holds, and consequently (11) is satisfied for the \\(\\alpha,\\beta\\) of (12).\n\n#### 7.3  Conclusion of this step  \n\nWith \\(\\alpha,\\beta\\) defined by (12), the identity \\((*)\\) is true for **all** \\((x,y)\\).  \nSince \\(O\\) satisfies \\(L_{1}(O)=0,\\;L_{2}(O)=0\\), we obtain  \n\n\\[\n\\lambda x_{0}-y_{0}-\\lambda =0,\n\\]\n\ni.e.  \n\n\\[\ny_{0}=\\lambda(x_{0}-1)=\\frac{d-k}{h}\\,(x_{0}-1). \\tag{5}\n\\]\n\n---\n\n### 8.  End of the proof  \n\nInsert (5) into the expression for \\(\\overrightarrow{OX}\\!\\cdot\\!\\overrightarrow{DE}\\) from **\u00a76**:\n\n\\[\n\\overrightarrow{OX}\\!\\cdot\\!\\overrightarrow{DE}\n   =\\frac{d}{k}\\Bigl[(x_{0}-1)(d-k)-\\Bigl(\\frac{d-k}{h}(x_{0}-1)\\Bigr)h\\Bigr]\n   =\\frac{d}{k}\\bigl[(x_{0}-1)(d-k)-(x_{0}-1)(d-k)\\bigr]=0.\n\\]\n\nTherefore \\(\\overrightarrow{OX}\\perp\\overrightarrow{DE}\\), which is exactly  \n\n\\[\n\\boxed{\\;XO\\perp DE\\;}.\n\\]\n\n\u220e\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Consider the inversion centered at $A$ with power $\\sqrt{\\frac{1}{2} AE \\times AC}$. Under\n this inversion, the Euler circle remains unchanged, while $B$ and\n $C$ are mapped to $B'$ and $C'$, which are the midpoints of $AF$\n and $AE$, respectively.\n\n\n Observe that if $AXI'Y$ is a rhombus, then $(W)$ is the image of\n the mixtilinear incircle of $\\triangle AEF$ under a homothety centered\n at $A$ with ratio $\\frac{1}{2}$. The $A$-excircle of $\\triangle ABC$,\n which is tangent to $AB,AC$, and $BC$, is mapped to the circle $(V)$,\n which is tangent to $AB,AC$, and $(AB'C')$, i.e., the mixtilinear\n incircle of $\\triangle AEF$.\n\n\n It remains to prove that $(V)$ is tangent to the Euler circle, which\n would imply that $(V)$ coincides with $(W)$. Indeed, by Feuerbach's\n theorem, the $A$-excircle is externally tangent to $(E)$. Thus,\n under the inversion, $(V)$ is also tangent to $(E)$, which implies\n that $(V)$ coincides with $(W)$, as desired.", "grading guidelines": "(Partial)\n 1. Applied correct inversion and modified the goal to showing $(V)$ is tangent to the Euler circle.\n 2. Obtained equivalent information without inversion.\n(Almost)\n 1. Verification contains minor mistakes only.", "level": "IMO-medium", "source": "Novel Problem", "question": "In $\\triangle ABC$ the altitudes $BE$ and $CF$ intersect at $H$. A circle $(W)$ is\n externally tangent to the Euler circle $(E)$ of $\\triangle ABC$ and also tangent\n to the sides $AB$ and $AC$ at $X$ and $Y$, respectively, with\n $(W)$ being closer to $A$ than the Euler circle. Let $I'$ be the\n incenter of $\\triangle AEF$. Prove that $AXI'Y$ is a rhombus.", "problem_idx": "PB-Basic-028", "type": "Geometry", "model_prediction": {"proof": "### 1.  Coordinate set\u2011up  \nPlace \\(A\\) at the origin and let \\(AB\\) be the positive \\(x\\)-axis.  \nDenote  \n\n\\[\nc = AB,\\qquad b = AC,\\qquad \\alpha = \\angle A\\;(0<\\alpha<\\pi).\n\\]\n\nThen  \n\n\\[\nB=(c,0),\\qquad C=(b\\cos\\alpha,\\;b\\sin\\alpha),\n\\]\n\nand (law of cosines)  \n\n\\[\na^2 = BC^2 = b^2 + c^2 - 2bc\\cos\\alpha .\n\\]\n\n### 2.  Feet of the altitudes  \n\n**Point \\(E\\) (from \\(B\\) onto \\(AC\\)).**  \nA point on \\(AC\\) has the form \\(tC\\).  The condition \\(BE\\perp AC\\) gives  \n\n\\[\n(B-tC)\\cdot C =0\\;\\Longrightarrow\\; t=\\frac{B\\!\\cdot\\!C}{|C|^2}\n               =\\frac{bc\\cos\\alpha}{b^2}= \\frac{c\\cos\\alpha}{b}.\n\\]\n\nHence  \n\n\\[\nE=tC=\\bigl(c\\cos^{2}\\alpha,\\;c\\cos\\alpha\\sin\\alpha\\bigr).\n\\]\n\n**Point \\(F\\) (from \\(C\\) onto \\(AB\\)).**  \nSince \\(AB\\) is the \\(x\\)-axis, the foot is  \n\n\\[\nF=(b\\cos\\alpha,\\,0).\n\\]\n\n### 3.  Triangle \\(AEF\\) and its incenter \\(I'\\)\n\nCompute the side lengths (positive distances):\n\n\\[\n\\begin{aligned}\nAF &=|b\\cos\\alpha| = b\\,|\\!\\cos\\alpha|,\\\\[2mm]\nAE &=\\sqrt{(c\\cos^{2}\\alpha)^{2}+(c\\cos\\alpha\\sin\\alpha)^{2}}\n      =c\\,|\\!\\cos\\alpha|,\\\\[2mm]\nEF &=\\sqrt{(c\\cos^{2}\\alpha-b\\cos\\alpha)^{2}+(c\\cos\\alpha\\sin\\alpha)^{2}} \\\\\n    &=\\sqrt{\\cos^{2}\\alpha\\bigl((c\\cos\\alpha-b)^{2}+c^{2}\\sin^{2}\\alpha\\bigr)}\\\\\n    &=\\sqrt{\\cos^{2}\\alpha\\bigl(c^{2}(\\cos^{2}\\alpha+\\sin^{2}\\alpha)-2bc\\cos\\alpha+b^{2}\\bigr)}\\\\\n    &=\\sqrt{\\cos^{2}\\alpha\\,(b^{2}+c^{2}-2bc\\cos\\alpha)}\\\\\n    &=a\\,|\\!\\cos\\alpha|.\n\\end{aligned}\n\\]\n\nThe incenter of a triangle is the weighted average of its vertices, the weights being the lengths of the opposite sides.  For \\(\\triangle AEF\\),\n\n\\[\nI'=\\frac{AF\\cdot E+AE\\cdot F+EF\\cdot A}{AF+AE+EF}.\n\\]\n\nBecause \\(A=(0,0)\\) the term \\(EF\\!\\cdot\\!A\\) vanishes.  Substituting the lengths,\n\n\\[\nI'=\\frac{b|\\!\\cos\\alpha|\\;E\\;+\\;c|\\!\\cos\\alpha|\\;F}\n        {(a+b+c)\\,|\\!\\cos\\alpha|}\n    =\\frac{bE+cF}{a+b+c}\\qquad (\\text{provided }|\\!\\cos\\alpha|\\neq0).\n\\]\n\nLet  \n\n\\[\nS = a+b+c,\\qquad d_{0}= \\frac{bc\\cos\\alpha}{S}.\n\\]\n\nNow  \n\n\\[\nbE = b\\bigl(c\\cos^{2}\\alpha,\\;c\\cos\\alpha\\sin\\alpha\\bigr)\n    = (bc\\cos^{2}\\alpha,\\;bc\\cos\\alpha\\sin\\alpha),\n\\]\n\\[\ncF = c(b\\cos\\alpha,0) = (bc\\cos\\alpha,0),\n\\]\n\nso  \n\n\\[\nbE+cF = \\bigl(bc\\cos\\alpha(1+\\cos\\alpha),\\;bc\\cos\\alpha\\sin\\alpha\\bigr),\n\\]\n\nand therefore  \n\n\\[\n\\boxed{\\;I'=\\Bigl(\\frac{bc\\cos\\alpha(1+\\cos\\alpha)}{S},\n               \\frac{bc\\cos\\alpha\\sin\\alpha}{S}\\Bigr)}\\tag{1}\n\\]\n\n### 4.  The circle \\((W)\\)\n\nSince \\((W)\\) is tangent to \\(AB\\) and \\(AC\\), its centre \\(P\\) lies on the internal bisector of \\(\\angle A\\).  \nIntroduce the unit vector along this bisector  \n\n\\[\n\\mathbf w = (\\cos\\tfrac\\alpha2,\\;\\sin\\tfrac\\alpha2)=:(u,v),\\qquad u>0,\\;v>0.\n\\]\n\nWrite \\(P = p\\mathbf w\\) with \\(p>0\\).  The distance to \\(AB\\) (the \\(x\\)-axis) is the \\(y\\)-coordinate, so the radius is  \n\n\\[\nr = pv .\n\\]\n\nThe foot of the perpendicular from \\(P\\) to \\(AB\\) is  \n\n\\[\nX = (pu,0).\n\\]\n\nSet  \n\n\\[\nd = AX = pu \\qquad\\Longrightarrow\\qquad p = \\frac{d}{u},\\; r = d\\,\\frac{v}{u}=d\\tan\\frac\\alpha2.\n\\]\n\nThe foot on \\(AC\\) is obtained by projecting onto the unit direction  \n\n\\[\n\\mathbf e = (\\cos\\alpha,\\sin\\alpha).\n\\]\n\nBecause \\(\\mathbf w\\!\\cdot\\!\\mathbf e = \\cos\\frac\\alpha2 = u\\), we have  \n\n\\[\nP\\!\\cdot\\!\\mathbf e = p\\,u = d,\n\\]\n\nhence the foot is  \n\n\\[\nY = d\\,\\mathbf e = (d\\cos\\alpha,\\;d\\sin\\alpha),\\qquad AY = d.\n\\]\n\nThus  \n\n\\[\n\\boxed{\\;X=(d,0),\\qquad Y=(d\\cos\\alpha,\\;d\\sin\\alpha)\\;}. \\tag{2}\n\\]\n\n### 5.  The nine\u2011point (Euler) circle  \n\n**Circumcenter \\(O\\).**  \nThe perpendicular bisector of \\(AB\\) is \\(x = c/2\\).  \nFor \\(AC\\): midpoint \\(M=(\\frac{b\\cos\\alpha}{2},\\frac{b\\sin\\alpha}{2})\\) and slope \\(\\tan\\alpha\\); the perpendicular slope is \\(-\\cot\\alpha\\).  Substituting \\(x=c/2\\) gives  \n\n\\[\ny = \\frac{b - c\\cos\\alpha}{2\\sin\\alpha}.\n\\]\n\nTherefore  \n\n\\[\nO = \\Bigl(\\frac{c}{2},\\;\\frac{b-c\\cos\\alpha}{2\\sin\\alpha}\\Bigr),\\qquad \nR = OA = \\frac{a}{2\\sin\\alpha}\\quad(\\text{law of sines}).\n\\]\n\n**Nine\u2011point centre \\(N\\).**  \nThe orthocenter \\(H\\) satisfies the Euler\u2011line relation \\(H = A+B+C-2O\\).  With \\(A\\) at the origin this becomes  \n\n\\[\nH = B + C - 2O.\n\\]\n\nConsequently  \n\n\\[\nN = \\frac{O+H}{2}= \\frac{B+C-O}{2},\\qquad \nR_{N}= \\frac{R}{2}= \\frac{a}{4\\sin\\alpha}.\n\\]\n\nWe shall need two quantities:\n\n* \\( |N|^{2} - R_{N}^{2}\\)  \n* \\( N\\!\\cdot\\!\\mathbf w + R_{N}v\\).\n\n---\n\n**Computation of \\(|N|^{2} - R_{N}^{2}\\).**  \n\n\\[\n|N|^{2}= \\frac{|B+C-O|^{2}}{4}\n       = \\frac{|B+C|^{2}+|O|^{2}-2(B+C)\\!\\cdot\\!O}{4}.\n\\]\n\n\\[\n|B+C|^{2}= (c+b\\cos\\alpha)^{2}+(b\\sin\\alpha)^{2}=c^{2}+2bc\\cos\\alpha+b^{2}.\n\\]\n\n\\[\n|O|^{2}=R^{2}= \\frac{a^{2}}{4\\sin^{2}\\alpha}.\n\\]\n\n\\[\nB\\!\\cdot\\!O = \\frac{c^{2}}{2},\\qquad\nC\\!\\cdot\\!O = \\frac{bc\\cos\\alpha}{2}+ \\frac{b(b-c\\cos\\alpha)}{2}\n            = \\frac{b^{2}}{2},\n\\]\n\nhence \\((B+C)\\!\\cdot\\!O = \\dfrac{c^{2}+b^{2}}{2}\\).\n\nThus  \n\n\\[\n|N|^{2}= \\frac{c^{2}+2bc\\cos\\alpha+b^{2}+R^{2}-(c^{2}+b^{2})}{4}\n       = \\frac{2bc\\cos\\alpha+R^{2}}{4},\n\\]\n\nand  \n\n\\[\n|N|^{2}-R_{N}^{2}= \\frac{2bc\\cos\\alpha+R^{2}}{4} - \\frac{R^{2}}{4}\n                = \\frac{bc\\cos\\alpha}{2}. \\tag{3}\n\\]\n\n---\n\n**Computation of \\(N\\!\\cdot\\!\\mathbf w + R_{N}v\\).**  \n\nFirst,  \n\n\\[\nN\\!\\cdot\\!\\mathbf w = \\frac{(B+C)\\!\\cdot\\!\\mathbf w - O\\!\\cdot\\!\\mathbf w}{2}.\n\\]\n\n\\[\nB\\!\\cdot\\!\\mathbf w = c\\,u,\\qquad \nC\\!\\cdot\\!\\mathbf w = b(\\cos\\alpha\\,u+\\sin\\alpha\\,v)=b\\,u,\n\\]\n\nso \\((B+C)\\!\\cdot\\!\\mathbf w = (b+c)u\\).\n\n\\[\nO\\!\\cdot\\!\\mathbf w = \\frac{c}{2}\\,u + \\frac{b-c\\cos\\alpha}{2\\sin\\alpha}\\,v.\n\\]\n\nHence  \n\n\\[\nN\\!\\cdot\\!\\mathbf w = \\frac{(b+c)u-\\frac{c}{2}u-\\frac{b-c\\cos\\alpha}{2\\sin\\alpha}v}{2}\n                  = \\frac{(b+\\frac{c}{2})u}{2}\n                    -\\frac{(b-c\\cos\\alpha)v}{4\\sin\\alpha}. \\tag{4}\n\\]\n\nNow  \n\n\\[\nR_{N}v = \\frac{a}{4\\sin\\alpha}\\,v .\n\\]\n\nAdding (4) and this term,\n\n\\[\nN\\!\\cdot\\!\\mathbf w + R_{N}v\n   = \\frac{(b+\\frac{c}{2})u}{2}\n     +\\frac{ a-(b-c\\cos\\alpha) }{4\\sin\\alpha}\\,v\n   = \\frac{(b+\\frac{c}{2})u}{2}\n     +\\frac{ a-b+c\\cos\\alpha }{4\\sin\\alpha}\\,v .\n\\]\n\nBecause \\(\\sin\\alpha = 2uv\\), we have \\(v/\\sin\\alpha = 1/(2u)\\).  Therefore  \n\n\\[\n\\frac{ a-b+c\\cos\\alpha }{4\\sin\\alpha}\\,v\n   = \\frac{ a-b+c\\cos\\alpha }{8u}.\n\\]\n\nAlso  \n\n\\[\n\\frac{(b+\\frac{c}{2})u}{2}= \\frac{bu}{2}+\\frac{cu}{4}\n                         = \\frac{u(2b+c)}{4}.\n\\]\n\nConsequently  \n\n\\[\n\\boxed{\\;N\\!\\cdot\\!\\mathbf w + R_{N}v\n      = \\frac{u(2b+c)}{4} + \\frac{a-b+c\\cos\\alpha}{8u}\\;}. \\tag{5}\n\\]\n\n### 6.  Tangency condition  \n\n\\((W)\\) is externally tangent to the nine\u2011point circle, therefore  \n\n\\[\n|P-N| = R_{N}+r. \\tag{6}\n\\]\n\nRecall \\(P = \\dfrac{d}{u}\\,\\mathbf w\\) and \\(r = d\\,\\dfrac{v}{u}\\).  Squaring (6) gives  \n\n\\[\n\\frac{d^{2}}{u^{2}} -2\\frac{d}{u}\\,(N\\!\\cdot\\!\\mathbf w) +|N|^{2}\n   = R_{N}^{2} +2R_{N}\\frac{d\\,v}{u} +\\frac{d^{2}v^{2}}{u^{2}}.\n\\]\n\nRe\u2011arranging and using \\(1-v^{2}=u^{2}\\),\n\n\\[\nd^{2} -2\\frac{d}{u}\\bigl(N\\!\\cdot\\!\\mathbf w + R_{N}v\\bigr)\n      +\\bigl(|N|^{2}-R_{N}^{2}\\bigr)=0. \\tag{7}\n\\]\n\nInsert (3) and (5):\n\n\\[\n|N|^{2}-R_{N}^{2}= \\frac{bc\\cos\\alpha}{2},\n\\]\n\\[\n\\frac{d}{u}\\bigl(N\\!\\cdot\\!\\mathbf w + R_{N}v\\bigr)\n   = d\\Bigl[\\,\\frac{2b+c}{4} + \\frac{a-b+c\\cos\\alpha}{8u^{2}}\\Bigr].\n\\]\n\nSince \\(u^{2}=\\cos^{2}\\frac\\alpha2 = \\dfrac{1+\\cos\\alpha}{2}\\), we have \\(\\displaystyle\\frac{1}{u^{2}}=\\frac{2}{1+\\cos\\alpha}\\).  Hence  \n\n\\[\n\\frac{d}{u}\\bigl(N\\!\\cdot\\!\\mathbf w + R_{N}v\\bigr)\n   = d\\Bigl[\\,\\frac{2b+c}{4} + \\frac{a-b+c\\cos\\alpha}{4(1+\\cos\\alpha)}\\Bigr].\n\\]\n\nSubstituting into (7) yields  \n\n\\[\nd^{2} - 2d\\Bigl[\\,\\frac{2b+c}{4} + \\frac{a-b+c\\cos\\alpha}{4(1+\\cos\\alpha)}\\Bigr]\n      + \\frac{bc\\cos\\alpha}{2}=0. \\tag{8}\n\\]\n\nMultiplying the bracket by \\(2\\) we may write (8) as  \n\n\\[\nd^{2} - d\\Bigl[\\,\\frac{2b+c}{2} + \\frac{a-b+c\\cos\\alpha}{2(1+\\cos\\alpha)}\\Bigr]\n      + \\frac{bc\\cos\\alpha}{2}=0. \\tag{9}\n\\]\n\n### 7.  Simplifying the coefficient  \n\nSet  \n\n\\[\nT = \\frac{2b+c}{2} + \\frac{a-b+c\\cos\\alpha}{2(1+\\cos\\alpha)}.\n\\]\n\nCompute \\(T - \\dfrac{S}{2}\\) (where \\(S=a+b+c\\)):\n\n\\[\n\\begin{aligned}\nT-\\frac{S}{2}\n&= \\frac{2b+c}{2}-\\frac{a+b+c}{2}\n   +\\frac{a-b+c\\cos\\alpha}{2(1+\\cos\\alpha)} \\\\[2mm]\n&= \\frac{b-a}{2} + \\frac{a-b+c\\cos\\alpha}{2(1+\\cos\\alpha)}\\\\[2mm]\n&= -\\frac{a-b}{2} + \\frac{a-b+c\\cos\\alpha}{2(1+\\cos\\alpha)}\\\\[2mm]\n&= \\frac{-(a-b)(1+\\cos\\alpha)+(a-b+c\\cos\\alpha)}{2(1+\\cos\\alpha)}\\\\[2mm]\n&= \\frac{-(a-b)\\cos\\alpha + c\\cos\\alpha}{2(1+\\cos\\alpha)}\\\\[2mm]\n&= \\frac{\\cos\\alpha\\,(b+c-a)}{2(1+\\cos\\alpha)}.\n\\end{aligned}\n\\]\n\nNow use the law of cosines.  From  \n\n\\[\n(b+c)^{2} - a^{2} = 2bc(1+\\cos\\alpha)\n\\]\n\nand \\((b+c)^{2}-a^{2}=(b+c-a)(b+c+a)=(b+c-a)S\\), we obtain  \n\n\\[\n(b+c-a)S = 2bc(1+\\cos\\alpha)\n\\;\\Longrightarrow\\;\n\\frac{b+c-a}{2(1+\\cos\\alpha)} = \\frac{bc}{S}.\n\\]\n\nTherefore  \n\n\\[\nT-\\frac{S}{2}= \\cos\\alpha\\cdot\\frac{bc}{S}= d_{0},\n\\qquad\\text{so}\\qquad \nT = \\frac{S}{2} + d_{0}. \\tag{10}\n\\]\n\nRecall \\(d_{0}= \\dfrac{bc\\cos\\alpha}{S}\\).\n\n### 8.  Solving for \\(d\\) and choosing the correct root  \n\nInsert (10) into (9) and note that \\(\\dfrac{bc\\cos\\alpha}{2}=d_{0}\\dfrac{S}{2}\\):\n\n\\[\nd^{2} - \\Bigl(\\frac{S}{2}+d_{0}\\Bigr)d + d_{0}\\frac{S}{2}=0.\n\\]\n\nThis quadratic factorises as  \n\n\\[\n(d-d_{0})\\Bigl(d-\\frac{S}{2}\\Bigr)=0.\n\\]\n\nHence  \n\n\\[\nd = d_{0}= \\frac{bc\\cos\\alpha}{a+b+c}\\quad\\text{or}\\quad\nd = \\frac{S}{2}= \\frac{a+b+c}{2}. \\tag{11}\n\\]\n\nGeometric restrictions:  \n\\(X\\) lies on side \\(AB\\) and \\(Y\\) on side \\(AC\\); therefore  \n\n\\[\n0 < d \\le AB = c,\\qquad 0 < d \\le AC = b.\n\\]\n\nFrom the triangle inequalities \\(a+c>b\\) and \\(a+b>c\\) we obtain  \n\n\\[\n\\frac{S}{2} = \\frac{a+b+c}{2} > b,\\qquad\n\\frac{S}{2} > c.\n\\]\n\nThus \\(d=S/2\\) violates \\(d\\le b,c\\) and is impossible.  \nConsequently the only admissible value is  \n\n\\[\n\\boxed{\\;d = d_{0} = \\dfrac{bc\\cos\\alpha}{a+b+c}\\;}. \\tag{12}\n\\]\n\nBecause \\(d>0\\), (12) forces \\(\\cos\\alpha>0\\) (i.e. \\(\\angle A\\) is acute), which is consistent with the existence of the configuration.\n\n### 9.  Coordinates of \\(I'\\) expressed through \\(d\\)\n\nFrom (1) and (12),\n\n\\[\nI' = \\Bigl( d(1+\\cos\\alpha),\\; d\\sin\\alpha \\Bigr). \\tag{13}\n\\]\n\n### 10.  \\(AXI'Y\\) is a rhombus  \n\nUsing (2) and (13) we have  \n\n\\[\nA=(0,0),\\; X=(d,0),\\; Y=(d\\cos\\alpha,d\\sin\\alpha),\\;\nI'=(d(1+\\cos\\alpha),d\\sin\\alpha).\n\\]\n\n**Side lengths:**  \n\n\\[\n\\begin{aligned}\nAX &=|X-A| = d,\\\\\nAY &= \\sqrt{(d\\cos\\alpha)^{2}+(d\\sin\\alpha)^{2}} = d,\\\\\nXI'&= \\sqrt{(d\\cos\\alpha)^{2}+(d\\sin\\alpha)^{2}} = d,\\\\\nYI'&= \\sqrt{d^{2}+0^{2}} = d.\n\\end{aligned}\n\\]\n\nThus \\(AX=AY=XI'=YI'\\).\n\n**Vectors:**  \n\n\\[\n\\begin{aligned}\n\\overrightarrow{AX} &= (d,0),\\\\\n\\overrightarrow{AY} &= (d\\cos\\alpha,\\;d\\sin\\alpha),\\\\\n\\overrightarrow{XI'} &= (d(1+\\cos\\alpha)-d,\\;d\\sin\\alpha-0) = (d\\cos\\alpha,\\;d\\sin\\alpha)=\\overrightarrow{AY},\\\\\n\\overrightarrow{YI'} &= (d(1+\\cos\\alpha)-d\\cos\\alpha,\\;d\\sin\\alpha-d\\sin\\alpha) = (d,0)=\\overrightarrow{AX}.\n\\end{aligned}\n\\]\n\nHence opposite sides are parallel and equal; \\(A X I' Y\\) is a parallelogram with all sides equal \u2013 a **rhombus**.\n\n\u220e\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "Let $\\ell$ be the nearest to $O$ line from $L$ and $\\ell\\cap I=\\left\\{ X_{1},X_{2},...,X_{n-1}\\right\\} $\n with $|OX_{i}|\\leq|OX_{i+1}|$ for every $i.$\n\n Claim. Open segment $OX_{i}$ intersects at most $i-1$ line from\n $S$.\n\n Proof. Suppose the contrary, so $OX_{i}$ intersects $i$ lines and\n in particular it intersects line $\\ell'$ such that $Y=\\ell\\cap\\ell'\\notin\\bigcup_{t=1}^{i-1}\\{X_{t}\\}.$\n If $Z=OX_{i}\\cap\\ell'$ we get the contradiction with\n \\[\n |OY|\\geq|OX_{i}|\\implies\\angle OYX_{i}<90^{\\circ}\\implies d(O,\\ell')=|OY|\\cdot\\sin\\angle OYZ<|OY|\\cdot\\sin\\angle OYX_{i}=d(O,\\ell)\\text{ }\\Box\n \\]\n Now with fixed $n$ we apply induction by $p.$ By the claim $X_{1}$\n is always red, so the base case $p=0$ follows. Now consider problem\n statement for $S\\backslash\\ell$ and $p=k,$ so there exist at least\n $C_{p+2}^{2}$ red points. After backing $\\ell$ to $L$ and increasing\n $p$ to $p+1$ all red points are preserved and by claim all points\n $X_{1},X_{2},...,X_{p+2}$ are red, so totally there are at least\n $C_{p+3}^{2}$ red points.\n\n For the example construction, we take $X=(-1,-1)$ and $n$ lines\n to be the lines connecting $(0,n-1-i)$ and $(i,0)$ for $0\\le i\\le n-1$.", "grading guidelines": "(Partial)\n 1. Guessed the correct answer along with the optimal case construction.\n(Almost)\n 1. Verification contains minor mistakes only.\n 2. Proof is correct, but does not provided the optimal case construction.", "level": "IMO-medium", "source": "(modified) IMO Shortlist 2008 G5", "question": "Let $p$ and $n$ be integers with $0\\le p\\le n-2$. Consider a set\n $S$ of $n$ lines in the plane such that no two of them are parallel\n and no three have a common point. Denote by $I$ the set of intersections\n of lines in $S$. Let $O$ be a point in the plane not lying on any\n line of $S$. A point $X\\in I$ is colored red if the open line segment\n $OX$ intersects at most $p$ lines in $S$. What is the minimum number\n of red points that is contained in $I$?", "problem_idx": "PB-Basic-029", "type": "Geometry", "model_prediction": {"proof": "### 1.  Notation and preliminary facts  \n\nLet \\(S=\\{L_{1},L_{2},\\dots ,L_{n}\\}\\) be \\(n\\) lines in the plane with  \n\n* no two lines parallel,  \n* no three lines concurrent.  \n\nDenote by \\(I\\) the set of all intersection points \\(L_{i}\\cap L_{j}\\;(i\\neq j)\\).  \nFix a point \\(O\\) that does **not** lie on any line of \\(S\\).  \n\nFor a point \\(X=L_{i}\\cap L_{j}\\) we define  \n\n\\[\nd(X)=\\bigl|\\{L\\in S\\setminus\\{L_{i},L_{j}\\}\\mid \\text{the **open** segment }OX\\text{ meets }L\\}\\bigr|.\n\\]\n\nA point \\(X\\in I\\) is called **red** (for a given integer \\(p\\)) if \\(d(X)\\le p\\).  \nLet \\(R(p)=\\{X\\in I\\mid d(X)\\le p\\}\\); we are asked for the minimum possible value of \\(|R(p)|\\) when \\(p\\) satisfies \\(0\\le p\\le n-2\\).\n\n---\n\n**Observation.**  For a line \\(L\\) that does **not** contain \\(O\\) nor \\(X\\), the open segment \\(OX\\) meets \\(L\\) **iff** the points \\(O\\) and \\(X\\) lie in opposite open half\u2011planes determined by \\(L\\).  \n(Indeed, the segment is a continuous curve; it can cross the infinite line only when its endpoints are on different sides.)\n\nBecause \\(O\\) is not on any line and, for \\(X=L_{i}\\cap L_{j}\\), we only consider lines different from \\(L_{i},L_{j}\\), the equivalence applies.\n\n---\n\n### 2.  A universal lower bound  \n\nWe prove by induction on \\(p\\) that for **every** admissible configuration  \n\n\\[\n|R(p)|\\ge\\frac{(p+1)(p+2)}{2}\\qquad(0\\le p\\le n-2).\n\\]\n\n---\n\n#### 2.1  Base case  \\(p=0\\)\n\nFor each line \\(L\\) choose a linear function \\(f_{L}\\) such that  \n\n* \\(L=\\{f_{L}=0\\}\\),  \n* \\(f_{L}(O)>0\\) (possible because \\(O\\notin L\\)).  \n\nThe cell (region) containing \\(O\\) is then  \n\n\\[\nC=\\{X\\in\\mathbb{R}^{2}\\mid f_{L}(X)>0\\text{ for every }L\\in S\\}.\n\\]\n\n\\(C\\) is an open convex polygon (it may be unbounded); its vertices are intersection points of two lines of \\(S\\).  \nPick any vertex \\(V\\) of \\(C\\); write \\(V=L_{i}\\cap L_{j}\\) with \\(i\\neq j\\).\n\nBecause \\(V\\) is a vertex of \\(C\\), we have \\(f_{L_{i}}(V)=f_{L_{j}}(V)=0\\).  \nFor any other line \\(L\\neq L_{i},L_{j}\\), the point \\(V\\) lies on the boundary of \\(C\\); hence there exists a sequence of points of \\(C\\) converging to \\(V\\).  \nContinuity of \\(f_{L}\\) gives \\(f_{L}(V)\\ge 0\\). If \\(f_{L}(V)=0\\), then \\(V\\) would belong to \\(L\\), contradicting the fact that no three lines are concurrent. Consequently  \n\n\\[\nf_{L}(V)>0\\qquad\\text{for all }L\\neq L_{i},L_{j}.\n\\]\n\nNow take any point \\(X\\) on the **open** segment \\(OV\\). Write \\(X=(1-t)O+tV\\) with \\(t\\in(0,1)\\). By affinity of the linear functions,\n\n\\[\nf_{L}(X)=(1-t)f_{L}(O)+t\\,f_{L}(V).\n\\]\n\n* For \\(L\\neq L_{i},L_{j}\\): both \\(f_{L}(O)\\) and \\(f_{L}(V)\\) are positive, so \\(f_{L}(X)>0\\).  \n* For \\(L=L_{i}\\) or \\(L=L_{j}\\): \\(f_{L}(V)=0\\) and \\(f_{L}(O)>0\\); hence \\(f_{L}(X)=(1-t)f_{L}(O)>0\\) (because \\(t<1\\)).\n\nThus \\(f_{L}(X)>0\\) for every line \\(L\\); i.e. \\(X\\in C\\). Hence the whole open segment \\(OV\\) is contained in \\(C\\) and therefore meets **no** line. Consequently \\(d(V)=0\\), so \\(V\\) is red.  \nWe have shown \\(|R(0)|\\ge 1\\), and indeed \\(1=\\frac{(0+1)(0+2)}{2}\\).\n\n---\n\n#### 2.2  Induction hypothesis  \n\nAssume that for some integer \\(p\\ge 1\\) the statement holds for \\(p-1\\); i.e. for **every** configuration (with any number \\(m\\) of lines satisfying \\(p-1\\le m-2\\))\n\n\\[\n|R(p-1)|\\ge\\frac{p(p+1)}{2}.\n\\]\n\nWe shall prove the inequality for the parameter \\(p\\).\n\n---\n\n#### 2.3  Choosing the line closest to \\(O\\)\n\nIn our configuration (with \\(n\\) lines, \\(p\\le n-2\\)) pick a line \\(L\\in S\\) whose distance to \\(O\\) is **minimal** (distance is positive because \\(O\\) lies on none of the lines).  \nLet \\(P\\) be the foot of the perpendicular from \\(O\\) onto \\(L\\).\n\n**Lemma 1.** For every line \\(K\\neq L\\) the points \\(O\\) and \\(P\\) lie on the **same** open half\u2011plane determined by \\(K\\), and moreover \\(P\\notin K\\).\n\n*Proof.*  \nIf \\(O\\) and \\(P\\) were on opposite sides of \\(K\\), the segment \\(OP\\) would intersect \\(K\\) at some point \\(Q\\). Then  \n\n\\[\n\\operatorname{dist}(O,K)\\le OQ<OP=\\operatorname{dist}(O,L),\n\\]\n\ncontradicting the minimality of \\(L\\). Hence \\(O\\) and \\(P\\) cannot be on opposite sides.\n\nNow suppose \\(P\\in K\\). Then \\(\\operatorname{dist}(O,K)\\le OP\\).  \nIf \\(\\operatorname{dist}(O,K)<OP\\) we again obtain a contradiction to the minimality of \\(L\\).  \nIf \\(\\operatorname{dist}(O,K)=OP\\), then \\(OP\\) is the perpendicular from \\(O\\) to \\(K\\) (the unique point of \\(K\\) achieving the distance). Thus \\(OP\\perp K\\). But \\(OP\\perp L\\); therefore \\(L\\) and \\(K\\) are both perpendicular to \\(OP\\) and consequently parallel \u2013 impossible because no two lines of \\(S\\) are parallel.  \nHence \\(P\\notin K\\), and together with the first part we conclude that \\(O\\) and \\(P\\) lie on the same side of \\(K\\). \u220e\n\nFor each line \\(K\\neq L\\) denote \\(Y_{K}=L\\cap K\\) (the intersection exists because lines are not parallel, and distinct \\(K\\) give distinct \\(Y_{K}\\) \u2013 otherwise three lines would concur).\n\n---\n\n#### 2.4  Depths of the vertices lying on \\(L\\)\n\nConsider a vertex \\(X=L\\cap M\\) with \\(M\\neq L\\).  \nFor a line \\(K\\neq L,M\\) look at the point \\(Y_{K}=L\\cap K\\).\n\nBecause \\(O\\) and \\(P\\) are on the same side of \\(K\\) (Lemma\u202f1), the point \\(X\\) is on the opposite side of \\(K\\) from \\(O\\) **iff** \\(Y_{K}\\) lies **strictly between** \\(P\\) and \\(X\\) on the line \\(L\\).  \n(Geometric reason: on \\(L\\) the point \\(Y_{K}\\) separates the two half\u2011rays; points on one ray belong to one half\u2011plane of \\(K\\), points on the other ray to the opposite half\u2011plane. Since \\(P\\) (hence \\(O\\)) is on one side, crossing to the opposite side occurs exactly when we pass \\(Y_{K}\\).)\n\nTherefore  \n\n\\[\nd(X)=\\bigl|\\{K\\in S\\setminus\\{L,M\\}\\mid Y_{K}\\text{ lies between }P\\text{ and }X\\text{ on }L\\}\\bigr|.\n\\]\n\nNow look at the set of points on \\(L\\) consisting of \\(P\\) together with all intersection points \\(Y_{K}\\;(K\\neq L)\\). There are exactly \\(n\\) distinct points: \\(P\\) and the \\(n-1\\) points where \\(L\\) meets the other lines.\n\nOrder these points along \\(L\\). Let  \n\n* \\(a\\) = number of points \\(Y_{K}\\) on one side of \\(P\\),  \n* \\(b\\) = number of points \\(Y_{K}\\) on the other side.\n\nClearly \\(a+b=n-1\\).\n\nOn the side containing \\(a\\) points, list them by increasing distance from \\(P\\) as \\(X_{1},X_{2},\\dots ,X_{a}\\).  \nFor the point \\(X_{r}\\) the only points of \\(\\{Y_{K}\\}\\) that lie between \\(P\\) and \\(X_{r}\\) are \\(X_{1},\\dots ,X_{r-1}\\); consequently  \n\n\\[\nd(X_{r})=r-1\\qquad (1\\le r\\le a).\n\\]\n\nSimilarly, on the opposite side list the points as \\(Y_{1},Y_{2},\\dots ,Y_{b}\\) (again by increasing distance from \\(P\\)); then \\(d(Y_{s})=s-1\\) for \\(1\\le s\\le b\\).\n\nThus the number of vertices on \\(L\\) whose depth does **not** exceed \\(p\\) is  \n\n\\[\n\\#\\{r\\le a\\mid r-1\\le p\\}+\\#\\{s\\le b\\mid s-1\\le p\\}\n   =\\min(a,\\,p+1)+\\min(b,\\,p+1).\n\\]\n\nWe claim that this sum is always at least \\(p+1\\).  \nIndeed, because \\(a+b=n-1\\ge p+1\\) (recall \\(p\\le n-2\\)), we have three cases:\n\n* If \\(a\\ge p+1\\) and \\(b\\ge p+1\\): sum \\(\\ge 2(p+1)\\ge p+1\\).\n* If exactly one of \\(a,b\\) is \\(<p+1\\): the sum equals that smaller number \\(+ (p+1)\\ge p+1\\).\n* If both \\(a,b<p+1\\): then \\(a+b=n-1\\ge p+1\\) and the sum equals \\(a+b\\ge p+1\\).\n\nHence **on the line \\(L\\) there are at least \\(p+1\\) red vertices** (i.e. vertices with \\(d\\le p\\)).\n\n---\n\n#### 2.5  Using the induction hypothesis  \n\nRemove the line \\(L\\) and consider the reduced arrangement \\(S' = S\\setminus\\{L\\}\\) of \\(n-1\\) lines.  \nThe conditions (no parallels, no three concurrent, \\(O\\) not on any line) are still satisfied, and we have \\(p-1\\le (n-1)-2\\) because \\(p\\le n-2\\).\n\nFor a vertex \\(X\\in I(S')\\) (intersection of two lines from \\(S'\\)) denote by  \n\n* \\(d_{S'}(X)\\) its depth in the reduced arrangement,  \n* \\(d_{S}(X)\\) its depth in the original arrangement.\n\nWhen we add back the line \\(L\\), the only new line that can be intersected by the open segment \\(OX\\) is \\(L\\) itself. Therefore  \n\n\\[\nd_{S}(X)=d_{S'}(X)+\\varepsilon,\\qquad \n\\varepsilon=\\begin{cases}\n1 &\\text{if }L\\text{ separates }O\\text{ and }X,\\\\[2mm]\n0 &\\text{otherwise}.\n\\end{cases}\n\\]\n\nConsequently, if \\(d_{S'}(X)\\le p-1\\) then \\(d_{S}(X)\\le (p-1)+1=p\\); i.e. every point that is red for parameter \\(p-1\\) in the reduced arrangement remains red for parameter \\(p\\) in the original one.\n\nApply the induction hypothesis to \\(S'\\) with parameter \\(p-1\\). It yields  \n\n\\[\n|R_{S'}(p-1)|\\ge\\frac{p(p+1)}{2}.\n\\]\n\nAll these points are intersections of lines **not** containing \\(L\\); hence they are distinct from the red vertices that lie on \\(L\\) (a common point would imply three concurrent lines).  \nAdding the at least \\(p+1\\) red vertices found on \\(L\\) we obtain  \n\n\\[\n|R(p)|\\ge (p+1)+\\frac{p(p+1)}{2}=\\frac{(p+1)(p+2)}{2}.\n\\]\n\nThis completes the induction step.\n\nSince the base case \\(p=0\\) holds, by induction the inequality  \n\n\\[\n|R(p)|\\ge\\frac{(p+1)(p+2)}{2}\n\\]\n\nis true for **all** admissible configurations.\n\n---\n\n### 3.  A construction attaining the bound  \n\nWe now exhibit an explicit arrangement together with a point \\(O\\) for which the number of red points equals exactly \\(\\frac{(p+1)(p+2)}{2}\\), proving that the lower bound is best possible.\n\n---\n\n#### 3.1  The lines  \n\nFor \\(k=1,2,\\dots ,n\\) define  \n\n\\[\nL_k:\\; y = k\\,x + k^{2}.\n\\]\n\n* Slopes \\(k\\) are all different \u21d2 no two lines are parallel.  \n* Intersection of \\(L_i\\) and \\(L_j\\) \\((i\\neq j)\\):  \n\n  \\[\n  i x + i^{2}=j x + j^{2}\\;\\Longrightarrow\\;(i-j)x=j^{2}-i^{2}=-(i-j)(i+j),\n  \\]\n  hence \\(x=-(i+j)\\) and \\(y=i(-(i+j))+i^{2}=-ij\\).  \n  So \\(X_{ij}=(-(i+j),\\,-ij)\\).\n\n* If a third line \\(L_k\\) also passed through \\(X_{ij}\\), substituting gives  \n\n  \\[\n  k^{2}-k(i+j)+ij=(k-i)(k-j)=0,\n  \\]\n  which forces \\(k=i\\) or \\(k=j\\). Thus **no three lines are concurrent**.\n\n---\n\n#### 3.2  Choice of the point \\(O\\)  \n\nTake \\(O=(0,M)\\) with \\(M>n^{2}\\) (for instance \\(M=n^{2}+1\\)).  \nObviously \\(O\\) is not on any \\(L_k\\) (on \\(L_k\\) we would have \\(y=k^{2}<M\\)).  \n\nFor each line define the linear function  \n\n\\[\nf_k(x,y)=y-kx-k^{2},\n\\]\n\nso that \\(L_k=\\{f_k=0\\}\\). Then \\(f_k(O)=M-k^{2}>0\\) for every \\(k\\).\n\n---\n\n#### 3.3  Depth of a vertex  \n\nFix indices \\(i<j\\). For any \\(k\\neq i,j\\),\n\n\\[\nf_k(X_{ij}) = -ij -k\\bigl(-(i+j)\\bigr)-k^{2}\n            = -ij + k(i+j) - k^{2}\n            = -(k-i)(k-j).\n\\]\n\nBecause \\(f_k(O)>0\\), the line \\(L_k\\) separates \\(O\\) and \\(X_{ij}\\) exactly when \\(f_k(X_{ij})<0\\), i.e. when \\((k-i)(k-j)>0\\).  \nThe inequality \\((k-i)(k-j)>0\\) holds precisely for \\(k<i\\) or \\(k>j\\).\n\nTherefore the number of lines (different from \\(L_i,L_j\\)) intersecting the open segment \\(OX_{ij}\\) is  \n\n\\[\nd(X_{ij}) = (i-1)+(n-j).\n\\]\n\n---\n\n#### 3.4  Counting the red points  \n\n\\(X_{ij}\\) is red iff \\(d(X_{ij})\\le p\\), i.e.  \n\n\\[\n(i-1)+(n-j)\\le p\\;\\Longleftrightarrow\\;j-i\\ge n-p-1.\n\\]\n\nSet \\(L:=n-p-1\\); note that \\(p\\le n-2\\) implies \\(L\\ge1\\).  \nWe count the pairs \\((i,j)\\) with \\(1\\le i<j\\le n\\) and \\(j-i\\ge L\\).\n\nFor a fixed \\(i\\) (which can run from \\(1\\) to \\(n-L\\)) the admissible values of \\(j\\) are  \n\n\\[\nj=i+L,\\;i+L+1,\\;\\dots ,\\;n,\n\\]\n\ngiving \\(n-i-L+1\\) possibilities. Hence the total number of red points is  \n\n\\[\n\\sum_{i=1}^{n-L}(n-i-L+1)\n   =\\sum_{i=1}^{n-L}\\bigl((n-L+1)-i\\bigr)\n   =\\frac{(n-L)(n-L+1)}{2}.\n\\]\n\nSince \\(n-L = p+1\\), this equals \\(\\displaystyle\\frac{(p+1)(p+2)}{2}\\).\n\n---\n\nThus this configuration has **exactly** \\(\\frac{(p+1)(p+2)}{2}\\) red intersection points, showing that the lower bound is sharp.\n\n---\n\n### 4.  Conclusion  \n\nWe have proved that for every arrangement  \n\n\\[\n|R(p)|\\ge\\frac{(p+1)(p+2)}{2},\n\\]\n\nand we have exhibited an arrangement attaining this number. Consequently the minimum possible number of red points is  \n\n\\[\n\\boxed{\\dfrac{(p+1)(p+2)}{2}}.\n\\]\n\n---", "average_automatic_rating": 1.0, "human_rating": 7}}
{"solution": "If $AB,CD$ are parallel to each other then $(W_{1})$ maps to $(W_{4}),(W_{2})$\n maps to $(W_{3})$ via a reflection w.r.t. the center $O$ of the\n parallelogram $ABCD$.\n\n If $AB,CD$ are not parallel to each other then let $X$ be the intersection\n of $AB,CD$. Consider the inversion with power $XA.XC$ and then reflect\n it w.r.t. to the internal bisector $\\angle AXD$, we have $A\\rightarrow C$,\n $B\\rightarrow D$ (1). Note that inversion preserves the angle between\n the circles and the lines, and so $(W_{1})$ is mapped to $(W_{4})$\n since we have (1) and the angle between $(W_{1})$ and $AB$ is $\\alpha$,\n which is also the angle between $(W_{4})$ and $CD$. Similarly, we\n have $(W_{2})$ is mapped to $(W_{3})$. Since $(W_{1})$ is tangent\n to $(W_{2})$, we have $(W_{3})$ is tangent to $(W_{4})$. Hence\n proved.", "grading guidelines": "(Partial)\n 1. Performed an inversion w.r.t. $AB\\cap CD$ and re-analyzed the given problem.\n(Almost)\n 1. Verification contains minor mistakes only.\n 2. Did not consider the case when $AB$ and $CD$ are parallel.", "level": "IMO-easy", "source": "Novel Problem", "question": "Given a trapezoid $ABCD$ with $AB,CD$ as the two legs. Circle $(W_{1})$ passes through $A,B$, and $(W_{2})$ passes through $C,D$ so that they are tangent to each other. The inscribed angle on circle $W_1$ corresponding to the arc AB on the side opposite to C and D is alpha, and the inscribed angle on circle $W_2$ corresponding to the arc CD on the side opposite to  A and B is beta. Construct $(W_{3})$ passing through $A,B$, $(W_{4})$ passing through $C,D$ such that the inscribed angle on circle W3 corresponding to the arc AB on the side opposite to C and D is $\\beta$, and the inscribed angle on circle $W_4$ corresponding to the arc CD on the side opposite to  A and B is b $\\alpha$. Prove that $(W_{3}),(W_{4})$ are tangent to each other.", "problem_idx": "PB-Basic-030", "type": "Geometry", "model_prediction": {"proof": "**1.  Coordinate system**  \n\nLet \\(E\\) be the intersection point of the lines \\(AB\\) and \\(CD\\) (the legs are not parallel, so they intersect).  \nWe adopt the usual convention that a trapezoid is convex; therefore \\(E\\) lies outside the segments \\(AB\\) and \\(CD\\). Consequently \\(A,B\\) lie on the same ray from \\(E\\) and \\(C,D\\) lie on another common ray from \\(E\\).\n\nPlace the origin at \\(E\\) and rotate the plane so that the ray \\(EA\\) (and \\(EB\\)) coincides with the positive \\(x\\)-axis. Then we can write  \n\n\\[\nA=(a,0),\\qquad B=(b,0)\\qquad (a,b>0).\n\\]\n\nLet the ray \\(EC\\) (and \\(ED\\)) make an angle \\(\\varphi\\) with the positive \\(x\\)-axis. The interior of the trapezoid is taken to be the half\u2011plane \\(y>0\\); hence \\(\\sin\\varphi>0\\). With positive numbers \\(c=EC,\\;d=ED\\) we have  \n\n\\[\nC=(c\\cos\\varphi,\\;c\\sin\\varphi),\\qquad D=(d\\cos\\varphi,\\;d\\sin\\varphi)\\qquad (c,d>0).\n\\]\n\nThe lengths of the legs are \\(AB=|b-a|,\\;CD=|c-d|\\).\n\n**2.  Condition \\(AD\\parallel BC\\)**  \n\n\\[\n\\overrightarrow{AD}=D-A=(d\\cos\\varphi-a,\\;d\\sin\\varphi),\\qquad\n\\overrightarrow{BC}=C-B=(c\\cos\\varphi-b,\\;c\\sin\\varphi).\n\\]\n\nParallelism gives \\(\\overrightarrow{AD}\\parallel\\overrightarrow{BC}\\). Equating the determinants (or slopes) yields  \n\n\\[\n(d\\cos\\varphi-a)\\,c\\sin\\varphi = d\\sin\\varphi\\,(c\\cos\\varphi-b).\n\\]\n\nBecause \\(\\sin\\varphi\\neq0\\),\n\n\\[\n(d\\cos\\varphi-a)c = d(c\\cos\\varphi-b)\\;\\Longrightarrow\\;ac=bd. \\tag{1}\n\\]\n\n**3.  Auxiliary quantities**  \n\nHalf\u2011lengths of the legs  \n\n\\[\np=\\frac{AB}{2}= \\frac{|b-a|}{2},\\qquad q=\\frac{CD}{2}= \\frac{|c-d|}{2}.\n\\]\n\nMidpoints  \n\n\\[\nM=\\frac{A+B}{2}=\\Bigl(\\frac{a+b}{2},\\,0\\Bigr),\\qquad\nN=\\frac{C+D}{2}=\\Bigl(\\frac{c+d}{2}\\cos\\varphi,\\;\\frac{c+d}{2}\\sin\\varphi\\Bigr).\n\\]\n\nUnit normals  \n\n* For \\(AB\\) we take the unit normal pointing toward \\(C,D\\). Because the interior is the upper half\u2011plane,  \n\n  \\[\n  \\mathbf n=(0,1).\n  \\]\n\n* For \\(CD\\) we need a unit normal pointing toward \\(A,B\\). A vector perpendicular to \\(\\overrightarrow{CD}= (c-d)(\\cos\\varphi,\\sin\\varphi)\\) is \\((-\\sin\\varphi,\\cos\\varphi)\\); rotating it suitably we choose  \n\n  \\[\n  \\mathbf m=(\\sin\\varphi,-\\cos\\varphi).\n  \\]\n\n  One checks that \\(|\\mathbf m|=1\\) and that for a point on the \\(x\\)-axis, e.g. \\(A=(a,0)\\),\n\n  \\[\n  A\\!\\cdot\\!\\mathbf m = a\\sin\\varphi>0,\n  \\]\n\n  confirming that \\(\\mathbf m\\) points to the side containing \\(A,B\\).\n\nImportant dot products  \n\n\\[\n\\begin{aligned}\n\\mathbf n\\!\\cdot\\! N &= \\frac{c+d}{2}\\sin\\varphi, &\n\\mathbf m\\!\\cdot\\! M &= \\frac{a+b}{2}\\sin\\varphi, &\n\\mathbf n\\!\\cdot\\!\\mathbf m &= -\\cos\\varphi,\\\\[2mm]\nM\\!\\cdot\\!\\mathbf n &= 0,\\qquad N\\!\\cdot\\!\\mathbf m = 0 .\n\\end{aligned}\n\\]\n\n**4.  A lemma about chords and inscribed angles**  \n\n> **Lemma.** Let \\(XY\\) be a chord of length \\(2l\\) of a circle, \\(K\\) its midpoint, and \\(\\mathbf u\\) a unit normal to \\(XY\\) pointing to one side. If on the side **opposite** to \\(\\mathbf u\\) the inscribed angle subtended by \\(XY\\) equals \\(\\theta\\;(0<\\theta<\\pi)\\), then the signed distance from \\(K\\) to the centre \\(O\\) along \\(\\mathbf u\\) is  \n> \\[\n> d = -\\,l\\cot\\theta,\n> \\]\n> and the radius is \\(R = \\dfrac{l}{\\sin\\theta}\\). Consequently \\(R^{2}= l^{2}+d^{2}\\).\n\n*Proof.* Place a coordinate system with origin at \\(K\\), the chord on the \\(x\\)-axis (endpoints \\(X=(-l,0),\\;Y=(l,0)\\)) and \\(\\mathbf u\\) as the positive \\(y\\)-direction. Let the centre be \\(O=(0,d)\\). The radius is \\(R=\\sqrt{l^{2}+d^{2}}\\).  \n\nChoose the point \\(T\\) on the circle that lies on the opposite side of the chord; a convenient choice is the point obtained by moving straight downward from the centre by the radius:  \n\n\\[\nT=(0,d-R).\n\\]\n\nBecause \\(R>|d|\\), we have \\(d-R<0\\); therefore \\(T\\) is indeed on the opposite side. By hypothesis \\(\\angle XTY = \\theta\\).\n\nVectors \\(TX = X-T = (-l,\\;R-d)\\) and \\(TY = Y-T = (l,\\;R-d)\\) have equal length \\(\\sqrt{l^{2}+(R-d)^{2}}\\). Hence  \n\n\\[\n\\cos\\theta = \\frac{TX\\!\\cdot\\!TY}{|TX||TY|}\n           = \\frac{-l^{2}+(R-d)^{2}}{l^{2}+(R-d)^{2}} .\n\\]\n\nUsing \\(R^{2}=l^{2}+d^{2}\\) we compute  \n\n\\[\n(R-d)^{2}=R^{2}-2Rd+d^{2}=l^{2}+2d^{2}-2Rd .\n\\]\n\nSubstituting gives  \n\n\\[\n\\cos\\theta = \\frac{-l^{2}+l^{2}+2d^{2}-2Rd}{l^{2}+l^{2}+2d^{2}-2Rd}\n           = \\frac{2d(d-R)}{2R(R-d)} = -\\frac{d}{R}. \\tag{2}\n\\]\n\nNow apply the law of sines to \\(\\triangle XTY\\). The side \\(XY=2l\\) is opposite the angle \\(\\theta\\), and the circumradius of the triangle is exactly \\(R\\). Therefore  \n\n\\[\n\\frac{2l}{\\sin\\theta}=2R\\quad\\Longrightarrow\\quad R=\\frac{l}{\\sin\\theta}. \\tag{3}\n\\]\n\nInsert (3) into (2): \\(d = -R\\cos\\theta = -l\\cot\\theta\\). \u220e\n\n**5.  Centres and radii of the four circles**  \n\nApply the lemma with the appropriate chord, normal and angle.\n\n* For \\(W_{1}\\) (chord \\(AB\\), normal \\(\\mathbf n\\) points toward \\(C,D\\); opposite\u2011side angle \\(\\alpha\\))  \n\n  \\[\n  O_{1}=M+d_{1}\\mathbf n,\\qquad d_{1}=-p\\cot\\alpha,\\qquad R_{1}=\\frac{p}{\\sin\\alpha}.\n  \\]\n\n* For \\(W_{2}\\) (chord \\(CD\\), normal \\(\\mathbf m\\) points toward \\(A,B\\); opposite\u2011side angle \\(\\beta\\))  \n\n  \\[\n  O_{2}=N+d_{2}\\mathbf m,\\qquad d_{2}=-q\\cot\\beta,\\qquad  R_{2}=\\frac{q}{\\sin\\beta}.\n  \\]\n\n* For \\(W_{3}\\) (chord \\(AB\\), same normal \\(\\mathbf n\\); opposite\u2011side angle \\(\\beta\\))  \n\n  \\[\n  O_{3}=M+d_{3}\\mathbf n,\\qquad d_{3}=-p\\cot\\beta,\\qquad  R_{3}=\\frac{p}{\\sin\\beta}.\n  \\]\n\n* For \\(W_{4}\\) (chord \\(CD\\), same normal \\(\\mathbf m\\); opposite\u2011side angle \\(\\alpha\\))  \n\n  \\[\n  O_{4}=N+d_{4}\\mathbf m,\\qquad d_{4}=-q\\cot\\alpha,\\qquad  R_{4}=\\frac{q}{\\sin\\alpha}.\n  \\]\n\n**6.  The quantity \\(\\Delta_{12}=|O_{1}O_{2}|^{2}-(R_{1}^{2}+R_{2}^{2})\\)**  \n\nFrom the definitions \\(R_{1}^{2}=p^{2}+d_{1}^{2},\\;R_{2}^{2}=q^{2}+d_{2}^{2}\\). Expanding  \n\n\\[\n\\begin{aligned}\n|O_{1}O_{2}|^{2}&=|M-N|^{2}+d_{1}^{2}+d_{2}^{2}\n   +2d_{1}(M-N)\\!\\cdot\\!\\mathbf n-2d_{2}(M-N)\\!\\cdot\\!\\mathbf m-2d_{1}d_{2}\\,\\mathbf n\\!\\cdot\\!\\mathbf m .\n\\end{aligned}\n\\]\n\nTherefore  \n\n\\[\n\\Delta_{12}=|M-N|^{2}-p^{2}-q^{2}\n            +2d_{1}(M-N)\\!\\cdot\\!\\mathbf n-2d_{2}(M-N)\\!\\cdot\\!\\mathbf m-2d_{1}d_{2}\\,\\mathbf n\\!\\cdot\\!\\mathbf m .\n\\]\n\nUsing the dot products from \u00a73,\n\n\\[\n\\begin{aligned}\n(M-N)\\!\\cdot\\!\\mathbf n &= -\\,\\frac{c+d}{2}\\sin\\varphi,\\\\\n(M-N)\\!\\cdot\\!\\mathbf m &= \\frac{a+b}{2}\\sin\\varphi,\\\\\n\\mathbf n\\!\\cdot\\!\\mathbf m &= -\\cos\\varphi .\n\\end{aligned}\n\\]\n\nHence  \n\n\\[\n\\Delta_{12}=|M-N|^{2}-p^{2}-q^{2}\n            -d_{1}(c+d)\\sin\\varphi\n            -d_{2}(a+b)\\sin\\varphi\n            +2d_{1}d_{2}\\cos\\varphi. \\tag{4}\n\\]\n\nNow simplify \\(|M-N|^{2}-p^{2}-q^{2}\\). Since  \n\n\\[\n|M|^{2}=\\Bigl(\\frac{a+b}{2}\\Bigr)^{2},\\quad\n|N|^{2}=\\Bigl(\\frac{c+d}{2}\\Bigr)^{2},\\quad\nM\\!\\cdot\\!N=\\frac{(a+b)(c+d)}{4}\\cos\\varphi,\n\\]\n\nwe have  \n\n\\[\n|M-N|^{2}=|M|^{2}+|N|^{2}-2M\\!\\cdot\\!N .\n\\]\n\nMoreover  \n\n\\[\n|M|^{2}-p^{2}=ab,\\qquad |N|^{2}-q^{2}=cd,\n\\]\n\nbecause  \n\n\\[\n|M|^{2}-p^{2}=\\frac{(a+b)^{2}-(b-a)^{2}}{4}=ab,\\quad\n|N|^{2}-q^{2}=\\frac{(c+d)^{2}-(c-d)^{2}}{4}=cd .\n\\]\n\nConsequently  \n\n\\[\n|M-N|^{2}-p^{2}-q^{2}=ab+cd-2M\\!\\cdot\\!N. \\tag{5}\n\\]\n\nInsert (5) into (4):\n\n\\[\n\\Delta_{12}=ab+cd-2M\\!\\cdot\\!N\n            -d_{1}(c+d)\\sin\\varphi\n            -d_{2}(a+b)\\sin\\varphi\n            +2d_{1}d_{2}\\cos\\varphi. \\tag{6}\n\\]\n\nCompute \\(O_{1}\\!\\cdot\\!O_{2}\\):\n\n\\[\n\\begin{aligned}\nO_{1}\\!\\cdot\\!O_{2}&=(M+d_{1}\\mathbf n)\\!\\cdot\\!(N+d_{2}\\mathbf m)\\\\\n&=M\\!\\cdot\\!N+d_{1}\\mathbf n\\!\\cdot\\!N+d_{2}\\mathbf m\\!\\cdot\\!M+d_{1}d_{2}\\mathbf n\\!\\cdot\\!\\mathbf m\\\\\n&=M\\!\\cdot\\!N+d_{1}\\frac{c+d}{2}\\sin\\varphi+d_{2}\\frac{a+b}{2}\\sin\\varphi-d_{1}d_{2}\\cos\\varphi .\n\\end{aligned}\n\\]\n\nMultiplying by \\(2\\),\n\n\\[\n2\\,O_{1}\\!\\cdot\\!O_{2}=2M\\!\\cdot\\!N+d_{1}(c+d)\\sin\\varphi+d_{2}(a+b)\\sin\\varphi-2d_{1}d_{2}\\cos\\varphi. \\tag{7}\n\\]\n\nComparing (6) and (7) we obtain the compact relation  \n\n\\[\n\\boxed{\\;\\Delta_{12}=ab+cd-2\\,O_{1}\\!\\cdot\\!O_{2}\\;}. \\tag{8}\n\\]\n\n**7.  Tangency of \\(W_{1}\\) and \\(W_{2}\\)**  \n\nLet \\(\\varepsilon = +1\\) if the circles are externally tangent, and \\(\\varepsilon = -1\\) if they are internally tangent. The tangency condition is  \n\n\\[\n|O_{1}O_{2}|^{2}=R_{1}^{2}+R_{2}^{2}+2\\varepsilon R_{1}R_{2},\n\\]\n\nhence  \n\n\\[\n\\Delta_{12}=2\\varepsilon R_{1}R_{2}. \\tag{9}\n\\]\n\n**8.  The analogous quantity for \\(W_{3},W_{4}\\)**  \n\nExactly the same calculation, with \\(d_{3},d_{4}\\) in place of \\(d_{1},d_{2}\\), yields  \n\n\\[\n\\Delta_{34}=|O_{3}O_{4}|^{2}-(R_{3}^{2}+R_{4}^{2})\n          =ab+cd-2\\,O_{3}\\!\\cdot\\!O_{4}. \\tag{10}\n\\]\n\n**9.  Relating \\(\\Delta_{34}\\) to \\(\\Delta_{12}\\)**  \n\nFirst compute \\(O_{3}\\!\\cdot\\!O_{4}-O_{1}\\!\\cdot\\!O_{2}\\):\n\n\\[\n\\begin{aligned}\nO_{3}\\!\\cdot\\!O_{4}-O_{1}\\!\\cdot\\!O_{2}\n&=(d_{3}-d_{1})\\mathbf n\\!\\cdot\\!N+(d_{4}-d_{2})\\mathbf m\\!\\cdot\\!M+(d_{3}d_{4}-d_{1}d_{2})\\mathbf n\\!\\cdot\\!\\mathbf m .\n\\end{aligned}\n\\]\n\nNow  \n\n\\[\n\\begin{aligned}\nd_{3}-d_{1}&=-p\\cot\\beta-(-p\\cot\\alpha)=p(\\cot\\alpha-\\cot\\beta),\\\\[2mm]\nd_{4}-d_{2}&=-q\\cot\\alpha-(-q\\cot\\beta)=-q(\\cot\\alpha-\\cot\\beta),\\\\[2mm]\nd_{3}d_{4}&=pq\\cot\\alpha\\cot\\beta = d_{1}d_{2}.\n\\end{aligned}\n\\]\n\nThus the term \\((d_{3}d_{4}-d_{1}d_{2})\\) vanishes. Substituting the dot products,\n\n\\[\n\\begin{aligned}\nO_{3}\\!\\cdot\\!O_{4}-O_{1}\\!\\cdot\\!O_{2}\n&= (\\cot\\alpha-\\cot\\beta)\\Bigl(p\\frac{c+d}{2}\\sin\\varphi - q\\frac{a+b}{2}\\sin\\varphi\\Bigr)\\\\\n&= \\frac{\\sin\\varphi}{2}\\,(\\cot\\alpha-\\cot\\beta)\\,\\bigl[p(c+d)-q(a+b)\\bigr].\n\\end{aligned}\n\\]\n\nConsequently  \n\n\\[\n\\Delta_{34}-\\Delta_{12}= -2\\bigl(O_{3}\\!\\cdot\\!O_{4}-O_{1}\\!\\cdot\\!O_{2}\\bigr)\n= -(\\cot\\alpha-\\cot\\beta)\\,\\sin\\varphi\\,\\bigl[p(c+d)-q(a+b)\\bigr]. \\tag{11}\n\\]\n\n**10.  A key algebraic consequence of \\(AD\\parallel BC\\)**  \n\nFrom \\(ac=bd\\) (equation (1)) we derive\n\n\\[\n(b-a)(c+d)-(c-d)(a+b)= (bc+bd-ac-ad)-(ac+bc-ad-bd)=2bd-2ac=0,\n\\]\n\nhence  \n\n\\[\n(b-a)(c+d)=(c-d)(a+b). \\tag{12}\n\\]\n\nTaking absolute values (note that \\(a+b>0,\\;c+d>0\\)) gives  \n\n\\[\n|b-a|\\,(c+d)=|c-d|\\,(a+b).\n\\]\n\nRecalling \\(p=|b-a|/2,\\;q=|c-d|/2\\), we obtain  \n\n\\[\np\\,(c+d)=q\\,(a+b). \\tag{13}\n\\]\n\n**11.  Equality of \\(\\Delta_{34}\\) and \\(\\Delta_{12}\\)**  \n\nSubstituting (13) into (11) makes the factor \\(p(c+d)-q(a+b)\\) vanish, so  \n\n\\[\n\\Delta_{34}-\\Delta_{12}=0\\quad\\Longrightarrow\\quad \\Delta_{34}=\\Delta_{12}. \\tag{14}\n\\]\n\n**12.  Tangency of \\(W_{3}\\) and \\(W_{4}\\)**  \n\nFrom (9) and (14) we have \\(\\Delta_{34}=2\\varepsilon R_{1}R_{2}\\). But  \n\n\\[\nR_{1}R_{2}= \\frac{p}{\\sin\\alpha}\\cdot\\frac{q}{\\sin\\beta}\n           = \\frac{p}{\\sin\\beta}\\cdot\\frac{q}{\\sin\\alpha}=R_{3}R_{4}.\n\\]\n\nThus  \n\n\\[\n\\Delta_{34}=2\\varepsilon R_{3}R_{4}. \\tag{15}\n\\]\n\nNow we consider the two possibilities for \\(\\varepsilon\\).\n\n* **Case \\(\\varepsilon = +1\\) (external tangency of \\(W_{1},W_{2}\\))**.  \n  Equation (15) becomes \\(\\Delta_{34}=2R_{3}R_{4}\\), i.e.  \n\n  \\[\n  |O_{3}O_{4}|^{2}=R_{3}^{2}+R_{4}^{2}+2R_{3}R_{4}=(R_{3}+R_{4})^{2}.\n  \\]\n\n  Hence \\(|O_{3}O_{4}|=R_{3}+R_{4}\\); the circles \\(W_{3},W_{4}\\) are externally tangent.\n\n* **Case \\(\\varepsilon = -1\\) (internal tangency of \\(W_{1},W_{2}\\))**.  \n  Then (15) gives \\(\\Delta_{34}=-2R_{3}R_{4}\\), i.e.  \n\n  \\[\n  |O_{3}O_{4}|^{2}=R_{3}^{2}+R_{4}^{2}-2R_{3}R_{4}=(R_{3}-R_{4})^{2}.\n  \\]\n\n  We must verify that this indeed forces the circles to be internally tangent and not coincident.  \n  Suppose, for contradiction, that \\(R_{3}=R_{4}\\). Then \\(|O_{3}O_{4}|=0\\), so \\(O_{3}=O_{4}\\) and the two circles coincide. Consequently the unique circle \\(W=W_{3}=W_{4}\\) passes through \\(A,B,C,D\\).\n\n  Because \\(E\\) lies on line \\(AB\\), the power of \\(E\\) with respect to \\(W\\) equals \\(EA\\cdot EB = a\\,b\\) (using directed distances). Since \\(E\\) also lies on line \\(CD\\), the same power equals \\(EC\\cdot ED = c\\,d\\). Hence  \n\n  \\[\n  ab = cd. \\tag{16}\n  \\]\n\n  Together with the trapezoid condition \\(ac = bd\\) we obtain the system  \n\n  \\[\n  \\begin{cases}\n  ac = bd,\\\\\n  ab = cd.\n  \\end{cases}\n  \\]\n\n  Solving: from \\(ac = bd\\) and \\(ab = cd\\) we multiply the first by \\(a\\) to get \\(a^{2}c = a b d\\). Using \\(ab = cd\\) to replace \\(ab\\) by \\(cd\\) yields \\(a^{2}c = c d^{2}\\). Since \\(c>0\\), we obtain \\(a^{2}=d^{2}\\), thus \\(a=d\\) (positive numbers). Substituting \\(a=d\\) into \\(ac=bd\\) gives \\(a c = b a\\), hence \\(c = b\\). Therefore  \n\n  \\[\n  a = d,\\qquad b = c.\n  \\]\n\n  Consequently \\(p = \\dfrac{|b-a|}{2}= \\dfrac{|c-d|}{2}= q\\) and from \\(R_{3}=R_{4}\\) we have  \n\n  \\[\n  \\frac{p}{\\sin\\beta}=\\frac{q}{\\sin\\alpha}\\;\\Longrightarrow\\; \\sin\\alpha = \\sin\\beta .\n  \\]\n\n  It follows that  \n\n  \\[\n  R_{1}= \\frac{p}{\\sin\\alpha}= \\frac{p}{\\sin\\beta}=R_{2}.\n  \\]\n\n  Because the original circles \\(W_{1},W_{2}\\) are internally tangent (\\(\\varepsilon=-1\\)), the tangency condition \\(|O_{1}O_{2}| = |R_{1}-R_{2}|\\) forces \\(|O_{1}O_{2}|=0\\), i.e. \\(O_{1}=O_{2}\\). Together with \\(R_{1}=R_{2}\\) this means that \\(W_{1}\\) and \\(W_{2}\\) are identical circles. But two identical circles are **not** tangent (they intersect in infinitely many points), contradicting the hypothesis that \\(W_{1}\\) and \\(W_{2}\\) are tangent.  \n\n  Hence our assumption \\(R_{3}=R_{4}\\) is impossible; therefore \\(R_{3}\\neq R_{4}\\). In this situation \\(|O_{3}O_{4}| = |R_{3}-R_{4}|\\) with distinct radii is precisely the condition for two distinct circles to be internally tangent. Thus \\(W_{3}\\) and \\(W_{4}\\) are internally tangent.\n\nIn both cases we have shown that \\(W_{3}\\) and \\(W_{4}\\) are tangent to each other. \u220e\n\n**Remark.** The proof uses the usual convention that a trapezoid is a convex quadrilateral; this guarantees that the intersection point \\(E\\) of the legs lies outside the segments \\(AB,CD\\) and that we can choose the coordinate system as described. The argument remains valid for any trapezoid under that standard definition.\n\n---", "average_automatic_rating": 1.0, "human_rating": 6}}
